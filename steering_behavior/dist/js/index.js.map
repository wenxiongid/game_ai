{"version":3,"sources":["webpack:///webpack/bootstrap e756360eacb573397215","webpack:///./src/js/index.js","webpack:///./src/js/common/misc/cgdi.js","webpack:///./src/js/game_world.js","webpack:///./src/js/common/2d/vector2d.js","webpack:///./src/js/entity_function_templates.js","webpack:///./src/js/common/2d/geometry.js","webpack:///./src/js/common/2d/transformations.js","webpack:///./src/js/common/2d/c2dmatrix.js","webpack:///./src/js/common/misc/cell_space_partition.js","webpack:///./src/js/common/2d/invertedaabbox2d.js","webpack:///./src/js/common/misc/utils.js","webpack:///./src/js/path.js","webpack:///./src/js/params.js","webpack:///./src/js/vehicle.js","webpack:///./src/js/common/game/moving_entity.js","webpack:///./src/js/base_game_entity.js","webpack:///./src/js/common/game/entity_type.js","webpack:///./src/js/steering_behavior.js","webpack:///./src/js/common/misc/smoother.js","webpack:///./src/js/common/2d/wall2d.js","webpack:///./src/js/obstacle.js","webpack:///./src/js/resource.js"],"names":["WIDTH","HEIGHT","setCanvas","document","getElementById","g_GameWorld","addEventListener","e","handleKeyPresses","key","lastTime","Date","getTime","render","currentTime","clear","update","requestAnimationFrame","GDI","RED","BLUE","GREEN","BLACK","PINK","GREY","YELLOW","ORANGE","PURPLE","BROWN","WHITE","DARK_GREEN","LIGHT_BLUE","LIGHT_GREY","LIGHT_PINK","wrapper","width","height","canvas","createElement","ctx","getContext","appendChild","lineWidth","strokeStyle","normalPen","redPen","thickPen","color","fillStyle","x","y","text","fillText","pos","r","beginPath","arc","Math","PI","stroke","startPos","endPos","moveTo","lineTo","posList","i","length","line","clearRect","gdi","GameWorld","cx","cy","border","m_Vehicles","m_Obstacles","m_Walls","m_pCellSpace","NumCellsX","NumCellsY","NumAgents","m_pPath","m_bPaused","m_cxClient","m_cyClient","m_vCrosshair","m_dAvFrameTime","m_bShowWalls","m_bShowObstacles","m_bShowPath","m_bShowDetectionBox","m_bShowWanderCircle","m_bShowFeelers","m_bShowSteeringForce","m_bShowFPS","m_bRenderNeighbors","m_bViewKeys","m_bShowCellSpaceInfo","a","spawnPos","pVehicle","random","VehicleMass","MaxSteeringForce","MaxSpeed","MaxTurnRatePerSecond","VehicleScale","steering","flockingOn","push","addEntity","vehicle0Index","vehicle","id","flockingOff","setScale","wanderOn","setMaxSpeed","evadeOn","o","NumObstacles","bOverlapped","numTrys","numAllowableTrys","radius","MinObstacleRadius","floor","MaxObstacleRadius","minGapBetweenObstacles","ob","borderSize","cornerSize","vDist","hDist","numWallVerts","walls","w","time_elapsed","sampleRate","frameRateSmoother","transparentText","blackPen","circle","bRadius","hollowBrush","box","add","ViewDistance","getReverse","cellSpace","calculateNeighbors","neighbours","pV","greenPen","textColor","renderPath","textAtPos","cxClient","cyClient","renderFPS","toFixed","renderCells","v","range","wParam","setPath","getPath","followPathOn","togglePause","toggleRenderNeighbors","toggleSmoothing","obstacleAvoidanceOff","createObstacles","obstacleAvoidanceOn","wallAvoidanceOff","createWalls","wallAvoidanceOn","hwnd","p","proposedPosition","lenght","curOb","CLOCKWISE","ANTICLOCKWISE","Vector2D","sqrt","lengthSq","pow","vec","val","distanceSq","xDiff","yDiff","max","normalize","normVec","diff","dot","vec2dNormalize","wrapAround","maxX","maxY","vec2DDistanceSq","v1","v2","ySeparation","xSeparation","vec2DDistance","default","maxDouble","overlapped","conOb","minDistBetweenObstacles","it","tagNeighbors","entity","containerOfEntities","curEntity","unTag","to","tag","enforceNonPenetrationConstraint","toEntity","distFromEachOther","amountOfOverLap","setPos","crossNum","getEntityLineSegmentIntersections","entities","theOneToIgnore","A","B","hits","getClosestEntityLineSegmentIntersection","MaxDouble","closestEntity","closestDist","distSq","isEqual","b","abs","distanceToRayPlaneIntersection","rayOrigin","rayHeading","planePoint","planeNormal","d","numer","denom","whereIsPoint","point","pointOnPlane","dir","getRayCircleIntersect","circleOrigin","toCircle","doRayCircleIntersect","getTangentPoints","T1","T2","rSq","invLengthSq","Root","distToLineSegment","P","dotA","dotB","distToLineSegmentSq","lineIntersection2D","C","D","dist","ret","result","rTop","sTop","Bot","invBot","s","objectIntersection2D","obj1","obj2","t","segmentObjectIntersection2D","obj","twoCirclesOverlapped","x1","y1","r1","x2","y2","r2","distBetweenCenters","twoCirclesEnclosed","twoCirclesIntersectionPoints","p3","p4","p2x","p2y","h1","twoCirclesIntersectionArea","i1","i2","CBD","acos","CAD","areaB","sin","areaA","circleArea","pointInCircle","lineSegmentCircleIntersection","distToLineSq","getLineSegmentCircleClosestIntersectionPoint","interSectionPoint","toBNorm","localPos","perp","ipFound","tempPoint","ip","pointToWorldSpace","agentHeading","agentSide","agentPosition","transPoint","clone","matTrandform","rotate","translate","transformVector2D","vectorToWorldSpace","transVec","pointToLocalSpace","tx","ty","_11","_12","_21","_22","_31","_32","vec2dRotateAroundOrigin","ang","mat","worldTransform","points","forward","side","transVector2Ds","matTransform","transformVector2Ds","C2DMatrix","identity","_13","_23","_33","mIn","tempM","tempX","tempY","vecs","multiply","xScale","yScale","fwd","cos","Cell","topLeft","botRight","members","bBox","CellSpacePartition","cellsX","cellsY","maxEntitys","m_Cells","m_Neighbors","m_curNeighbor","m_dSpaceWidth","m_dSpaceHeight","m_iNumCellsX","m_iNumCellsY","m_dCellSizeX","m_dCellSizeY","left","right","top","bot","targetPos","queryRadius","queryBox","curCell","isOverlappedWith","j","idx","ent","positionToIndex","oldPos","oldIdx","newIdx","tempOldMembers","InvertedAABBox2D","tl","br","m_vTopLeft","m_vBottomRight","m_vCenter","other","bottom","renderCenter","clamp","arg","minVal","maxVal","randomClamped","Path","numWaypoints","minX","minY","looped","m_WayPoints","curWaypoint","m_bLooped","createRandomPath","curIndex","midX","midY","smaller","min","spacing","radialDist","temp","newPoint","path","Array","orangePen","wp","PRM","NumSamplesForSmoothing","SteeringForceTweaker","SteeringForce","SeparationWeight","AlignmentWeight","CohesionWeight","ObstacleAvoidanceWeight","WallAvoidanceWeight","WanderWeight","SeekWeight","FleeWeight","ArriveWeight","PursuitWeight","OffsetPursuitWeight","InterposeWeight","HideWeight","EvadeWeight","FollowPathWeight","MinDetectionBoxLength","WallDetectionFeelerLength","prWallAvoidance","prObstacleAvoidance","prSeparation","prAlignment","prCohesion","prWander","prSeek","prFlee","prEvade","prHide","prArrive","Vehicle","world","position","rotation","velocity","mass","maxForce","maxSpeed","maxTurnRate","scale","m_pWorld","m_vSmoothedHeading","m_bSmoothingOn","m_dTimeElapsed","m_vecVehicleVB","initializeBuffer","m_pSteering","m_pHeadingSmoother","NumsamplesForSmoothing","steeringForce","calculate","acceleration","m_dMass","m_vVelocity","truncate","m_dMaxSpeed","m_vPos","m_vHeading","m_vSide","isSpacePartitioningOn","updateEntity","isSmoothingOn","heading","m_vecVehicleVBTrans","renderNeighbors","isTagged","bluePen","isInterposeOn","isHideOn","smoothedHeading","closedShape","viewKeys","renderAids","MovingEntity","turnRate","m_dMaxForce","m_dMaxTurnRate","m_vScale","newVel","newSpeed","mf","speedSq","newHeading","target","toTarget","angle","rotationMatrix","sign","nextID","nextValidID","BaseGameEntity","entityType","forceID","m_ID","m_dBoundingRadius","m_EntityType","m_bTag","telegram","newPos","newType","ENTITYTYPE","slow","normal","fast","WanderRad","WanderDist","WanderJitterPerSec","WaypointSeekDist","BehaviorType","none","seek","flee","arrive","wander","cohesion","separation","allignment","obstacle_avoidance","wall_avoidance","follow_path","pursuit","evade","interpose","hide","flock","offset_pursuit","SteeringBehavior","agent","m_pVehicle","m_vTarget","m_vOffset","m_vSteeringForce","m_iFlags","m_dDBoxLength","m_dWeightCohesion","m_dWeightAlignment","m_dWeightSeparation","m_dWeightObstacleAvoidance","m_dWeightWander","m_dWeightWallAvoidance","m_dViewDistance","m_dWallDetectionFeelerLength","m_Feelers","m_Deceleration","m_pTargetAgent1","m_pTargetAgent2","m_dWanderDistance","m_dWanderJitter","m_dWanderRadius","m_dWaypointSeekDistSq","m_dWeightSeek","m_dWeightFlee","m_dWeightArrive","m_dWeightPursuit","m_dWeightOffsetPursuit","m_dWeightInterpose","m_dWeightHide","m_dWeightEvade","m_dWeightFollowPath","m_bCellSpaceOn","m_SummingMethod","theta","m_vWanderTarget","loopOn","nextSlot","slotSize","setMaxForce","timeElapsed","renderSteeringForce","F","on","renderWanderCircle","m_vTCC","renderDetectionBox","greyPen","speed","tagObstaclesWithinViewRange","closestIntersectingObstacle","distToClosestIP","localPosOfClosestObstacle","obstacles","thickRedPen","renderFeelers","flr","docuemnt","sd","offset","new_path","set","num_waypoints","mx","my","sm","bt","cohension","alignment","cohesionOn","alignmentOn","separationOn","cohensionOff","alignmentOff","separationOff","wanderOff","zero","tagVehiclesWithinViewRange","calculateWeightedSum","calculatePrioritized","calculateDithered","runningTot","forceToAdd","magnitudeSoFar","magnitudeRemaining","returnForce","magnitudeToAdd","force","wallAvoidance","accumulateForce","obstacleAvoidance","crosshair","agents","separationPlus","allignmentPlus","cohesionPlus","isZero","offsetPursuit","followPath","desiredVelocity","panicDistanceSq","deceleration","decelerationTweaker","evader","toEvader","relativeHeading","lookAheadTime","pursuer","toPursuer","thetaRange","jitterThisTimeSlice","Target","distToclosestIP","expandedRadius","sqrtPart","multiplier","brakingWeight","createFeelers","distToThisIP","closestWall","closestPoint","from","overShoot","toAgent","averageHeading","neighbourCount","centerOfMass","pv","agentA","agentB","midPoint","timeToReachMidPoint","aPos","bPos","hunter","distToClosest","bestHidingSpot","closest","hidingSpot","getHidingPosition","posOb","radiusOb","posHunter","DistanceFromBoundary","distAway","toOb","currentWaypoint","setNextWaypoint","finished","leader","worldOffsetPos","toOffset","Smoother","sampleSize","zeroValue","m_History","m_iNextUpdateSlot","m_ZeroValue","mostRecentValue","sum","Wall2D","N","m_vA","m_vB","m_vN","calculateNormal","renderNormals","n","Obstacle","RESOURCE","IDR_MENU1","ID_AID_WANDER","ID_AID_STEERINGFORCE","ID_AID_WALLFEELERS","ID_OB_WALLS","ID_OB_OBSTACLES","ID_OB_PATH","ID_AID_DETECTIONBOX","IDR_PARTITIONING","IDR_WEIGHTED_SUM","IDR_PRIORITIZED","IDR_DITHERED","ID_VIEW_KEYS","ID_VIEW_FPS","ID_MENU_SMOOTHING","IDM_PARTITION_VIEW_NEIGHBORS"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e756360eacb573397215","import gdi from './common/misc/cgdi';\nimport GameWorld from './game_world';\n\nconst WIDTH = 600;\nconst HEIGHT = 600;\n\ngdi.setCanvas(document.getElementById('canvasWrapper'), WIDTH, HEIGHT);\nlet g_GameWorld = new GameWorld(WIDTH, HEIGHT);\n\ndocument.addEventListener('keydown', function(e){\n\tg_GameWorld.handleKeyPresses(e.key);\n});\n\nlet lastTime = (new Date()).getTime();\nfunction render(){\n\tlet currentTime = (new Date()).getTime();\n\tgdi.clear();\n\tg_GameWorld.update((currentTime - lastTime) / 1000);\n\tg_GameWorld.render();\n\trequestAnimationFrame(render);\n\tlastTime = currentTime;\n}\nrender();\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","class GDI{\n\tconstructor() {\n\t\tthis.RED = 'rgb(255,0,0)';\n\t  this.BLUE = 'rgb(0,0,255)';\n\t  this.GREEN = 'rgb(0,255,0)';\n\t  this.BLACK = 'rgb(0,0,0)';\n\t  this.PINK = 'rgb(255,200,200)';\n\t  this.GREY = 'rgb(200,200,200)';\n\t  this.YELLOW = 'rgb(255,255,0)';\n\t  this.ORANGE = 'rgb(255,170,0)';\n\t  this.PURPLE = 'rgb(255,0,170)';\n\t  this.BROWN = 'rgb(133,90,0)';\n\t  this.WHITE = 'rgb(255,255,255)';\n\t  this.DARK_GREEN = 'rgb(0, 100, 0)';\n\t  this.LIGHT_BLUE = 'rgb(0, 255, 255)';\n\t  this.LIGHT_GREY = 'rgb(200, 200, 200)';\n\t  this.LIGHT_PINK = 'rgb(255, 230, 230)';\n\t}\n\tsetCanvas(wrapper, width, height){\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height= height;\n\t\tthis.ctx = this.canvas.getContext('2d');\n\t\twrapper.appendChild(this.canvas);\n\t}\n\ttransparentText(){}\n\tnormalPen(){ this.ctx.lineWidth = 2; }\n\tthickPen(){ this.ctx.lineWidth = 1; }\n\tblackPen(){ this.ctx.strokeStyle = this.BLACK; this.normalPen(); }\n\twhitePen(){ this.ctx.strokeStyle = this.WHITE; this.normalPen(); }\n\tredPen(){ this.ctx.strokeStyle = this.RED; this.normalPen(); }\n\tgreenPen(){ this.ctx.strokeStyle = this.GREEN; this.normalPen(); }\n\tbluePen(){ this.ctx.strokeStyle = this.BLUE; this.normalPen(); }\n\tgreyPen(){ this.ctx.strokeStyle = this.GREY; this.normalPen(); }\n\tpinkPen(){ this.ctx.strokeStyle = this.PINK; this.normalPen(); }\n\tyellowPen(){ this.ctx.strokeStyle = this.YELLOW; this.normalPen(); }\n\torangePen(){ this.ctx.strokeStyle = this.ORANGE; this.normalPen(); }\n\tpurplePen(){ this.ctx.strokeStyle = this.PURPLE; this.normalPen(); }\n\tbrownPen(){ this.ctx.strokeStyle = this.BROWN; this.normalPen(); }\n\tdarkGreenPen(){ this.ctx.strokeStyle = this.DARK_GREEN; this.normalPen(); }\n\tlightBluePen(){ this.ctx.strokeStyle = this.LIGHT_BLUE; this.normalPen(); }\n\tlightGreyPen(){ this.ctx.strokeStyle = this.LIGHT_GREY; this.normalPen(); }\n\tlightPinkPen(){ this.ctx.strokeStyle = this.LIGHT_PINK; this.normalPen(); }\n\thollowBrush(){}\n\tthickRedPen(){\n\t\tthis.redPen();\n\t\tthis.thickPen();\n\t}\n\ttextColor(color){\n\t\tthis.ctx.strokeStyle = color;\n\t\tthis.ctx.fillStyle = color;\n\t}\n\ttextAtPos(x, y, text){\n\t\tthis.ctx.fillText(text, x, y);\n\t}\n\tcircle(pos, r){\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(pos.x, pos.y, r, 0, 2 * Math.PI);\n\t\tthis.ctx.stroke();\n\t}\n\tline(startPos, endPos){\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(startPos.x, startPos.y);\n\t\tthis.ctx.lineTo(endPos.x, endPos.y);\n\t\tthis.ctx.stroke();\n\t}\n\tclosedShape(posList){\n\t\tfor(let i = 0; i < posList.length - 1; i++){\n\t\t\tthis.line(posList[i], posList[i + 1]);\n\t\t}\n\t\tthis.line(posList[posList.length - 1], posList[0]);\n\t}\n\tclear(){\n\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t}\n}\n\nconst gdi = new GDI();\n\nexport default gdi;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/cgdi.js","import gdi from './common/misc/cgdi';\nimport Vector2D from './common/2d/vector2d';\nimport {\n\ttagNeighbors,\n\tenforceNonPenetrationConstraint,\n\toverlapped\n} from './entity_function_templates';\nimport CellSpacePartition from './common/misc/cell_space_partition';\nimport {\n\trandomClamped\n} from './common/misc/utils';\nimport {\n\tpointInCircle\n} from './common/2d/geometry';\nimport Path from './path';\nimport PRM from './params';\nimport Vehicle from './vehicle';\nimport Smoother from './common/misc/smoother';\nimport Wall2D from './common/2d/wall2d';\nimport Obstacle from './obstacle';\nimport RESOURCE from './resource';\nimport InvertedAABBox2D from './common/2d/invertedaabbox2d';\n\nclass GameWorld{\n\tconstructor(cx, cy) {\n\t\tlet border = 30;\n\t\tthis.m_Vehicles = [];\n\t\tthis.m_Obstacles = [];\n\t\tthis.m_Walls = [];\n\t\tthis.m_pCellSpace = new CellSpacePartition(cx, cy, PRM.NumCellsX, PRM.NumCellsY, PRM.NumAgents);\n\t\tthis.m_pPath = new Path(5, border, border, cx - border, cy - border, true);\n\t\tthis.m_bPaused = false;\n\t\tthis.m_cxClient = cx;\n\t\tthis.m_cyClient = cy;\n\t\tthis.m_vCrosshair = new Vector2D(cx / 2, cx / 2);\n\t\tthis.m_dAvFrameTime = 0;\n\t\tthis.m_bShowWalls = true;\n\t\tthis.m_bShowObstacles = true;\n\t\tthis.m_bShowPath = false;\n\t\tthis.m_bShowDetectionBox = false;\n\t\tthis.m_bShowWanderCircle = false;\n\t\tthis.m_bShowFeelers = false;\n\t\tthis.m_bShowSteeringForce = false;\n\t\tthis.m_bShowFPS = true;\n\t\tthis.m_bRenderNeighbors = false;\n\t\tthis.m_bViewKeys = true;\n\t\tthis.m_bShowCellSpaceInfo = true;\n\t\t// for(let a = 0; a < 2; a++){\n\t\t// \tlet spawnPos = new Vector2D(cx / 2 * (1 + randomClamped()), cy / 2 * (1 + randomClamped()));\n\t\t// \tlet pVehicle = new Vehicle(this, spawnPos, Math.random() * 2 * Math.PI, new Vector2D(), PRM.VehicleMass, PRM.MaxSteeringForce, PRM.MaxSpeed, PRM.MaxTurnRatePerSecond, PRM.VehicleScale);\n\t\t// \tpVehicle.steering().wanderOn();\n\t\t// \tthis.m_Vehicles.push(pVehicle);\n\t\t// \tthis.m_pCellSpace.addEntity(pVehicle);\n\t\t// }\n\t\t// for(let i = 0; i < 2; i++){\n\t\t// \tlet vehicle = this.m_Vehicles[i];\n\t\t// \tlet targetVehicle = this.m_Vehicles[1 - i];\n\t\t// \t// vehicle.steering().evadeOn(targetVehicle);\n\t\t// \tvehicle.steering().pursuitOn(targetVehicle);\n\t\t// }\n\n\t\tfor(let a = 0; a < PRM.NumAgents; a++){\n\t\t\tlet spawnPos = new Vector2D(cx / 2 * (1 + randomClamped()), cy / 2 * (1 + randomClamped()));\n\t\t\tlet pVehicle = new Vehicle(this, spawnPos, Math.random() * 2 * Math.PI, new Vector2D(), PRM.VehicleMass, PRM.MaxSteeringForce, PRM.MaxSpeed, PRM.MaxTurnRatePerSecond, PRM.VehicleScale);\n\t\t\tpVehicle.steering().flockingOn();\n\t\t\t// pVehicle.smoothingOn();\n\t\t\tthis.m_Vehicles.push(pVehicle);\n\t\t\tthis.m_pCellSpace.addEntity(pVehicle);\n\t\t}\n\t\t// SHOAL\n\t\tlet vehicle0Index = -1;\n\t\tfor(let i = 0; i < PRM.NumAgents; i++){\n\t\t\tlet vehicle = this.m_Vehicles[i];\n\t\t\tif(vehicle.id() === 0){\n\t\t\t\tvehicle.steering().flockingOff();\n\t\t\t\tvehicle.setScale(10);\n\t\t\t\tvehicle.steering().wanderOn();\n\t\t\t\tvehicle.setMaxSpeed(70);\n\t\t\t\tvehicle0Index = i;\n\t\t\t}\n\t\t}\n\t\tfor(let i = 0; i < PRM.NumAgents; i++){\n\t\t\tif(i != vehicle0Index){\n\t\t\t\tthis.m_Vehicles[i].steering().evadeOn(this.m_Vehicles[vehicle0Index]);\n\t\t\t}\n\t\t}\n\t\t// \n\t}\n\tcreateObstacles(){\n\t\tfor(let o = 0; o < PRM.NumObstacles; o++){\n\t\t\tlet bOverlapped = true;\n\t\t\tlet numTrys = 0;\n\t\t\tlet numAllowableTrys = 2000;\n\t\t\twhile(bOverlapped){\n\t\t\t\tnumTrys++;\n\t\t\t\tif(numTrys > numAllowableTrys){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet radius = PRM.MinObstacleRadius + Math.floor(Math.random() * (PRM.MaxObstacleRadius - PRM.MinObstacleRadius + 1));\n\t\t\t\tlet border = 10;\n\t\t\t\tlet minGapBetweenObstacles = 20;\n\t\t\t\tlet ob = new Obstacle(\n\t\t\t\t\tradius + border + Math.floor(Math.random() * (this.m_cxClient - 2 * radius - 2 * border + 1)),\n\t\t\t\t\tradius + border + Math.floor(Math.random() * (this.m_cyClient - 2 * radius - 30 - 2 * border + 1)),\n\t\t\t\t\tradius\n\t\t\t\t);\n\t\t\t\tif(!overlapped(ob, this.m_Obstacles, minGapBetweenObstacles)){\n\t\t\t\t\tthis.m_Obstacles.push(ob);\n\t\t\t\t\tbOverlapped = false;\n\t\t\t\t}else{\n\t\t\t\t\tob = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcreateWalls(){\n\t\tlet borderSize = 20;\n\t\tlet cornerSize = 0.2;\n\t\tlet vDist = this.m_cyClient - 2 * borderSize;\n\t\tlet hDist = this.m_cxClient - 2 * borderSize;\n\t\tlet numWallVerts = 8;\n\t\tlet walls = [\n\t\t\tnew Vector2D(hDist * cornerSize + borderSize, borderSize),\n\t\t\tnew Vector2D(this.m_cxClient - borderSize - hDist * cornerSize, borderSize),\n\t\t\tnew Vector2D(this.m_cxClient - borderSize, borderSize + vDist * cornerSize),\n\t\t\tnew Vector2D(this.m_cxClient - borderSize, this.m_cyClient - borderSize - vDist * cornerSize),\n\t\t\tnew Vector2D(this.m_cxClient - borderSize - hDist * cornerSize, this.m_cyClient - borderSize),\n\t\t\tnew Vector2D(borderSize + hDist * cornerSize, this.m_cyClient - borderSize),\n\t\t\tnew Vector2D(borderSize, this.m_cyClient - borderSize - vDist * cornerSize),\n\t\t\tnew Vector2D(borderSize, borderSize + vDist * cornerSize)\n\t\t];\n\t\tfor(let w = 0; w < numWallVerts - 1; w++){\n\t\t\tthis.m_Walls.push(new Wall2D(walls[w], walls[w + 1]));\n\t\t}\n\t\tthis.m_Walls.push(new Wall2D(walls[numWallVerts - 1], walls[0]));\n\t}\n\tupdate(time_elapsed){\n\t\tif(this.m_bPaused){\n\t\t\treturn;\n\t\t}\n\t\tconst sampleRate = 10;\n\t\tlet frameRateSmoother = new Smoother(sampleRate, 0);\n\t\tthis.m_dAvFrameTime = frameRateSmoother.update(time_elapsed);\n\t\tfor(let a = 0; a < this.m_Vehicles.length; a++){\n\t\t\tthis.m_Vehicles[a].update(time_elapsed);\n\t\t}\n\t}\n\trender(){\n\t\tgdi.transparentText();\n\t\tgdi.blackPen();\n\t\tfor(let w = 0; w < this.m_Walls.length; w++){\n\t\t\tthis.m_Walls[w].render(true);\n\t\t}\n\t\tgdi.blackPen();\n\t\tfor(let ob = 0; ob < this.m_Obstacles.length; ob++){\n\t\t\tgdi.circle(this.m_Obstacles[ob].pos(), this.m_Obstacles[ob].bRadius());\n\t\t}\n\t\tfor(let a = 0; a < this.m_Vehicles.length; a++){\n\t\t\tthis.m_Vehicles[a].render();\n\t\t\tif(this.m_bShowCellSpaceInfo && a == 0){\n\t\t\t\tgdi.hollowBrush();\n\t\t\t\tlet box = new InvertedAABBox2D(this.m_Vehicles[a].pos().add((new Vector2D(PRM.ViewDistance, PRM.ViewDistance)).getReverse()), this.m_Vehicles[a].pos().add(new Vector2D(PRM.ViewDistance, PRM.ViewDistance)));\n\t\t\t\tbox.render();\n\t\t\t\tgdi.redPen();\n\t\t\t\tthis.cellSpace().calculateNeighbors(this.m_Vehicles[a].pos(), PRM.ViewDistance);\n\t\t\t\tfor(let i = 0; i < this.cellSpace().neighbours().length; i++){\n\t\t\t\t\tlet pV = this.cellSpace().neighbours()[i];\n\t\t\t\t\tgdi.circle(pV.pos(), pV.bRadius());\n\t\t\t\t}\n\t\t\t\tgdi.greenPen();\n\t\t\t\tgdi.circle(this.m_Vehicles[a].pos(), PRM.ViewDistance);\n\t\t\t}\n\t\t}\n\t\tgdi.textColor(gdi.GREY);\n\t\tif(this.renderPath()){\n\t\t\tgdi.textAtPos(this.cxClient() / 2 - 80, this.cyClient() - 20, \"Press 'U' for random path\");\n\t\t\tthis.m_pPath.render();\n\t\t}\n\t\tif(this.renderFPS()){\n\t\t\tgdi.textColor(gdi.GREY);\n\t\t\tgdi.textAtPos(5, this.cyClient() - 20, (1 / this.m_dAvFrameTime).toFixed(2));\n\t\t}\n\t\tif(this.m_bShowCellSpaceInfo){\n\t\t\tthis.m_pCellSpace.renderCells();\n\t\t}\n\t}\n\tnonPenetraitionContraint(v){\n\t\tenforceNonPenetrationConstraint(v, this.m_Vehicles);\n\t}\n\ttagVehiclesWithinViewRange(pVehicle, range){\n\t\ttagNeighbors(pVehicle, this.m_Vehicles, range);\n\t}\n\ttagObstaclesWithinViewRange(pVehicle, range){\n\t\ttagNeighbors(pVehicle, this.m_Obstacles, range);\n\t}\n\twalls(){\n\t\treturn this.m_Walls;\n\t}\n\tcellSpace(){\n\t\treturn this.m_pCellSpace;\n\t}\n\tobstacles(){\n\t\treturn this.m_Obstacles;\n\t}\n\tagents(){\n\t\treturn this.m_Vehicles;\n\t}\n\thandleKeyPresses(wParam){\n\t\tswitch(wParam){\n\t\t\tcase 'u':\n\t\t\t\tdelete this.m_pPath;\n\t\t\t\tlet border = 60;\n\t\t\t\tthis.m_pPath = new Path(3 + Math.floor(Math.random() * 5), border, this.cxClient() - border, this.cyClient() - border, true);\n\t\t\t\tthis.m_bShowPath = true;\n\t\t\t\tfor(let i = 0; i < this.m_Vehicles.length; i++){\n\t\t\t\t\tthis.m_Vehicles[i].steering().setPath(this.m_pPath.getPath());\n\t\t\t\t\tif(this.m_Vehicles[i].id() !== 0){\n\t\t\t\t\t\tthis.m_Vehicles[i].steering().followPathOn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'p':\n\t\t\t\tthis.togglePause();\n\t\t\t\tbreak;\n\t\t\tcase 'o':\n\t\t\t\tthis.toggleRenderNeighbors();\n\t\t\t\tbreak;\n\t\t\tcase 'i':\n\t\t\t\tfor(let i = 0; i < this.m_Vehicles.length; i++){\n\t\t\t\t\tthis.m_Vehicles[i].toggleSmoothing();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'y':\n\t\t\t\tthis.m_bShowObstacles = !this.m_bShowObstacles;\n\t\t\t\tif(!this.m_bShowObstacles){\n\t\t\t\t\tthis.m_Obstacles = [];\n\t\t\t\t\tfor(let i = 0; i < this.m_Vehicles.length; i++){\n\t\t\t\t\t\tthis.m_Vehicles[i].steering().obstacleAvoidanceOff();\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.createObstacles();\n\t\t\t\t\tfor(let i = 0; i < this.m_Vehicles.length; i++){\n\t\t\t\t\t\tthis.m_Vehicles[i].steering().obstacleAvoidanceOn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'w':\n\t\t\t\tthis.m_bShowWalls = !this.m_bShowWalls;\n\t\t\t\tif(!this.m_bShowWalls){\n\t\t\t\t\tthis.m_Walls = [];\n\t\t\t\t\tfor(let i = 0; i < this.m_Vehicles.length; i++){\n\t\t\t\t\t\tthis.m_Vehicles[i].steering().wallAvoidanceOff();\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.createWalls();\n\t\t\t\t\tfor(let i = 0; i < this.m_Vehicles.length; i++){\n\t\t\t\t\t\tthis.m_Vehicles[i].steering().wallAvoidanceOn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\thandleMenuItems(wParam, hwnd){\n\t}\n\ttogglePause(){\n\t\tthis.m_bPaused = !this.m_bPaused;\n\t}\n\tpaused(){\n\t\treturn this.m_bPaused;\n\t}\n\tcrosshair(){\n\t\treturn this.m_vCrosshair;\n\t}\n\tsetCrosshair(p){\n\t\tlet proposedPosition = new Vector2D(p.x, p.y);\n\t\tfor(i = 0; i < this.m_Obstacles.lenght; i++){\n\t\t\tlet curOb = this.m_Obstacles[i];\n\t\t\tif(pointInCircle(curOb.pos(), curOb.bRadius(), proposedPosition)){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.m_vCrosshair.x = p.x;\n\t\tthis.m_vCrosshair.y = p.y;\n\t}\n\tcxClient(){\n\t\treturn this.m_cxClient;\n\t}\n\tcyClient(){\n\t\treturn this.m_cyClient;\n\t}\n\trenderWalls(){\n\t\treturn this.m_bShowWalls;\n\t}\n\trenderObstacles(){\n\t\treturn this.m_bShowObstacles;\n\t}\n\trenderPath(){\n\t\treturn this.m_bShowPath;\n\t}\n\trenderDetectionBox(){\n\t\treturn this.m_bShowDetectionBox;\n\t}\n\trenderWanderCircle(){\n\t\treturn this.m_bShowWanderCircle;\n\t}\n\trenderFeelers(){\n\t\treturn this.m_bShowFeelers;\n\t}\n\trenderSteeringForce(){\n\t\treturn this.m_bShowSteeringForce;\n\t}\n\trenderFPS(){\n\t\treturn this.m_bShowFPS;\n\t}\n\ttoggleShowFPS(){\n\t\tthis.m_bShowFPS = !this.m_bShowFPS;\n\t}\n\ttoggleRenderNeighbors(){\n\t\tthis.m_bRenderNeighbors = !this.m_bRenderNeighbors;\n\t}\n\trenderNeighbors(){\n\t\treturn this.m_bRenderNeighbors;\n\t}\n\ttoggleViewKeys(){\n\t\tthis.m_bViewKeys = !this.m_bViewKeys;\n\t}\n\tviewKeys(){\n\t\treturn this.m_bViewKeys;\n\t}\n\tdestroy(){\n\t\tfor(let a = 0; a < this.m_Vehicles.length; a++){\n\t\t\tdelete this.m_Vehicles[a];\n\t\t}\n\t\tfor(let ob = 0; ob < this.m_Obstacles.length; ob++){\n\t\t\tdelete this.m_Obstacles[ob];\n\t\t}\n\t\tdelete this.m_pCellSpace;\n\t\tdelete this.m_pPath;\n\t}\n}\n\nexport default GameWorld;\n\n\n// WEBPACK FOOTER //\n// ./src/js/game_world.js","const CLOCKWISE = 1;\nconst ANTICLOCKWISE = -1;\n\nclass Vector2D{\n\tconstructor(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t}\n\tzero(){\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\tisZero(){\n\t\treturn this.x * this.x + this.y * this.y <= 0;\n\t}\n\tlength(){\n\t\treturn Math.sqrt(this.lengthSq());\n\t}\n\tlengthSq(){\n\t\treturn Math.pow(this.x, 2) + Math.pow(this.y, 2);\n\t}\n\tnormalize(){\n\t\tlet length = this.length();\n\t\tthis.x /= length;\n\t\tthis.y /= length;\n\t}\n\tadd(vec){\n\t\treturn new Vector2D(this.x + vec.x, this.y + vec.y);\n\t}\n\tcrossNum(val){\n\t\treturn new Vector2D(this.x * val, this.y * val);\n\t}\n\tdot(vec){\n\t\treturn this.x * vec.x + this.y * vec.y;\n\t}\n\tsign(vec){\n\t\t// Y axis pointing down, x axis pointing right\n\t\tif(this.y * vec.x > this.x * vec.y){\n\t\t\treturn ANTICLOCKWISE;\n\t\t}else{\n\t\t\treturn CLOCKWISE;\n\t\t}\n\t}\n\tperp(){\n\t\treturn new Vector2D(-this.y, this.x);\n\t}\n\tdistance(vec){\n\t\treturn Math.sqrt(this.distanceSq(vec));\n\t}\n\tdistanceSq(vec){\n\t\tlet xDiff = vec.x - this.x;\n\t\tlet yDiff = vec.y - this.y;\n\t\treturn xDiff * xDiff + yDiff * yDiff;\n\t}\n\ttruncate(max){\n\t\tif(this.length() > max){\n\t\t\tthis.normalize();\n\t\t\tthis.x *= max;\n\t\t\tthis.y *= max;\n\t\t}\n\t}\n\tgetReverse(){\n\t\treturn new Vector2D(-this.x, -this.y);\n\t}\n\treflect(normVec){\n\t\tlet diff = 2 * this.dot(normVec) * normVec.getReverse();\n\t\tthis.x += diff;\n\t\tthis.y += diff;\n\t}\n\tclone(){\n\t\treturn new Vector2D(this.x, this.y);\n\t}\n}\n\nfunction vec2dNormalize(vec){\n\tlet length = vec.length();\n\treturn new Vector2D(vec.x / length, vec.y / length);\n}\n\nfunction wrapAround(pos, maxX, maxY){\n\tif(pos.x > maxX){\n\t\tpos.x = 0;\n\t}\n\tif(pos.x < 0){\n\t\tpos.x = maxX;\n\t}\n\tif(pos.y > maxY){\n\t\tpos.y = 0;\n\t}\n\tif(pos.y < 0){\n\t\tpos.y = maxY;\n\t}\n}\n\nfunction vec2DDistanceSq(v1, v2){\n\tlet ySeparation = v2.y - v1.y;\n\tlet xSeparation = v2.x - v1.x;\n\treturn ySeparation * ySeparation + xSeparation * xSeparation;\n}\n\nfunction vec2DDistance(v1, v2){\n\treturn Math.sqrt(vec2DDistanceSq(v1, v2));\n}\n\nexport {\n\tVector2D as default,\n\tvec2dNormalize,\n\twrapAround,\n\tvec2DDistanceSq,\n\tvec2DDistance\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/vector2d.js","import {\n\ttwoCirclesOverlapped,\n\tdistToLineSegment\n} from './common/2d/geometry';\nimport { vec2DDistanceSq } from './common/2d/vector2d';\n\nconst maxDouble = 999999;\n\nfunction overlapped(ob, conOb, minDistBetweenObstacles = 40){\n\tfor(let i = 0; i < conOb.length; i++){\n\t\tlet it = conOb[i];\n\t\tif(twoCirclesOverlapped(ob.pos().x, ob.pos().y, ob.bRadius() + minDistBetweenObstacles, it.pos().x, it.pos().y, it.bRadius())){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction tagNeighbors(entity, containerOfEntities, radius){\n\tfor(let i = 0; i < containerOfEntities.length; i++){\n\t\tlet curEntity = containerOfEntities[i];\n\t\tcurEntity.unTag();\n\t\tlet to = curEntity.pos().add(entity.pos().getReverse());\n\t\tlet range = radius + curEntity.bRadius();\n\t\tif(curEntity != entity && to.lengthSq() < range * range){\n\t\t\tcurEntity.tag();\n\t\t}\n\t}\n}\n\nfunction enforceNonPenetrationConstraint(entity, containerOfEntities){\n\tfor(let i = 0; i < containerOfEntities.length; i++){\n\t\tlet curEntity = containerOfEntities[i];\n\t\tif(curEntity != entity){\n\t\t\tlet toEntity = entity.pos().add(curEntity.pos().getReverse());\n\t\t\tlet distFromEachOther = toEntity.length();\n\t\t\tlet amountOfOverLap = curEntity.bRadius() + entity.bRadius() - distFromEachOther;\n\t\t\tif(amountOfOverLap >= 0){\n\t\t\t\tentity.setPos(entity.pos().add(toEntity.crossNum(1 / distFromEachOther * amountOfOverLap)));\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getEntityLineSegmentIntersections(entities, theOneToIgnore, A, B, range = maxDouble){\n\tlet hits = [];\n\tfor(let i = 0; i < entities.length; i++){\n\t\tlet it = entities[i];\n\t\tif(it.id() === theOneToIgnore || vec2DDistanceSq(it.pos(), A) > range * range){\n\t\t\t// do nothing\n\t\t}else{\n\t\t\tif(distToLineSegment(A, B, it.pos()) < it.bRadius()){\n\t\t\t\thits.push(it);\n\t\t\t}\n\t\t}\n\t}\n\treturn hits;\n}\n\nfunction getClosestEntityLineSegmentIntersection(entities, theOneToIgnore, A, B, range = MaxDouble){\n\tlet closestEntity = null;\n\tlet closestDist = maxDouble;\n\tfor(let i = 0; i < entities.length; i++){\n\t\tlet it = entities[i];\n\t\tlet distSq = vec2DDistanceSq(it.pos(), A);\n\t\tif(it.id() === theOneToIgnore || distSq > range * range){\n\t\t\t// do nothing\n\t\t}else{\n\t\t\tif(distToLineSegment(A, B, it.pos()) < it.bRadius()){\n\t\t\t\tif(distSq < closestDist){\n\t\t\t\t\tclosestDist = distSq;\n\t\t\t\t\tclosestEntity = it;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn closestEntity;\n}\n\nexport {\n\toverlapped,\n\ttagNeighbors,\n\tenforceNonPenetrationConstraint,\n\tgetEntityLineSegmentIntersections,\n\tgetClosestEntityLineSegmentIntersection\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/entity_function_templates.js","import Vector2D, {\n\tvec2DDistance,\n\tvec2DDistanceSq,\n\tvec2dNormalize\n} from './vector2d';\nimport {\n\tpointToLocalSpace\n} from './transformations';\n\nfunction isEqual(a, b){\n\treturn Math.abs(a - b) < 1e-12;\n}\n\nfunction distanceToRayPlaneIntersection(rayOrigin, rayHeading, planePoint, planeNormal){\n\tlet d = -planeNormal.dot(planePoint);\n\tlet numer = planeNormal.dot(rayOrigin) + d;\n\tlet denom = planeNormal.dot(rayHeading);\n\tif(denom < 0.000001 && denom > -0.000001){\n\t\treturn -1;\n\t}\n\treturn -(numer / denom);\n}\n\nfunction whereIsPoint(point, pointOnPlane, planeNormal){\n\tlet dir = pointOnPlane.add(point.getReverse());\n\tlet d = dir.dot(planeNormal);\n\tswitch(true){\n\t\tcase d < -0.000001:\n\t\t\treturn 'PLANE_FRONT';\n\t\tcase d > 0.000001:\n\t\t\treturn 'PLANE_BACKIDE';\n\t\tdefault:\n\t\t\treturn 'ON_PLANE';\n\t}\n}\n\nfunction getRayCircleIntersect(rayOrigin, rayHeading, circleOrigin, radius){\n\tlet toCircle = circleOrigin.add(rayOrigin.getReverse());\n\tlet length = toCircle.length();\n\tlet v = toCircle.dot(rayHeading);\n\tlet d = radius * radius - (length * length - v * v);\n\tif(d < 0) return -1;\n\treturn v - Math.sqrt(d);\n}\n\nfunction doRayCircleIntersect(rayOrigin, rayHeading, circleOrigin, radius){\n\tlet toCircle = circleOrigin.add(rayOrigin.getReverse());\n\tlet length = toCircle.length();\n\tlet d = radius * radius - (length * length - v * v);\n\treturn d < 0;\n}\n\nfunction getTangentPoints(circleOrigin, radius, point, T1, T2){\n\tlet toCircle = circleOrigin.add(point.getReverse());\n\tlet lengthSq = toCircle.lengthSq();\n\tlet rSq = r * r;\n\tif(lengthSq <= rSq){\n\t\treturn false;\n\t}\n\tlet invLengthSq = 1 / lengthSq;\n\tlet Root = Math.sqrt(Math.abs(lengthSq - rSq));\n\tT1.x = circleOrigin.x + radius * (radius * toCircle.x - toCircle.y * Root) * invLengthSq;\n\tT1.y = circleOrigin.y + radius * (radius * toCircle.y + toCircle.x * Root) * invLengthSq;\n\tT2.x = circleOrigin.x + radius * (radius * toCircle.x + toCircle.y * Root) * invLengthSq;\n\tT2.y = circleOrigin.y + radius * (radius * toCircle.y - toCircle.x * Root) * invLengthSq;\n\treturn true;\n}\n\nfunction distToLineSegment(A, B, P){\n\tlet dotA = (P.x - A.x) * (B.x - A.x) + (P.y - A.y) * (B.y - A.y);\n\tif(dotA <= 0){\n\t\treturn vec2DDistance(A, P);\n\t}\n\tlet dotB = (P.x - B.x) * (A.x - B.x) + (P.y - B.y) * (A.y - B.y);\n\tif(dotB <= 0){\n\t\treturn vec2DDistance(B, P);\n\t}\n\tlet point = A.add(B.add(A.getReverse()).crossNum(dotA / (dotA + dotB)));\n\treturn vec2DDistance(P, point);\n}\n\nfunction distToLineSegmentSq(A, B, P){\n\tlet dotA = (P.x - A.x) * (B.x - A.x) + (P.y - A.y) * (B.y - A.y);\n\tif(dotA <= 0){\n\t\treturn vec2DDistanceSq(A, P);\n\t}\n\tlet dotB = (P.x - B.x) * (A.x - B.x) + (P.y - B.y) * (A.y - B.y);\n\tif(dotB <= 0){\n\t\treturn vec2DDistanceSq(B, P);\n\t}\n\tlet point = A.add(B.add(A.getReverse()).crossNum(dotA / (dotA + dotB)));\n\treturn vec2DDistanceSq(P, point);\n}\n\nfunction lineIntersection2D(A, B, C, D, dist, point){\n\tlet ret = {\n\t\tresult: false\n\t};\n\tif(typeof dist != 'undefined'){\n\t\tret.dist = dist;\n\t}\n\tif(typeof point != 'undefined'){\n\t\tret.point = point;\n\t}\n\tlet rTop = (A.y - C.y) * (D.x - C.x) - (A.x - C.x) * (D.y - C.y);\n\tlet sTop = (A.y - C.y) * (B.x - A.x) - (A.x - C.x) * (B.y - A.y);\n\tlet Bot = (B.x - A.x) * (D.y - C.y) - (B.y - A.y) * (D.x - C.x);\n\tif(Bot == 0){\n\t\tif(typeof dist != 'undefined' && typeof point == 'undefined'){\n\t\t\tif(isEqual(rTop, 0) && isEqual(sTop, 0)){\n\t\t\t\tret.result = true;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t\tret.result = false;\n\t\treturn ret;\n\t}\n\tlet invBot = 1 / Bot;\n\tlet r = rTop * invBot;\n\tlet s = sTop * invBot;\n\tif(r > 0 && r < 1 && s > 0 && s < 1){\n\t\tif(typeof ret.dist != 'undefined'){\n\t\t\tret.dist = vec2DDistance(A, B) * r;\n\t\t}\n\t\tif(typeof ret.point != 'undefined'){\n\t\t\tret.point = A.add(B.add(A.getReverse()).crossNum(r));\n\t\t}\n\t\tret.result = true;\n\t\treturn ret;\n\t}else{\n\t\tif(typeof ret.dist != 'undefined'){\n\t\t\tret.dist = 0;\n\t\t}\n\t\tret.result = false;\n\t\treturn ret;\n\t}\n}\n\nfunction objectIntersection2D(obj1, obj2){\n\tfor(let r = 0; r < obj1.length - 1; r++){\n\t\tfor(let t = 0; t < obj2.length - 1; t++){\n\t\t\tif(lineIntersection2D(obj2[t], obj2[t + 1], obj1[r], obj1[r + 1])){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction segmentObjectIntersection2D(A, B, obj){\n\tfor(let r = 0; r < obj.length - 1; r++){\n\t\tif(lineIntersection2D(A, B, obj[r], obj[r + 1])){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction twoCirclesOverlapped(x1, y1, r1, x2, y2, r2){\n\tlet distBetweenCenters = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\tif(distBetweenCenters < (r1 + r2) || distBetweenCenters < Math.abs(r1 - r2)){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction twoCirclesEnclosed(x1, y1, r1, x2, y2, r2){\n\tlet distBetweenCenters = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1- y2));\n\tif(distBetweenCenters < Math.abs(r1 - r2)){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction twoCirclesIntersectionPoints(x1, y1, r1, x2, y2, r2, p3, p4){\n\tif(!twoCirclesOverlapped(x1, y1, r1, x2, y2, r2)){\n\t\treturn false;\n\t}\n\tlet d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\tlet a = (r1 * r1 - r2 * r2 + d * d) / (2 * d);\n\tlet b = (r2 * r2 - r1 * r1 + d * d) / (2 * d);\n\n\tlet p2x, p2y;\n\tp2x = x1 + (x2 - x1) * a / d;\n\tp2y = y1 + (y2 - y1) * a / d;\n\tlet h1 = Math.sqrt(r1 * r1 - a * a);\n\tp3.x = p2x + (y2 - y1) * h1 / d;\n\tp3.y = p2y + (x2 - x1) * h1 / d;\n\tp4.x = p2x - (y2 - y1) * h1 / d;\n\tp4.y = p2y - (x2 - x1) * h1 / d;\n\treturn true;\n}\n\nfunction twoCirclesIntersectionArea(x1, y1, r1, x2, y2, r2){\n\tlet i1 = new Vector2D();\n\tlet i2 = new Vector2D();\n\tif(!twoCirclesIntersectionPoints(x1, y1, r1, x2, y2, r2, i1, i2)){\n\t\treturn 0;\n\t}\n\tlet d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\tlet CBD = 2 * Math.acos((r2 * r2 + d * d - r1 * r1) / (2 * r2 * d));\n\tlet CAD = 2 * Math.acos((r1 * r1 + d * d - r2 * r2) / (2 * r1 * d));\n\tlet areaB = CBD * r2 * r2 / 2 + Math.sin(CBD) * r2 * r2 / 2;\n\tlet areaA = CAD * r1 * r1 / 2 + Math.sin(CAD) * r1 * r1 / 2;\n\treturn areaA + areaB;\n}\n\nfunction circleArea(radius){\n\treturn Math.PI * radius * radius;\n}\n\nfunction pointInCircle(circleOrigin, radius, point){\n\tlet distSq = circleOrigin.add(point.getReverse()).lengthSq();\n\tif(distSq < radius){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction lineSegmentCircleIntersection(A, B, P, radius){\n\tlet distToLineSq = distToLineSegmentSq(A, B, P);\n\tif(distToLineSq < radius * radius){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction getLineSegmentCircleClosestIntersectionPoint(A, B, pos, radius, interSectionPoint){\n\tlet toBNorm = vec2dNormalize(B.add(A.getReverse()));\n\tlet localPos = pointToLocalSpace(pos, toBNorm, toBNorm.perp(), A);\n\tlet ipFound = false;\n\tlet tempPoint = new Vector2D();\n\tif(localPos.x + radius >= 0 && (localPos.x - radius) * (localPos.x - radius) <= vec2DDistanceSq(B, A)){\n\t\tif(Math.abs(localPos.y) < radius){\n\t\t\tlet a = localPos.x;\n\t\t\tlet b = localPos.y;\n\t\t\tlet ip = a - Math.sqrt(radius * radius - b * b);\n\t\t\tif(ip <= 0){\n\t\t\t\tip = a + Math.sqrt(radius * radius - b * b);\n\t\t\t}\n\t\t\tipFound = true;\n\t\t\ttempPoint = A.add(toBNorm.crossNum(ip));\n\t\t\tinterSectionPoint.x = tempPoint.x;\n\t\t\tinterSectionPoint.y = tempPoint.y;\n\t\t}\n\t}\n\treturn ipFound;\n}\n\nexport {\n\tdistanceToRayPlaneIntersection,\n\twhereIsPoint,\n\tgetRayCircleIntersect,\n\tdoRayCircleIntersect,\n\tgetTangentPoints,\n\tdistToLineSegment,\n\tdistToLineSegmentSq,\n\tlineIntersection2D,\n\tobjectIntersection2D,\n\tsegmentObjectIntersection2D,\n\ttwoCirclesOverlapped,\n\ttwoCirclesEnclosed,\n\ttwoCirclesIntersectionPoints,\n\ttwoCirclesIntersectionArea,\n\tcircleArea,\n\tpointInCircle,\n\tlineSegmentCircleIntersection,\n\tgetLineSegmentCircleClosestIntersectionPoint\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/geometry.js","import C2DMatrix from './c2dmatrix';\n\nfunction pointToWorldSpace(point, agentHeading, agentSide, agentPosition){\n\tlet transPoint = point.clone();\n\tlet matTrandform = new C2DMatrix();\n\tmatTrandform.rotate(agentHeading, agentSide);\n\tmatTrandform.translate(agentPosition.x, agentPosition.y);\n\tmatTrandform.transformVector2D(transPoint);\n\treturn transPoint;\n}\n\nfunction vectorToWorldSpace(vec, agentHeading, agentSide){\n\tlet transVec = vec.clone();\n\tlet matTrandform = new C2DMatrix();\n\tmatTrandform.rotate(agentHeading, agentSide);\n\tmatTrandform.transformVector2D(transVec);\n\treturn transVec;\n}\n\nfunction pointToLocalSpace(point, agentHeading, agentSide, agentPosition){\n\tlet transPoint = point.clone();\n\tlet matTrandform = new C2DMatrix();\n\tlet tx = agentPosition.getReverse().dot(agentHeading);\n\tlet ty = agentPosition.getReverse().dot(agentSide);\n\tmatTrandform._11 = agentHeading.x; matTrandform._12 = agentSide.x;\n\tmatTrandform._21 = agentHeading.y; matTrandform._22 = agentSide.y;\n\tmatTrandform._31 = tx; matTrandform._32 = ty;\n\tmatTrandform.transformVector2D(transPoint);\n\treturn transPoint;\n}\n\nfunction vec2dRotateAroundOrigin(v, ang){\n\tlet mat = new C2DMatrix();\n\tmat.rotate(ang);\n\tmat.transformVector2D(v);\n}\n\nfunction worldTransform(points, pos, forward, side){\n\tlet transVector2Ds = [];\n\tfor(let i = 0; i < points.length; i++){\n\t\ttransVector2Ds[i] = points[i].clone();\n\t}\n\tlet matTransform = new C2DMatrix();\n\tmatTransform.rotate(forward, side);\n\tmatTransform.translate(pos.x, pos.y);\n\tmatTransform.transformVector2Ds(transVector2Ds);\n\treturn transVector2Ds;\n}\n\nexport {\n\tpointToWorldSpace,\n\tvectorToWorldSpace,\n\tpointToLocalSpace,\n\tvec2dRotateAroundOrigin,\n\tworldTransform\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/transformations.js","class C2DMatrix{\n  constructor() {\n    this.identity();\n  }\n  identity(){\n    this._11 = 1; this._12 = 0; this._13 = 0;\n    this._21 = 0; this._22 = 1; this._23 = 0;\n    this._31 = 0; this._32 = 0; this._33 = 1;\n  }\n  multiply(mIn){\n    let tempM = new C2DMatrix();\n    //first row\n    tempM._11 = (this._11*mIn._11) + (this._12*mIn._21) + (this._13*mIn._31);\n    tempM._12 = (this._11*mIn._12) + (this._12*mIn._22) + (this._13*mIn._32);\n    tempM._13 = (this._11*mIn._13) + (this._12*mIn._23) + (this._13*mIn._33);\n\n    //second\n    tempM._21 = (this._21*mIn._11) + (this._22*mIn._21) + (this._23*mIn._31);\n    tempM._22 = (this._21*mIn._12) + (this._22*mIn._22) + (this._23*mIn._32);\n    tempM._23 = (this._21*mIn._13) + (this._22*mIn._23) + (this._23*mIn._33);\n\n    //third\n    tempM._31 = (this._31*mIn._11) + (this._32*mIn._21) + (this._33*mIn._31);\n    tempM._32 = (this._31*mIn._12) + (this._32*mIn._22) + (this._33*mIn._32);\n    tempM._33 = (this._31*mIn._13) + (this._32*mIn._23) + (this._33*mIn._33);\n\n    this._11 = tempM._11;\n    this._12 = tempM._12;\n    this._13 = tempM._13;\n\n    this._21 = tempM._21;\n    this._22 = tempM._22;\n    this._23 = tempM._23;\n\n    this._31 = tempM._31;\n    this._32 = tempM._32;\n    this._33 = tempM._33;\n  }\n  transformVector2D(vec){\n    let tempX = this._11 * vec.x + this._21 * vec.y + this._31;\n    let tempY = this._12 * vec.x + this._22 * vec.y + this._32;\n    vec.x = tempX;\n    vec.y = tempY;\n  }\n  transformVector2Ds(vecs){\n    for(let i = 0; i < vecs.length; i++){\n      this.transformVector2D(vecs[i]);\n    }\n  }\n  translate(x, y){\n    let mat = new C2DMatrix();\n    mat._11 = 1; mat._12 = 0; mat._13 = 0;\n    mat._21 = 0; mat._22 = 1; mat._23 = 0;\n    mat._31 = x; mat._32 = y; mat._33 = 1;\n    this.multiply(mat);\n  }\n  scale(xScale, yScale){\n    let mat = new C2DMatrix();\n    mat._11 = xScale || 1; mat._12 = 0; mat._13 = 0;\n    mat._21 = 0; mat._22 = yScale || 1; mat._23 = 0;\n    mat._31 = 0; mat._32 = 0; mat._33 = 1;\n    this.multiply(mat);\n  }\n  rotate(fwd, side){\n    let mat = new C2DMatrix();\n    if(typeof side == 'undefined'){\n      let sin = Math.sin(fwd);\n      let cos = Math.cos(fwd);\n      mat._11 = cos; mat._12 = sin; mat._13 = 0;\n      mat._21 = -sin; mat._22 = cos; mat._23 = 0;\n      mat._31 = 0; mat._32 = 0; mat._33 = 1;\n    }else{\n      mat._11 = fwd.x; mat._12 = fwd.y; mat._13 = 0;\n      mat._21 = side.x; mat._22 = side.y; mat._23 = 0;\n      mat._31 = 0; mat._32 = 0; mat._33 = 1;\n    }\n    this.multiply(mat);\n  }\n}\n\nexport default C2DMatrix;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/c2dmatrix.js","import InvertedAABBox2D from '../2d/invertedaabbox2d';\nimport Vector2D, {\n\tvec2DDistanceSq\n} from '../2d/vector2d';\n\nclass Cell{\n\tconstructor(topLeft, botRight) {\n\t\tthis.members = [];\n\t\tthis.bBox = new InvertedAABBox2D(topLeft, botRight);\n\t}\n}\n\nclass CellSpacePartition{\n\tconstructor(width, height, cellsX, cellsY, maxEntitys) {\n\t\tthis.m_Cells = [];\n\t\tthis.m_Neighbors = [];\n\t\tthis.m_curNeighbor = null;\n\t\tthis.m_dSpaceWidth = width;\n\t\tthis.m_dSpaceHeight = height;\n\t\tthis.m_iNumCellsX = cellsX;\n\t\tthis.m_iNumCellsY = cellsY;\n\t\tthis.m_dCellSizeX = width / cellsX;\n\t\tthis.m_dCellSizeY = height / cellsY;\n\t\tfor(let y = 0; y < this.m_iNumCellsY; y++){\n\t\t\tfor(let x = 0; x < this.m_iNumCellsX; x++){\n\t\t\t\tlet left = x * this.m_dCellSizeX;\n\t\t\t\tlet right = left + this.m_dCellSizeX;\n\t\t\t\tlet top = y * this.m_dCellSizeY;\n\t\t\t\tlet bot = top + this.m_dCellSizeY;\n\t\t\t\tthis.m_Cells.push(new Cell(new Vector2D(left, top), new Vector2D(right, bot)));\n\t\t\t}\n\t\t}\n\t}\n\tneighbours(){\n\t\treturn this.m_Neighbors;\n\t}\n\tcalculateNeighbors(targetPos, queryRadius){\n\t\tthis.m_Neighbors = [];\n\t\tlet queryBox = new InvertedAABBox2D(targetPos.add((new Vector2D(queryRadius, queryRadius)).getReverse()), targetPos.add(new Vector2D(queryRadius, queryRadius)));\n\t\tlet curCell;\n\t\tfor(let i = 0; i < this.m_Cells.length; i++){\n\t\t\tcurCell = this.m_Cells[i];\n\t\t\tif(curCell.bBox.isOverlappedWith(queryBox) && curCell.members.length != 0){\n\t\t\t\tfor(let j = 0; j < curCell.members.length; j++){\n\t\t\t\t\tlet it = curCell.members[j];\n\t\t\t\t\tif(vec2DDistanceSq(it.pos(), targetPos) < queryRadius){\n\t\t\t\t\t\tthis.m_Neighbors.push(it);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\temptyCells(){\n\t\tlet it;\n\t\tfor(let i = 0; i < this.m_Cells.length; i++){\n\t\t\tit.members = [];\n\t\t}\n\t}\n\tpositionToIndex(pos){\n\t\tlet idx = Math.floor(pos.x / (this.m_dSpaceWidth /  this.m_iNumCellsX)) + Math.floor(pos.y / (this.m_dSpaceHeight / this.m_iNumCellsY)) * this.m_iNumCellsX;\n\t\tif(idx > this.m_Cells.length - 1){\n\t\t\tidx = this.m_Cells.length - 1;\n\t\t}\n\t\treturn idx;\n\t}\n\taddEntity(ent){\n\t\tlet idx = this.positionToIndex(ent.pos());\n\t\tthis.m_Cells[idx].members.push(ent);\n\t}\n\tupdateEntity(ent, oldPos){\n\t\tlet oldIdx = this.positionToIndex(oldPos);\n\t\tlet newIdx = this.positionToIndex(ent.pos());\n\t\tif(newIdx == oldIdx){\n\t\t\treturn;\n\t\t}\n\t\tlet tempOldMembers = [];\n\t\tfor(let i = 0; i < this.m_Cells[oldIdx].members.length; i++){\n\t\t\tif(this.m_Cells[oldIdx].members[i] != ent){\n\t\t\t\ttempOldMembers.push(this.m_Cells[oldIdx].members[i]);\n\t\t\t}\n\t\t}\n\t\tthis.m_Cells[oldIdx].members = tempOldMembers;\n\t\tthis.m_Cells[newIdx].members.push(ent);\n\t}\n\trenderCells(){\n\t\tfor(let i = 0; i < this.m_Cells.length; i++){\n\t\t\tlet curCell = this.m_Cells[i];\n\t\t\tcurCell.bBox.render(false);\n\t\t}\n\t}\n}\n\nexport {\n\tCellSpacePartition as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/cell_space_partition.js","import gdi from '../misc/cgdi';\n\nclass InvertedAABBox2D{\n\tconstructor(tl, br) {\n\t\tthis.m_vTopLeft = tl;\n\t\tthis.m_vBottomRight = br;\n\t\tthis.m_vCenter = tl.add(br).crossNum(0.5);\n\t}\n\tisOverlappedWith(other){\n\t\treturn !(other.top() > this.bottom() || other.bottom() < this.top() || other.left() > this.right() || other.right() < this.left());\n\t}\n\ttopLeft(){\n\t\treturn this.m_vTopLeft;\n\t}\n\tbottomRight(){\n\t\treturn this.m_vBottomRight;\n\t}\n\ttop(){\n\t\treturn this.m_vTopLeft.y;\n\t}\n\tleft(){\n\t\treturn this.m_vTopLeft.x;\n\t}\n\tbottom(){\n\t\treturn this.m_vBottomRight.y;\n\t}\n\tright(){\n\t\treturn this.m_vBottomRight.x;\n\t}\n\tcenter(){\n\t\treturn this.m_vCenter;\n\t}\n\trender(renderCenter = false){\n\t\tgdi.line(this.left(), this.top(), this.right(), this.top());\n\t\tgdi.line(this.left(), this.bottom(), this.right(), this.bottom());\n\t\tgdi.line(this.left(), this.top(), this.left(), this.bottom());\n\t\tgdi.line(this.right(), this.top(), this.right(), this.bottom());\n\t\tif(renderCenter){\n\t\t\tgdi.circle(this.m_vCenter, 5);\n\t\t}\n\t}\n}\n\nexport default InvertedAABBox2D;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/invertedaabbox2d.js","function clamp(arg, minVal, maxVal){\n\tlet ret = arg;\n\tif(ret < minVal){\n\t\tret = minVal;\n\t}\n\tif(ret > maxVal){\n\t\tret = maxVal;\n\t}\n\treturn ret;\n}\n\nfunction randomClamped(){\n\treturn Math.random() - Math.random();\n}\n\nexport {\n\tclamp,\n\trandomClamped\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/utils.js","import gdi from './common/misc/cgdi';\nimport Vector2D from './common/2d/vector2d';\nimport {\n\tvec2dRotateAroundOrigin\n} from './common/2d/transformations';\n\nclass Path{\n\tconstructor(numWaypoints, minX, minY, maxX, maxY, looped) {\n\t\tthis.m_WayPoints = [];\n\t\tthis.curWaypoint = this.m_WayPoints[0];\n\t\tthis.m_bLooped = looped || false;\n\t\tthis.createRandomPath(numWaypoints, minX, minY, maxX, maxY);\n\t}\n\tcurrentWaypoint(){\n\t\treturn this.curWaypoint;\n\t}\n\tfinished(){\n\t\treturn !(this.curWaypoint != this.m_WayPoints[this.m_WayPoints.length - 1]);\n\t}\n\tsetNextWaypoint(){\n\t\tif(this.m_WayPoints.length > 0){\n\t\t\tlet curIndex = -1;\n\t\t\tfor(let i = 0; i < this.m_WayPoints.length; i++){\n\t\t\t\tif(this.m_WayPoints[i] == this.curWaypoint){\n\t\t\t\t\tcurIndex = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(curIndex >= 0){\n\t\t\t\tif(curIndex == this.m_WayPoints.length - 1){\n\t\t\t\t\tcurIndex = 0;\n\t\t\t\t}else{\n\t\t\t\t\t++curIndex;\n\t\t\t\t}\n\t\t\t\tthis.curWaypoint = this.m_WayPoints[curIndex];\n\t\t\t}\n\t\t}\n\t}\n\tcreateRandomPath(numWaypoints, minX, minY, maxX, maxY){\n\t\tthis.m_WayPoints = [];\n\t\tlet midX = (maxX + minX) / 2;\n\t\tlet midY = (maxY + minY) / 2;\n\t\tlet smaller = Math.min(midX, midY);\n\t\tlet spacing = 2 * Math.PI / numWaypoints;\n\t\tfor(let i = 0; i < numWaypoints; ++i){\n\t\t\tlet radialDist = (0.2 + Math.random() * 0.8) * smaller;\n\t\t\tlet temp = new Vector2D(radialDist, 0);\n\t\t\tvec2dRotateAroundOrigin(temp, i * spacing);\n\t\t\ttemp.x += midX;\n\t\t\ttemp.y += midY;\n\t\t\tthis.m_WayPoints.push(temp);\n\t\t}\n\t\tthis.curWaypoint = this.m_WayPoints[0];\n\t\treturn this.m_WayPoints;\n\t}\n\tloopOn(){\n\t\tthis.m_bLooped = true;\n\t}\n\tloopOff(){\n\t\tthis.m_bLooped = false;\n\t}\n\taddWayPoint(newPoint){\n\t\t// \n\t}\n\tset(path){\n\t\tif(path instanceof Path){\n\t\t\tthis.m_WayPoints = path.getPath();\n\t\t\tthis.curWaypoint = this.m_WayPoints[0];\n\t\t}\n\t\tif(path instanceof Array){\n\t\t\tthis.m_WayPoints = path;\n\t\t\tthis.curWaypoint = this.m_WayPoints[0];\n\t\t}\n\t}\n\tclear(){\n\t\tthis.m_WayPoints = [];\n\t}\n\tgetPath(){\n\t\treturn this.m_WayPoints;\n\t}\n\trender(){\n\t\tgdi.orangePen();\n\t\tfor(let i = 0; i < this.m_WayPoints.length; i++){\n\t\t\tlet it = this.m_WayPoints[i];\n\t\t\tlet wp;\n\t\t\tif(i != this.m_WayPoints.length - 1){\n\t\t\t\twp = this.m_WayPoints[i + 1];\n\t\t\t}else{\n\t\t\t\tif(this.m_bLooped){\n\t\t\t\t\twp = this.m_WayPoints[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(wp){\n\t\t\t\tgdi.line(wp, it);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport {\n\tPath as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/path.js","const PRM = {\n\tNumAgents: 300,\n\tNumObstacles: 7,\n\tMinObstacleRadius: 10,\n\tMaxObstacleRadius: 30,\n\t//number of horizontal cells used for spatial partitioning\n\tNumCellsX: 7,\n\t//number of vertical cells used for spatial partitioning\n\tNumCellsY: 7,\n\t//how many samples the smoother will use to average a value\n\tNumSamplesForSmoothing: 10,\n\t//this is used to multiply the steering force AND all the multipliers\n\t//found in SteeringBehavior\n\tSteeringForceTweaker: 200.0,\n\tSteeringForce: 2.0,\n\tMaxSteeringForce: 2 * 200,\n\tMaxSpeed: 150.0,\n\tVehicleMass: 1.0,\n\tVehicleScale: 3.0,\n\t//use these values to tweak the amount that each steering force\n\t//contributes to the total steering force\n\tSeparationWeight: 1.0 * 200,\n\tAlignmentWeight: 1.0 * 200,\n\tCohesionWeight: 2.0 * 200,\n\tObstacleAvoidanceWeight: 10.0 * 200,\n\tWallAvoidanceWeight: 10.0 * 200,\n\tWanderWeight: 1.0 * 200,\n\tSeekWeight: 1.0 * 200,\n\tFleeWeight: 1.0 * 200,\n\tArriveWeight: 1.0 * 200,\n\tPursuitWeight: 1.0 * 200,\n\tOffsetPursuitWeight: 1.0 * 200,\n\tInterposeWeight: 1.0 * 200,\n\tHideWeight: 1.0 * 200,\n\tEvadeWeight: 0.01 * 200,\n\tFollowPathWeight: 0.05 * 200,\n\t//how close a neighbour must be before an agent perceives it (considers it\n\t//to be within its neighborhood)\n\tViewDistance: 50.0,\n\t//used in obstacle avoidance\n\tMinDetectionBoxLength: 40.0,\n\t//used in wall avoidance\n\tWallDetectionFeelerLength: 40.0,\n\t//these are the probabilities that a steering behavior will be used\n\t//when the Prioritized Dither calculate method is used to sum\n\t//combined behaviors\n\tprWallAvoidance: 0.5,\n\tprObstacleAvoidance: 0.5,\n\tprSeparation: 0.2,\n\tprAlignment: 0.3,\n\tprCohesion: 0.6,\n\tprWander: 0.8,\n\tprSeek: 0.8,\n\tprFlee: 0.6,\n\tprEvade: 1.0,\n\tprHide: 0.8,\n\tprArrive: 0.5,\n\tMaxTurnRatePerSecond: Math.PI\n};\n\nexport default PRM;\n\n\n// WEBPACK FOOTER //\n// ./src/js/params.js","import gdi from './common/misc/cgdi';\nimport MovingEntity from './common/game/moving_entity';\nimport SteeringBehavior from './steering_behavior';\nimport Vector2D, { vec2dNormalize, wrapAround } from './common/2d/vector2d';\nimport PRM from './params';\nimport { worldTransform } from './common/2d/transformations';\nimport Smoother from './common/misc/smoother';\n\nclass Vehicle extends MovingEntity{\n\tconstructor(\n\t\tworld,\n\t\tposition,\n\t\trotation,\n\t\tvelocity,\n\t\tmass,\n\t\tmaxForce,\n\t\tmaxSpeed,\n\t\tmaxTurnRate,\n\t\tscale\n\t) {\n\t\tsuper(position, scale, velocity, maxSpeed, new Vector2D(Math.sin(rotation), -Math.cos(rotation)), mass, new Vector2D(scale, scale), maxTurnRate, maxForce);\n\t\tthis.m_pWorld = world;\n\t\tthis.m_vSmoothedHeading = new Vector2D(0, 0);\n\t\tthis.m_bSmoothingOn = false;\n\t\tthis.m_dTimeElapsed = 0;\n\t\tthis.m_vecVehicleVB = [];\n\t\tthis.initializeBuffer();\n\t\tthis.m_pSteering = new SteeringBehavior(this);\n\t\tthis.m_pHeadingSmoother = new Smoother(PRM.NumsamplesForSmoothing, new Vector2D(0, 0));\n\t}\n\tinitializeBuffer(){\n\t\tthis.m_vecVehicleVB = [new Vector2D(-4.0, 2.4), new Vector2D(4.0, 0.0), new Vector2D(-4.0, -2.4)];\n\t}\n\tupdate(time_elapsed){\n\t\tthis.m_dTimeElapsed = time_elapsed;\n\t\tlet oldPos = this.pos();\n\t\tlet steeringForce = this.m_pSteering.calculate();\n\t\tlet acceleration = steeringForce.crossNum(1 / this.m_dMass);\n\t\tthis.m_vVelocity = this.m_vVelocity.add(acceleration.crossNum(time_elapsed));\n\t\tthis.m_vVelocity.truncate(this.m_dMaxSpeed);\n\t\tthis.m_vPos = this.m_vPos.add(this.m_vVelocity.crossNum(time_elapsed));\n\t\tif(this.m_vVelocity.lengthSq() > 0.00000001){\n\t\t\tthis.m_vHeading = vec2dNormalize(this.m_vVelocity);\n\t\t\tthis.m_vSide = this.m_vHeading.perp();\n\t\t}\n\t\twrapAround(this.m_vPos, this.m_pWorld.cxClient(), this.m_pWorld.cyClient());\n\t\tif(this.steering().isSpacePartitioningOn()){\n\t\t\tthis.world().cellSpace().updateEntity(this, oldPos);\n\t\t}\n\t\tif(this.isSmoothingOn()){\n\t\t\tthis.m_vSmoothedHeading = this.m_pHeadingSmoother.update(this.heading());\n\t\t}\n\t}\n\trender(){\n\t\tlet m_vecVehicleVBTrans = [];\n\t\tif(this.m_pWorld.renderNeighbors()){\n\t\t\tif(this.id() === 0){\n\t\t\t\tgdi.redPen();\n\t\t\t}else if(this.isTagged()){\n\t\t\t\tgdi.greenPen();\n\t\t\t}else{\n\t\t\t\tgdi.bluePen();\n\t\t\t}\n\t\t}else{\n\t\t\tgdi.bluePen();\n\t\t}\n\n\t\tif(this.steering().isInterposeOn()){\n\t\t\tgdi.redPen();\n\t\t}\n\n\t\tif(this.steering().isHideOn()){\n\t\t\tgdi.greenPen();\n\t\t}\n\n\t\tif(this.isSmoothingOn()){\n\t\t\tm_vecVehicleVBTrans = worldTransform(this.m_vecVehicleVB, this.pos(), this.smoothedHeading(), this.smoothedHeading().perp(), this.scale());\n\t\t}else{\n\t\t\tm_vecVehicleVBTrans = worldTransform(this.m_vecVehicleVB, this.pos(), this.heading(), this.side(), this.scale());\n\t\t}\n\n\t\tgdi.closedShape(m_vecVehicleVBTrans);\n\n\t\tif(this.id() === 0 && this.m_pWorld.viewKeys()){\n\t\t\tthis.steering().renderAids();\n\t\t}\n\t}\n\tsteering(){\n\t\treturn this.m_pSteering;\n\t}\n\tworld(){\n\t\treturn this.m_pWorld;\n\t}\n\tsmoothedHeading(){\n\t\treturn this.m_vSmoothedHeading;\n\t}\n\tisSmoothingOn(){\n\t\treturn this.m_bSmoothingOn;\n\t}\n\tsmoothingOn(){\n\t\tthis.m_bSmoothingOn = true;\n\t}\n\tsmoothingOff(){\n\t\tthis.m_bSmoothingOn = false;\n\t}\n\ttoggleSmoothing(){\n\t\tthis.m_bSmoothingOn = !this.m_bSmoothingOn;\n\t}\n\ttimeElapsed(){\n\t\treturn this.m_dTimeElapsed;\n\t}\n}\n\nexport {\n\tVehicle as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/vehicle.js","import BaseGameEntity from '../../base_game_entity';\nimport C2DMatrix from '../2d/c2dmatrix';\nimport Vector2D from '../2d/vector2d';\n\nclass MovingEntity extends BaseGameEntity {\n  constructor(\n    pos,\n    r,\n    velocity,\n    maxSpeed,\n    heading,\n    mass,\n    scale,\n    turnRate,\n    maxForce\n  ) {\n    super(0, pos, r);\n    this.m_vVelocity = velocity;\n    this.m_vHeading = heading;\n    this.m_vSide = heading.perp();\n    this.m_dMass = mass;\n    this.m_dMaxSpeed = maxSpeed;\n    this.m_dMaxForce = maxForce;\n    this.m_dMaxTurnRate = turnRate;\n    this.m_vScale = scale;\n  }\n  velocity(){\n    return this.m_vVelocity;\n  }\n  setVelocity(newVel){\n    this.m_vVelocity = newVel;\n  }\n  mass(){\n    return this.m_dMass;\n  }\n  side(){\n    return this.m_vSide;\n  }\n  maxSpeed(){\n    return this.m_dMaxSpeed;\n  }\n  setMaxSpeed(newSpeed){\n    this.m_dMaxSpeed = newSpeed;\n  }\n  maxForce(){\n    return this.m_dMaxForce;\n  }\n  setMaxForce(mf){\n    this.m_dMaxForce = mf;\n  }\n  speedSq(){\n    return this.m_vVelocity.lengthSq();\n  }\n  speed(){\n    return this.m_vVelocity.length();\n  }\n  isSpeedMaxOut(){\n    return this.m_dMaxSpeed * this.m_dMaxSpeed >= this.speedSq();\n  }\n  heading(){\n    return this.m_vHeading;\n  }\n  setHeading(newHeading){\n    this.m_vHeading = newHeading;\n    this.m_vSide = this.m_vHeading.perp();\n  }\n  rotateHeadingToFacePosition(target){\n    let toTarget = (new Vector2D(target.x - this.m_vPos.x, target.y - this.m_vPos.y)).normalize();\n    let angle = Math.acos(this.m_vHeading.dot(toTarget));\n    let rotationMatrix = new C2DMatrix();\n    if(angle < 0.00001){\n      return true;\n    }\n    if(angle > this.m_dMaxTurnRate){\n      angle = this.m_dMaxTurnRate;\n    }\n    rotationMatrix.rotate(angle * this.m_vHeading.sign(toTarget));\n    rotationMatrix.transformVector2D(this.m_vHeading);\n    rotationMatrix.transformVector2D(this.m_vVelocity);\n    this.m_vSide = this.m_vHeading.perp();\n    return false;\n  }\n  maxTurnRate(){\n    return this.m_dMaxTurnRate;\n  }\n  setMaxTurnRate(val){\n    this.m_dMaxTurnRate = val;\n  }\n}\n\nexport default MovingEntity;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/moving_entity.js","import ENTITYTYPE from './common/game/entity_type';\nimport Vector2D from './common/2d/vector2d';\n\nlet nextID = 0;\nfunction nextValidID(){\n  return nextID++;\n}\n\nexport default class BaseGameEntity{\n  constructor(entityType, pos, r, forceID){\n    this.m_ID = forceID || nextValidID();\n    this.m_dBoundingRadius = r || 0.0;\n    this.m_vPos = pos || new Vector2D(0, 0);\n    this.m_vScale = new Vector2D(1.0, 1.0);\n    this.m_EntityType = entityType || ENTITYTYPE.default;\n    this.m_bTag = false;\n  }\n  update(){}\n  render(){}\n  handleMessage(telegram){\n    return false;\n  }\n  write(){}\n  read(){}\n  pos(){\n    return this.m_vPos;\n  }\n  setPos(newPos){\n    this.m_vPos = newPos;\n  }\n  bRadius(){\n    return this.m_dBoundingRadius;\n  }\n  setBRadius(r){\n    this.m_dBoundingRadius = r;\n  }\n  id(){\n    return this.m_ID;\n  }\n  isTagged(){\n    return this.m_bTag;\n  }\n  tag(){\n    this.m_bTag = true;\n  }\n  unTag(){\n    this.m_bTag = false;\n  }\n  scale(){\n    return this.m_vScale;\n  }\n  setScale(vec){\n    if(typeof vec == 'number'){\n      this.m_dBoundingRadius *= vec / Math.max(this.m_vScale.x, this.m_vScale.y);\n      this.m_vScale = new Vector2D(vec, vec);\n    }else{\n      this.m_dBoundingRadius *= Math.max(vec.x, vec.y) / Math.max(this.m_vScale.x, this.m_vScale.y);\n      this.m_vScale = vec;\n    }\n  }\n  entityType(){\n    return this.m_EntityType;\n  }\n  setEntityType(newType){\n    this.m_EntityType = newType;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/base_game_entity.js","const ENTITYTYPE = {\n  default: -1\n};\n\nexport default ENTITYTYPE;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/entity_type.js","import gdi from './common/misc/cgdi';\nimport PRM from './params';\nimport Vector2D, {\n\tvec2dNormalize,\n\tvec2DDistance,\n\tvec2DDistanceSq\n} from './common/2d/vector2d';\nimport {\n\tpointToWorldSpace,\n\tpointToLocalSpace,\n\tvec2dRotateAroundOrigin,\n\tworldTransform,\n\tvectorToWorldSpace\n} from './common/2d/transformations';\nimport { lineIntersection2D } from './common/2d/geometry';\nimport { clamp } from './common/misc/utils';\nimport Path from './path';\n\nconst MaxDouble = 999999;\n\nfunction randomClamped(){\n\treturn 1 - (Math.random() * 2);\n}\n\nconst slow = 3;\nconst normal = 3;\nconst fast = 3;\nconst WanderRad = 1.2;\nconst WanderDist = 2;\nconst WanderJitterPerSec = 80;\nconst WaypointSeekDist = 20;\nconst BehaviorType = {\n\tnone              : 0x00000,\n  seek              : 0x00002,\n  flee              : 0x00004,\n  arrive            : 0x00008,\n  wander            : 0x00010,\n  cohesion          : 0x00020,\n  separation        : 0x00040,\n  allignment        : 0x00080,\n  obstacle_avoidance: 0x00100,\n  wall_avoidance    : 0x00200,\n  follow_path       : 0x00400,\n  pursuit           : 0x00800,\n  evade             : 0x01000,\n  interpose         : 0x02000,\n  hide              : 0x04000,\n  flock             : 0x08000,\n  offset_pursuit    : 0x10000\n};\n\nexport default class SteeringBehavior{\n\tconstructor(agent) {\n\t\tthis.m_pVehicle = agent;\n\t\tthis.m_vTarget = null;\n\t\tthis.m_vOffset = null;\n\t\tthis.m_vSteeringForce = new Vector2D();\n\t\tthis.m_iFlags = 0;\n\t\tthis.m_dDBoxLength = PRM.MinDetectionBoxLength;\n\t\tthis.m_dWeightCohesion = PRM.CohesionWeight;\n\t\tthis.m_dWeightAlignment = PRM.AlignmentWeight;\n\t\tthis.m_dWeightSeparation = PRM.SeparationWeight;\n\t\tthis.m_dWeightObstacleAvoidance = PRM.ObstacleAvoidanceWeight;\n\t\tthis.m_dWeightWander = PRM.WanderWeight;\n\t\tthis.m_dWeightWallAvoidance = PRM.WallAvoidanceWeight;\n\t\tthis.m_dViewDistance = PRM.ViewDistance;\n\t\tthis.m_dWallDetectionFeelerLength = PRM.WallDetectionFeelerLength;\n\t\tthis.m_Feelers = [new Vector2D(0, 0), new Vector2D(0, 0), new Vector2D(0, 0)];\n\t\tthis.m_Deceleration = normal;\n\t\tthis.m_pTargetAgent1 = null;\n\t\tthis.m_pTargetAgent2 = null;\n\t\tthis.m_dWanderDistance = WanderDist;\n\t\tthis.m_dWanderJitter = WanderJitterPerSec;\n\t\tthis.m_dWanderRadius = WanderRad;\n\t\tthis.m_dWaypointSeekDistSq = WaypointSeekDist * WaypointSeekDist;\n\t\tthis.m_dWeightSeek = PRM.SeekWeight;\n\t\tthis.m_dWeightFlee = PRM.FleeWeight;\n\t\tthis.m_dWeightArrive = PRM.ArriveWeight;\n\t\tthis.m_dWeightPursuit = PRM.PursuitWeight;\n\t\tthis.m_dWeightOffsetPursuit = PRM.OffsetPursuitWeight;\n\t\tthis.m_dWeightInterpose = PRM.InterposeWeight;\n\t\tthis.m_dWeightHide = PRM.HideWeight;\n\t\tthis.m_dWeightEvade = PRM.EvadeWeight;\n\t\tthis.m_dWeightFollowPath = PRM.FollowPathWeight;\n\t\tthis.m_bCellSpaceOn = false;\n\t\tthis.m_SummingMethod = 'prioritized';\n\t\tthis.theta = Math.random() * Math.PI * 2;\n\t\tthis.m_vWanderTarget = new Vector2D(this.m_dWanderRadius * Math.cos(this.theta), this.m_dWanderRadius * Math.sin(this.theta));\n\t\tthis.m_pPath = new Path();\n\t\tthis.m_pPath.loopOn();\n\t}\n\tforwardComponent(){\n\t\treturn this.m_pVehicle.heading().dot(this.m_vSteeringForce);\n\t}\n\tsideComponent(){\n\t\treturn this.m_pVehicle.side().dot(this.m_vSteeringForce);\n\t}\n\trenderAids(){\n\t\tgdi.transparentText();\n\t\tgdi.textColor(gdi.GREY);\n\t\tlet nextSlot = 20;\n\t\tlet slotSize = 20;\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tswitch(e.key){\n\t\t\t\tcase 'PageDown':\n\t\t\t\t\tthis.m_pVehicle.setMaxForce(this.m_pVehicle.maxForce() + 1000 * this.m_pVehicle.timeElapsed());\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'PageUp':\n\t\t\t\t\tif(this.m_pVehicle.maxForce() > 0.2){\n\t\t\t\t\t\tthis.m_pVehicle.setMaxForce(this.m_pVehicle.maxForce() - 1000 * this.m_pVehicle.timeElapsed());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Home':\n\t\t\t\t\tthis.m_pVehicle.setMaxSpeed(this.m_pVehicle.maxSpeed() + 5 * this.m_pVehicle.timeElapsed());\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'End':\n\t\t\t\t\tif(this.m_pVehicle.maxSpeed() > 0.2){\n\t\t\t\t\t\tthis.m_pVehicle.setMaxSpeed(this.m_pVehicle.maxSpeed() - 5 * this.m_pVehicle.timeElapsed());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tif(this.m_pVehicle.maxForce() < 0){\n\t\t\tthis.m_pVehicle.setMaxForce(0);\n\t\t}\n\t\tif(this.m_pVehicle.maxSpeed() < 0){\n\t\t\tthis.m_pVehicle.setMaxSpeed(0);\n\t\t}\n\t\tif(this.m_pVehicle.id() == 0){\n\t\t\tgdi.textAtPos(5, nextSlot, 'MaxForce(PgUp/PgDn):');\n\t\t\tgdi.textAtPos(160, nextSlot, this.m_pVehicle.maxForce() / PRM.SteeringForceTweaker);\n\t\t\tnextSlot += slotSize;\n\t\t}\n\t\tif(this.m_pVehicle.id() == 0){\n\t\t\tgdi.textAtPos(5, nextSlot, 'MaxSpeed(Home/End):');\n\t\t\tgdi.textAtPos(160, nextSlot, this.m_pVehicle.maxSpeed());\n\t\t\tnextSlot += slotSize;\n\t\t}\n\t\tif(this.m_pVehicle.world().renderSteeringForce()){\n\t\t\tgdi.redPen();\n\t\t\tlet F = this.m_vSteeringForce.crossNum(1 / PRM.SteeringForceTweaker * PRM.VehicleScale);\n\t\t\tgdi.line(this.m_pVehicle.pos(), this.m_pVehicle.pos().add(F));\n\t\t}\n\t\tif(this.on(SteeringBehavior.wander) && this.m_pVehicle.world().renderWanderCircle()){\n\t\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\t\tswitch(e.key){\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\tthis.m_dWanderJitter += 1 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWanderJitter = clamp(this.m_dWanderJitter, 0, 100);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tthis.m_dWanderJitter -= 1 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWanderJitter = clamp(this.m_dWanderJitter, 0, 100);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'g':\n\t\t\t\t\t\tthis.m_dWanderDistance += 2 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWanderDistance = clamp(this.m_dWanderDistance, 0, 50);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tthis.m_dWanderDistance -= 2 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWanderDistance = clamp(this.m_dWanderDistance, 0, 50);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'h':\n\t\t\t\t\t\tthis.m_dWanderRadius += 2 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWanderRadius = clamp(this.m_dWanderRadius, 0, 100);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'n':\n\t\t\t\t\t\tthis.m_dWanderRadius -= 2 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWanderRadius = clamp(this.m_dWanderRadius, 0, 100);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'Jitter(F/V): ');\n\t\t\t\tgdi.textAtPos(160, nextSlot, this.m_dWanderJitter);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'Distance(G/B): ');\n\t\t\t\tgdi.textAtPos(160, nextSlot, this.m_dWanderDistance);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'Radius(H/N): ');\n\t\t\t\tgdi.textAtPos(160, nextSlot, this.m_dWanderRadius);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tlet m_vTCC = pointToWorldSpace(new Vector2D(this.m_dWanderRadius * this.m_pVehicle.bRadius(), 0), this.m_pVehicle.heading(), this.m_pVehicle.side(), this.m_pVehicle.pos());\n\t\t\tgdi.greenPen();\n\t\t\tgdi.hollowBrush();\n\t\t\tgdi.circle(m_vTCC, this.m_dWanderRadius * this.m_pVehicle.bRadius());\n\t\t\tgdi.redPen();\n\t\t\tgdi.circle(pointToWorldSpace(this.m_vWanderTarget.add((new Vector2D(this.m_dWanderDistance, 0)).crossNum(this.m_pVehicle.bRadius())), this.m_pVehicle.heading(), this.m_pVehicle.side(), this.m_pVehicle.pos()), 3);\n\t\t}\n\t\tif(this.m_pVehicle.world().renderDetectionBox()){\n\t\t\tgdi.greyPen();\n\t\t\tlet box = [];\n\t\t\tlet length = PRM.MinDetectionBoxLength + (this.m_pVehicle.speed() / this.m_pVehicle.maxSpeed()) * PRM.MinDetectionBoxLength;\n\t\t\tbox[0] = new Vector2D(0, this.m_pVehicle.bRadius());\n\t\t\tbox[1] = new Vector2D(length, this.m_pVehicle.bRadius());\n\t\t\tbox[2] = new Vector2D(length, -this.m_pVehicle.bRadius());\n\t\t\tbox[3] = new Vector2D(0, -this.m_pVehicle.bRadius());\n\t\t\tif(!this.m_pVehicle.isSmoothingOn()){\n\t\t\t\tbox = worldTransform(box, this.m_pVehicle.pos(), this.m_pVehicle.heading(), this.m_pVehicle.side());\n\t\t\t}else{\n\t\t\t\tbox = worldTransform(box, this.m_pVehicle.pos(), this.m_pVehicle.smoothedHeading(), this.m_pVehicle.smoothedHeading().perp());\n\t\t\t}\n\t\t\tgdi.closedShape(box);\n\n\t\t\tthis.m_dDBoxLength = length;\n\t\t\tthis.m_pVehicle.world().tagObstaclesWithinViewRange(this.m_pVehicle, this.m_dDBoxLength);\n\t\t\tlet closestIntersectingObstacle = null;\n\t\t\tlet distToClosestIP = MaxDouble;\n\t\t\tlet localPosOfClosestObstacle = new Vector2D();\n\t\t\tfor(let i = 0; i < this.m_pVehicle.world().obstacles().length; i++){\n\t\t\t\tlet curOb = this.m_pVehicle.world().obstacles()[i];\n\t\t\t\tif(curOb.isTagged()){\n\t\t\t\t\tlet localPos = pointToLocalSpace(curOb.pos(), this.m_pVehicle.heading(), this.m_pVehicle.side(), this.m_pVehicle.pos());\n\t\t\t\t\tif(localPos.x >= 0){\n\t\t\t\t\t\tif(Math.abs(localPos.y) < curOb.bRadius() + this.m_pVehicle.bRadius()){\n\t\t\t\t\t\t\tgdi.thickRedPen();\n\t\t\t\t\t\t\t// FIXME: ???\n\t\t\t\t\t\t\tgdi.closedShape(box);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(SteeringBehavior.wall_avoidance) && this.m_pVehicle.world().renderFeelers()){\n\t\t\tgdi.orangePen();\n\t\t\tfor(let flr = 0; flr < this.m_Feelers.length; flr++){\n\t\t\t\tgdi.line(this.m_pVehicle.pos(), this.m_Feelers[flr]);\n\t\t\t}\n\t\t}\n\t\tif(this.on(SteeringBehavior.follow_path) && this.m_pVehicle.world().renderPath()){\n\t\t\tthis.m_pPath.render();\n\t\t}\n\t\tif(this.on(SteeringBehavior.separation)){\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'Separation(S/X):');\n\t\t\t\tgdi.textAtPos(160, nextSlot, this.m_dWeightSeparation / PRM.SteeringForceTweaker);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tdocuemnt.addEventListener('keydown', (e) => {\n\t\t\t\tswitch(e.key){\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tthis.m_dWeightSeparation += 200 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWeightSeparation = clamp(this.m_dWeightSeparation, 0, 50 * PRM.SteeringForceTweaker);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x':\n\t\t\t\t\t\tthis.m_dWeightSeparation -= 200 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWeightSeparation = clamp(this.m_dWeightSeparation, 0, 50 * PRM.SteeringForceTweaker);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif(this.on(SteeringBehavior.allignment)){\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'Alignment(A/Z):');\n\t\t\t\tgdi.textAtPos(160, nextSlot, this.m_dWeightAlignment / PRM.SteeringForceTweaker);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tdocuemnt.addEventListener('keydown', (e) => {\n\t\t\t\tswitch(e.key){\n\t\t\t\t\tcase 'a':\n\t\t\t\t\t\tthis.m_dWeightAlignment += 200 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWeightAlignment = clamp(this.m_dWeightAlignment, 0, 50 * PRM.SteeringForceTweaker);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'z':\n\t\t\t\t\t\tthis.m_dWeightAlignment -= 200 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWeightAlignment = clamp(this.m_dWeightAlignment, 0, 50 * PRM.SteeringForceTweaker);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif(this.on(SteeringBehavior.cohesion)){\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'Cohesion(D/C):');\n\t\t\t\tgdi.textAtPos(160, nextSlot, this.m_dWeightCohesion / PRM.SteeringForceTweaker);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tdocuemnt.addEventListener('keydown', (e) => {\n\t\t\t\tswitch(e.key){\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\tthis.m_dWeightCohesion += 200 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWeightCohesion = clamp(this.m_dWeightCohesion, 0, 50 * PRM.SteeringForceTweaker);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tthis.m_dWeightCohesion -= 200 * this.m_pVehicle.timeElapsed();\n\t\t\t\t\t\tthis.m_dWeightCohesion = clamp(this.m_dWeightCohesion, 0, 50 * PRM.SteeringForceTweaker);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif(this.on(SteeringBehavior.follow_path)){\n\t\t\tlet sd = Math.sqrt(this.m_dWaypointSeekDistSq);\n\t\t\tif(this.m_pVehicle.id() == 0){\n\t\t\t\tgdi.textAtPos(5, nextSlot, 'SeekDistance(D/C):');\n\t\t\t\tgdi.textAtPos(160, nextSlot, sd);\n\t\t\t\tnextSlot += slotSize;\n\t\t\t}\n\t\t\tdocuemnt.addEventListener('keydown', (e) => {\n\t\t\t\tswitch(e.key){\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\tthis.m_dWaypointSeekDistSq += 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tthis.m_dWaypointSeekDistSq -= 1;\n\t\t\t\t\t\tthis.m_dWaypointSeekDistSq = clamp(this.m_dWaypointSeekDistSq, 0, 400);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tsetTarget(t){\n\t\tthis.m_vTarget = t;\n\t}\n\tsetTargetAgent1(agent){\n\t\tthis.m_pTargetAgent1 = agent;\n\t}\n\tsetTargetAgent2(agent){\n\t\tthis.m_pTargetAgent2 = agent;\n\t}\n\tsetOffset(offset){\n\t\tthis.m_vOffset = offset;\n\t}\n\tgetOffset(){\n\t\treturn this.m_vOffset;\n\t}\n\tsetPath(new_path){\n\t\tthis.m_pPath.set(new_path);\n\t}\n\tcreatePath(num_waypoints, mx, my, cx, cy){\n\t\tthis.m_pPath.createRandomPath(num_waypoints, mx, my, cx, cy);\n\t}\n\tforce(){\n\t\treturn this.m_vSteeringForce;\n\t}\n\ttoggleSpacePartitioningOnOff(){\n\t\tthis.m_bCellSpaceOn = !this.m_bCellSpaceOn;\n\t}\n\tisSpacePartitioningOn(){\n\t\treturn this.m_bCellSpaceOn;\n\t}\n\tsetSummingMethod(sm){\n\t\tthis.m_SummingMethod = sm;\n\t}\n\ton(bt){\n\t\treturn (this.m_iFlags & bt) == bt;\n\t}\n\tfleeOn(){\n\t\tthis.m_iFlags |= BehaviorType.flee;\n\t}\n\tfleeOff(){\n\t\tif(this.on(BehaviorType.flee)){\n\t\t\tthis.m_iFlags ^= BehaviorType.flee;\n\t\t}\n\t}\n\tseekOn(){\n\t\tthis.m_iFlags |= BehaviorType.seek;\n\t}\n\tseekOff(){\n\t\tif(this.on(BehaviorType.seek)){\n\t\t\tthis.m_iFlags ^= BehaviorType.seek;\n\t\t}\n\t}\n\tarriveOn(){\n\t\tthis.m_iFlags |= BehaviorType.arrive;\n\t}\n\tarriveOff(){\n\t\tif(this.on(BehaviorType.arrive)){\n\t\t\tthis.m_iFlags ^= BehaviorType.arrive;\n\t\t}\n\t}\n\twanderOn(){\n\t\tthis.m_iFlags |= BehaviorType.wander;\n\t}\n\twanderOff(){\n\t\tif(this.on(BehaviorType.wander)){\n\t\t\tthis.m_iFlags ^= BehaviorType.wander;\n\t\t}\n\t}\n\tpursuitOn(v){\n\t\tthis.m_iFlags |= BehaviorType.pursuit;\n\t\tthis.m_pTargetAgent1 = v;\n\t}\n\tpursuitOff(){\n\t\tif(this.on(BehaviorType.pursuit)){\n\t\t\tthis.m_iFlags ^= BehaviorType.pursuit;\n\t\t}\n\t}\n\tevadeOn(v){\n\t\tthis.m_iFlags |= BehaviorType.evade;\n\t\tthis.m_pTargetAgent1 = v;\n\t}\n\tevadeOff(){\n\t\tif(this.on(BehaviorType.evade)){\n\t\t\tthis.m_iFlags ^= BehaviorType.evade;\n\t\t}\n\t}\n\tcohesionOn(){\n\t\tthis.m_iFlags |= BehaviorType.cohesion;\n\t}\n\tcohensionOff(){\n\t\tif(this.on(BehaviorType.cohension)){\n\t\t\tthis.m_iFlags ^= BehaviorType.cohension;\n\t\t}\n\t}\n\tseparationOn(){\n\t\tthis.m_iFlags |= BehaviorType.separation;\n\t}\n\tseparationOff(){\n\t\tif(this.on(BehaviorType.separation)){\n\t\t\tthis.m_iFlags ^= BehaviorType.separation;\n\t\t}\n\t}\n\talignmentOn(){\n\t\tthis.m_iFlags |= BehaviorType.allignment;\n\t}\n\talignmentOff(){\n\t\tif(this.on(BehaviorType.alignment)){\n\t\t\tthis.m_iFlags ^= BehaviorType.alignment;\n\t\t}\n\t}\n\tobstacleAvoidanceOn(){\n\t\tthis.m_iFlags |= BehaviorType.obstacle_avoidance;\n\t}\n\tobstacleAvoidanceOff(){\n\t\tif(this.on(BehaviorType.obstacle_avoidance)){\n\t\t\tthis.m_iFlags ^= BehaviorType.obstacle_avoidance;\n\t\t}\n\t}\n\twallAvoidanceOn(){\n\t\tthis.m_iFlags |= BehaviorType.wall_avoidance;\n\t}\n\twallAvoidanceOff(){\n\t\tif(this.on(BehaviorType.wall_avoidance)){\n\t\t\tthis.m_iFlags ^= BehaviorType.wall_avoidance;\n\t\t}\n\t}\n\tfollowPathOn(){\n\t\tthis.m_iFlags |= BehaviorType.follow_path;\n\t}\n\tfollowPathOff(){\n\t\tif(this.on(BehaviorType.follow_path)){\n\t\t\tthis.m_iFlags ^= BehaviorType.follow_path;\n\t\t}\n\t}\n\tisInterposeOn(){\n\t\treturn this.on(BehaviorType.interpose);\n\t}\n\tinterposeOn(v1, v2){\n\t\tthis.m_iFlags |= BehaviorType.interpose;\n\t\tthis.m_pTargetAgent1 = v1;\n\t\tthis.m_pTargetAgent2 = v2;\n\t}\n\tinterposeOff(){\n\t\tif(this.on(BehaviorType.interpose)){\n\t\t\tthis.m_iFlags ^= BehaviorType.interpose;\n\t\t}\n\t}\n\tisHideOn(){\n\t\treturn this.on(BehaviorType.hide);\n\t}\n\thideOn(v){\n\t\tthis.m_iFlags |= BehaviorType.hide;\n\t\tthis.m_pTargetAgent1 = v;\n\t}\n\thideOff(){\n\t\tif(this.on(BehaviorType.hide)){\n\t\t\tthis.m_iFlags ^= BehaviorType.hide;\n\t\t}\n\t}\n\toffsetPursuitOn(v1, offset){\n\t\tthis.m_iFlags |= BehaviorType.offset_pursuit;\n\t\tthis.m_pTargetAgent1 = v1;\n\t\tthis.m_vOffset = offset;\n\t}\n\toffsetPursuitOff(){\n\t\tif(this.on(BehaviorType.offset_pursuit)){\n\t\t\tthis.m_iFlags ^= BehaviorType.offset_pursuit;\n\t\t}\n\t}\n\tflockingOn(){\n\t\tthis.cohesionOn();\n\t\tthis.alignmentOn();\n\t\tthis.separationOn();\n\t\tthis.wanderOn();\n\t}\n\tflockingOff(){\n\t\tthis.cohensionOff();\n\t\tthis.alignmentOff();\n\t\tthis.separationOff();\n\t\tthis.wanderOff();\n\t}\n\tdBoxLength(){\n\t\treturn this.m_dDBoxLength;\n\t}\n\tgetFeelers(){\n\t\treturn this.m_Feelers;\n\t}\n\twanderJitter(){\n\t\treturn this.m_dWanderJitter;\n\t}\n\twanderDistance(){\n\t\treturn this.m_dWanderDistance;\n\t}\n\twanderRadius(){\n\t\treturn this.m_dWanderRadius;\n\t}\n\tseparationWeight(){\n\t\treturn this.m_dWeightSeparation;\n\t}\n\talignmentWeight(){\n\t\treturn this.m_dWeightAlignment;\n\t}\n\tcohensionWeight(){\n\t\treturn this.m_dWeightCohesion;\n\t}\n\tcalculate(){\n\t\tthis.m_vSteeringForce.zero();\n\t\tif(!this.isSpacePartitioningOn()){\n\t\t\tif(this.on(BehaviorType.separation) || this.on(BehaviorType.allignment) || this.on(BehaviorType.cohesion)){\n\t\t\t\tthis.m_pVehicle.world().tagVehiclesWithinViewRange(this.m_pVehicle, this.m_dViewDistance);\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.on(BehaviorType.separation) || this.on(BehaviorType.allignment) || this.on(BehaviorType.cohesion)){\n\t\t\t\tthis.m_pVehicle.world().cellSpace().calculateNeighbors(this.m_pVehicle.pos(), this.m_dViewDistance);\n\t\t\t}\n\t\t}\n\t\tswitch(this.m_SummingMethod){\n\t\t\tcase 'weighted_average':\n\t\t\t\tthis.m_vSteeringForce = this.calculateWeightedSum();\n\t\t\t\tbreak;\n\t\t\tcase 'prioritized':\n\t\t\t\tthis.m_vSteeringForce = this.calculatePrioritized();\n\t\t\t\tbreak;\n\t\t\tcase 'dithered':\n\t\t\t\tthis.m_vSteeringForce = this.calculateDithered();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.m_vSteeringForce = new Vector2D(0, 0);\n\t\t}\n\t\treturn this.m_vSteeringForce;\n\t}\n\taccumulateForce(runningTot, forceToAdd){\n\t\tlet magnitudeSoFar = runningTot.length();\n\t\tlet magnitudeRemaining = this.m_pVehicle.maxForce() - magnitudeSoFar;\n\t\tlet returnForce = new Vector2D();\n\t\tif(magnitudeRemaining <= 0){\n\t\t\treturn false;\n\t\t}\n\t\tlet magnitudeToAdd = forceToAdd.length();\n\t\tif(magnitudeToAdd < magnitudeRemaining){\n\t\t\treturnForce = runningTot.add(forceToAdd);\n\t\t}else{\n\t\t\treturnForce = runningTot.add(vec2dNormalize(forceToAdd).crossNum(magnitudeRemaining));\n\t\t}\n\t\treturn returnForce;\n\t}\n\tcalculatePrioritized(){\n\t\tlet force = new Vector2D();\n\t\tif(this.on(BehaviorType.wall_avoidance)){\n\t\t\tforce = this.wallAvoidance(this.m_pVehicle.world().walls()).crossNum(this.m_dWeightWallAvoidance);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.obstacle_avoidance)){\n\t\t\tforce = this.obstacleAvoidance(this.m_pVehicle.world().obstacles()).crossNum(this.m_dWeightObstacleAvoidance);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.evade)){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tforce = this.evade(this.m_pTargetAgent1).crossNum(this.m_dWeightEvade);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.flee)){\n\t\t\tforce = this.flee(this.m_pVehicle.world().crosshair()).crossNum(this.m_dWeightFlee);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\tif(!this.isSpacePartitioningOn()){\n\t\t\tif(this.on(BehaviorType.separation)){\n\t\t\t\tforce = this.separation(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightSeparation);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.allignment)){\n\t\t\t\tforce = this.allignment(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightAlignment);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.cohesion)){\n\t\t\t\tforce = this.cohesion(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightCohesion);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.on(BehaviorType.separation)){\n\t\t\t\tforce = this.separationPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightSeparation);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.allignment)){\n\t\t\t\tforce = this.allignmentPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightAlignment);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.cohesion)){\n\t\t\t\tforce = this.cohesionPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightCohesion);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.seek)){\n\t\t\tforce = this.seek(this.m_pVehicle.world().crosshair()).crossNum(this.m_dWeightSeek);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.arrive)){\n\t\t\tforce = this.arrive(this.m_pVehicle.world().crosshair(), this.m_Deceleration).crossNum(this.m_dWeightArrive);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.wander)){\n\t\t\tforce = this.wander().crossNum(this.m_dWeightWander);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.pursuit)){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tforce = this.pursuit(this.m_pTargetAgent1).crossNum(this.m_dWeightPursuit);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.offset_pursuit)){\n\t\t\tif(this.m_pTargetAgent1 && !this.m_vOffset.isZero()){\n\t\t\t\tforce = this.offsetPursuit(this.m_pTargetAgent1, this.m_vOffset);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.interpose)){\n\t\t\tif(this.m_pTargetAgent1 && this.m_pTargetAgent2){\n\t\t\t\tforce = this.interpose(this.m_pTargetAgent1, this.m_pTargetAgent2).crossNum(this.m_dWeightInterpose);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.hide)){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tforce = this.hide(this.m_pTargetAgent1, this.m_pVehicle.world().obstacles()).crossNum(this.m_dWeightHide);\n\t\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.follow_path)){\n\t\t\tforce = this.followPath().crossNum(this.m_dWeightFollowPath);\n\t\t\tif(!this.accumulateForce(this.m_vSteeringForce, force)){\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}else{\n\t\t\t\tthis.m_vSteeringForce = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\t}\n\t\t}\n\t\treturn this.m_vSteeringForce;\n\t}\n\tcalculateWeightedSum(){\n\t\tif(this.on(BehaviorType.wall_avoidance)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.wallAvoidance(this.m_pVehicle.world().walls()).crossNum(this.m_dWeightWallAvoidance));\n\t\t}\n\t\tif(this.on(BehaviorType.obstacle_avoidance)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.obstacleAvoidance(this.m_pVehicle.world().obstacles()).crossNum(this.m_dWeightObstacleAvoidance));\n\t\t}\n\t\tif(this.on(BehaviorType.evade)){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.evade(this.m_pTargetAgent1).crossNum(this.m_dWeightEvade));\n\t\t\t}\n\t\t}\n\t\tif(!this.isSpacePartitioningOn()){\n\t\t\tif(this.on(BehaviorType.separation)){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.separation(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightSeparation));\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.allignment)){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.allignment(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightAlignment));\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.cohesion)){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.cohesion(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightCohesion));\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.on(BehaviorType.separation)){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.separationPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightSeparation));\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.allignment)){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.allignmentPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightAlignment));\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.cohesion)){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.cohesionPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightCohesion));\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.wander)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.wander().crossNum(this.m_dWeightWander));\n\t\t}\n\t\tif(this.on(BehaviorType.seek)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.seek(this.m_pVehicle.world().crosshair()).crossNum(this.m_dWeightSeek));\n\t\t}\n\t\tif(this.on(BehaviorType.flee)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.flee(this.m_pVehicle.world().crosshair()).crossNum(this.m_dWeightFlee));\n\t\t}\n\t\tif(this.on(BehaviorType.arrive)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.arrive(this.m_pVehicle.world().crosshair(), this.m_Deceleration).crossNum(this.m_dWeightArrive));\n\t\t}\n\t\tif(this.on(BehaviorType.pursuit)){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.pursuit(this.m_pTargetAgent1).crossNum(this.m_dWeightPursuit));\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.offset_pursuit)){\n\t\t\tif(this.m_pTargetAgent1 && !this.m_vOffset.isZero()){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.offsetPursuit(this.m_pTargetAgent1).crossNum(this.m_dWeightPursuit));\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.interpose)){\n\t\t\tif(this.m_pTargetAgent1 && this.m_pTargetAgent2){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.interpose(this.m_pTargetAgent1, this.m_pTargetAgent2).crossNum(this.m_dWeightInterpose));\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.hide)){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.hide(this.m_pTargetAgent1, this.m_pVehicle.world().obstacles()).crossNum(this.m_dWeightHide));\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.follow_path)){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.followPath().crossNum(this.m_dWeightFollowPath));\n\t\t}\n\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\treturn this.m_vSteeringForce;\n\t}\n\tcalculateDithered(){\n\t\tthis.m_vSteeringForce.zero();\n\t\tif(this.on(BehaviorType.wall_avoidance) && Math.random() < PRM.prWallAvoidance){\n\t\t\tthis.m_vSteeringForce = this.wallAvoidance(this.m_pVehicle.world().walls()).crossNum(this.m_dWeightWallAvoidance / PRM.prWallAvoidance);\n\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.obstacle_avoidance) && Math.random() < PRM.prObstacleAvoidance){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.obstacleAvoidance(this.m_pVehicle.world().obstacles()).crossNum(this.m_dWeightObstacleAvoidance / PRM.prObstacleAvoidance));\n\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.isSpacePartitioningOn()){\n\t\t\tif(this.on(BehaviorType.separation) && Math.random() < PRM.prSeparation){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.separation(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightSeparation / PRM.prSeparation));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.allignment) && Math.random() < PRM.prAlignment){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.allignment(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightAlignment / PRM.prAlignment));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.cohesion) && Math.random() < PRM.cohesion){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.cohesion(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightCohesion / PRM.prCohesion));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.on(BehaviorType.separation) && Math.random() < PRM.prSeparation){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.separationPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightSeparation / PRM.prSeparation));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.allignment) && Math.random() < PRM.prAlignment){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.allignmentPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightAlignment / PRM.prAlignment));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.on(BehaviorType.cohesion) && Math.random() < PRM.cohesion){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.cohesionPlus(this.m_pVehicle.world().agents()).crossNum(this.m_dWeightCohesion / PRM.prCohesion));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.flee) && Math.random() < PRM.prFlee){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.flee(this.m_pVehicle.world().crosshair()).crossNum(this.m_dWeightFlee / PRM.prFlee));\n\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.evade) && Math.random() < PRM.prEvade){\n\t\t\tif(this.m_pTargetAgent1){\n\t\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.evade(this.m_pTargetAgent1).crossNum(this.m_dWeightEvade / PRM.prEvade));\n\t\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.wander) && Math.random() < PRM.prWander){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.wander().crossNum(this.m_dWeightWander / PRM.prWander));\n\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.seek) && Math.random() < PRM.prSeek){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.seek(this.m_pVehicle.world().crosshair()).crossNum(this.m_dWeightSeek / PRM.prSeek));\n\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.arrive) && Math.random() < PRM.prArrive){\n\t\t\tthis.m_vSteeringForce = this.m_vSteeringForce.add(this.arrive(this.m_pVehicle.world().crosshair(), this.m_Deceleration).crossNum(this.m_dWeightArrive / PRM.prArrive));\n\t\t\tif(!this.m_vSteeringForce.isZero()){\n\t\t\t\tthis.m_vSteeringForce.truncate(this.m_pVehicle.maxForce());\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\treturn this.m_vSteeringForce;\n\t}\n\tseek(targetPos){\n\t\tlet desiredVelocity = vec2dNormalize(targetPos.add(this.m_pVehicle.pos().getReverse())).crossNum(this.m_pVehicle.maxSpeed());\n\t\treturn desiredVelocity.add(this.m_pVehicle.velocity().getReverse());\n\t}\n\tflee(targetPos){\n\t\tlet panicDistanceSq = 100 * 100;\n\t\tif(targetPos.add(this.m_pVehicle.pos().getReverse()).length() > panicDistanceSq){\n\t\t\treturn new Vector2D(0, 0);\n\t\t}else{\n\t\t\tlet desiredVelocity = vec2dNormalize(this.m_pVehicle.pos().add(targetPos.getReverse())).crossNum(this.m_pVehicle.maxSpeed());\n\t\t\treturn desiredVelocity.add(this.m_pVehicle.velocity().getReverse());\n\t\t}\n\t}\n\tarrive(targetPos, deceleration){\n\t\tlet toTarget = targetPos.add(this.m_pVehicle.pos().getReverse());\n\t\tlet dist = toTarget.length();\n\t\tif(dist > 0){\n\t\t\tlet decelerationTweaker = 0.3;\n\t\t\tlet speed = dist / (deceleration * decelerationTweaker);\n\t\t\tspeed = Math.min(speed, this.m_pVehicle.maxSpeed());\n\t\t\tlet desiredVelocity = toTarget.crossNum(speed / dist);\n\t\t\treturn desiredVelocity.add(this.m_pVehicle.velocity().getReverse());\n\t\t}\n\t\treturn new Vector2D(0, 0);\n\t}\n\tpursuit(evader){\n\t\tlet toEvader = evader.pos().add(this.m_pVehicle.pos().getReverse());\n\t\tlet relativeHeading = this.m_pVehicle.heading().dot(evader.heading());\n\t\tif(toEvader.dot(this.m_pVehicle.heading()) > 0 && relativeHeading < -0.95){\n\t\t\treturn this.seek(evader.pos());\n\t\t}\n\t\tlet lookAheadTime = toEvader.length() / (this.m_pVehicle.maxSpeed() + evader.speed());\n\t\treturn this.seek(evader.pos().add(evader.velocity().crossNum(lookAheadTime)));\n\t}\n\tevade(pursuer){\n\t\tlet toPursuer = pursuer.pos().add(this.m_pVehicle.pos().getReverse());\n\t\tlet thetaRange = 100;\n\t\tif(toPursuer.lengthSq() > thetaRange * thetaRange){\n\t\t\treturn new Vector2D(0, 0);\n\t\t}\n\t\tlet lookAheadTime = toPursuer.length() / (this.m_pVehicle.maxSpeed() + pursuer.speed());\n\t\treturn this.flee(pursuer.pos().add(pursuer.velocity().crossNum(lookAheadTime)));\n\t}\n\twander(){\n\t\tlet jitterThisTimeSlice = this.m_dWanderJitter * this.m_pVehicle.timeElapsed();\n\t\tthis.m_vWanderTarget = this.m_vWanderTarget.add(new Vector2D(randomClamped() * jitterThisTimeSlice, randomClamped() * jitterThisTimeSlice));\n\t\tthis.m_vWanderTarget.normalize();\n\t\tthis.m_vWanderTarget =this.m_vWanderTarget.crossNum(this.m_dWanderRadius);\n\t\tlet target = this.m_vWanderTarget.add(new Vector2D(this.m_dWanderDistance, 0));\n\t\tlet Target = pointToWorldSpace(target, this.m_pVehicle.heading(), this.m_pVehicle.side(), this.m_pVehicle.pos());\n\t\treturn Target.add(this.m_pVehicle.pos().getReverse());\n\t}\n\tobstacleAvoidance(obstacles){\n\t\tthis.m_dDBoxLength = PRM.MinDetectionBoxLength + (this.m_pVehicle.speed() / this.m_pVehicle.maxSpeed()) * PRM.MinDetectionBoxLength;\n\t\tthis.m_pVehicle.world().tagObstaclesWithinViewRange(this.m_pVehicle, this.m_dDBoxLength);\n\t\tlet closestIntersectingObstacle = null;\n\t\tlet distToclosestIP = MaxDouble;\n\t\tlet localPosOfClosestObstacle = null;\n\t\tfor(let i = 0; i < obstacles.length; i++){\n\t\t\tlet curOb = obstacles[i];\n\t\t\tif(curOb.isTagged()){\n\t\t\t\tlet localPos = pointToLocalSpace(curOb.pos(), this.m_pVehicle.heading(), this.m_pVehicle.side(), this.m_pVehicle.pos());\n\t\t\t\tif(localPos.x >= 0){\n\t\t\t\t\tlet expandedRadius = curOb.bRadius() + this.m_pVehicle.bRadius();\n\t\t\t\t\tif(Math.abs(localPos.y) < expandedRadius){\n\t\t\t\t\t\tlet cx = localPos.x;\n\t\t\t\t\t\tlet cy = localPos.y;\n\t\t\t\t\t\tlet sqrtPart = Math.sqrt(expandedRadius * expandedRadius - cy * cy);\n\t\t\t\t\t\tlet ip = cx - sqrtPart;\n\t\t\t\t\t\tif(ip <= 0){\n\t\t\t\t\t\t\tip = cx + sqrtPart;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(ip < distToclosestIP){\n\t\t\t\t\t\t\tdistToclosestIP = ip;\n\t\t\t\t\t\t\tclosestIntersectingObstacle = curOb;\n\t\t\t\t\t\t\tlocalPosOfClosestObstacle = localPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet steeringForce = new Vector2D(0, 0);\n\t\tif(closestIntersectingObstacle){\n\t\t\tlet multiplier = 1 + (this.m_dDBoxLength - localPosOfClosestObstacle.x) / this.m_dDBoxLength;\n\t\t\tsteeringForce.y = (closestIntersectingObstacle.bRadius() - localPosOfClosestObstacle.y) * multiplier;\n\t\t\tlet brakingWeight = 0.2;\n\t\t\tsteeringForce.x = (closestIntersectingObstacle.bRadius() - localPosOfClosestObstacle.x) * brakingWeight;\n\t\t}\n\t\treturn vectorToWorldSpace(steeringForce, this.m_pVehicle.heading(), this.m_pVehicle.side());\n\t}\n\twallAvoidance(walls){\n\t\tthis.createFeelers();\n\t\tlet distToThisIP = 0;\n\t\tlet distToClosestIP = MaxDouble;\n\t\tlet closestWall = -1;\n\t\tlet steeringForce = new Vector2D();\n\t\tlet point = new Vector2D();\n\t\tlet closestPoint = new Vector2D();\n\t\tfor(let flr = 0; flr < this.m_Feelers.length; flr++){\n\t\t\tfor(let w = 0; w < walls.length; w++){\n\t\t\t\tlet result = lineIntersection2D(this.m_pVehicle.pos(), this.m_Feelers[flr], walls[w].from(), walls[w].to(), distToThisIP, point);\n\t\t\t\tdistToThisIP = result.dist;\n\t\t\t\tpoint = result.point;\n\t\t\t\tif(result.result){\n\t\t\t\t\tif(distToThisIP < distToClosestIP){\n\t\t\t\t\t\tdistToClosestIP = distToThisIP;\n\t\t\t\t\t\tclosestWall = w;\n\t\t\t\t\t\tclosestPoint = point;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(closestWall >= 0){\n\t\t\t\tlet overShoot = this.m_Feelers[flr].add(closestPoint.getReverse());\n\t\t\t\tsteeringForce = walls[closestWall].normal().crossNum(overShoot.length());\n\t\t\t}\n\t\t}\n\t\treturn steeringForce;\n\t}\n\tseparation(neighbours){\n\t\tlet steeringForce = new Vector2D();\n\t\tfor(let a = 0; a < neighbours.length; a++){\n\t\t\tif(neighbours[a] != this.m_pVehicle && neighbours[a].isTagged() && neighbours[a] != this.m_pTargetAgent1){\n\t\t\t\tlet toAgent = this.m_pVehicle.pos().add(neighbours[a].pos().getReverse());\n\t\t\t\tsteeringForce = steeringForce.add(vec2dNormalize(toAgent).crossNum(1 / toAgent.length()));\n\t\t\t}\n\t\t}\n\t\treturn steeringForce;\n\t}\n\tallignment(neighbours){\n\t\tlet averageHeading = new Vector2D();\n\t\tlet neighbourCount = 0;\n\t\tfor(let a = 0; a < neighbours.length; a++){\n\t\t\tif(neighbours[a] != this.m_pVehicle && neighbours[a].isTagged() && neighbours[a] != this.m_pTargetAgent1){\n\t\t\t\taverageHeading = averageHeading.add(neighbours[a].heading());\n\t\t\t\t++neighbourCount;\n\t\t\t}\n\t\t}\n\t\tif(neighbourCount > 0){\n\t\t\taverageHeading.crossNum(1 / neighbourCount);\n\t\t\taverageHeading = averageHeading.add(this.m_pVehicle.heading().getReverse());\n\t\t}\n\t\treturn averageHeading;\n\t}\n\tcohesion(neighbours){\n\t\tlet centerOfMass = new Vector2D();\n\t\tlet steeringForce = new Vector2D();\n\t\tlet neighbourCount = 0;\n\t\tfor(let a = 0; a < neighbours.length; a++){\n\t\t\tif(neighbours[a] != this.m_pVehicle && neighbours[a].isTagged() && neighbours[a] != this.m_pTargetAgent1){\n\t\t\t\tcenterOfMass = centerOfMass.add(neighbours[a].pos());\n\t\t\t\t++neighbourCount;\n\t\t\t}\n\t\t}\n\t\tif(neighbourCount > 0){\n\t\t\tcenterOfMass.crossNum(1 / neighbourCount);\n\t\t\tsteeringForce = this.seek(centerOfMass);\n\t\t}\n\t\treturn vec2dNormalize(steeringForce);\n\t}\n\tseparationPlus(neighbours){\n\t\tlet steeringForce = new Vector2D();\n\t\tfor(let i = 0; i < this.m_pVehicle.world().cellSpace().length; i++){\n\t\t\tlet pV = this.m_pVehicle.world().cellSpace()[i];\n\t\t\tif(pV != this.m_pVehicle){\n\t\t\t\tlet toAgent = this.m_pVehicle.pos().add(pv.pos().getReverse());\n\t\t\t\tsteeringForce = steeringForce.add(vec2dNormalize(toAgent).crossNum(1 / toAgent.length()));\n\t\t\t}\n\t\t}\n\t\treturn steeringForce;\n\t}\n\tallignmentPlus(neighbours){\n\t\tlet averageHeading = new Vector2D();\n\t\tlet neighbourCount = 0;\n\t\tfor(let i = 0; i < this.m_pVehicle.world().cellSpace().length; i++){\n\t\t\tlet pV = this.m_pVehicle.world().cellSpace()[i];\n\t\t\tif(pV != this.m_pVehicle){\n\t\t\t\taverageHeading = averageHeading.add(pV.heading());\n\t\t\t\tneighbourCount++;\n\t\t\t}\n\t\t}\n\t\tif(neighbourCount > 0){\n\t\t\taverageHeading = averageHeading.crossNum(1 / neighbourCount);\n\t\t\taverageHeading = averageHeading.add(this.m_pVehicle.heading().getReverse());\n\t\t}\n\t\treturn averageHeading;\n\t}\n\tcohesionPlus(neighbours){\n\t\tlet centerOfMass = new Vector2D();\n\t\tlet steeringForce = new Vector2D();\n\t\tlet neighbourCount = 0;\n\t\tfor(let i = 0; i < this.m_pVehicle.world().cellSpace().length; i++){\n\t\t\tlet pV = this.m_pVehicle.world().cellSpace()[i];\n\t\t\tif(pV != this.m_pVehicle){\n\t\t\t\tcenterOfMass = centerOfMass.add(pV.pos());\n\t\t\t\tneighbourCount++;\n\t\t\t}\n\t\t}\n\t\tif(neighbourCount > 0){\n\t\t\tcenterOfMass = centerOfMass.crossNum(1 / neighbourCount);\n\t\t\tsteeringForce = this.seek(centerOfMass);\n\t\t}\n\t\treturn vec2dNormalize(steeringForce);\n\t}\n\tinterpose(agentA, agentB){\n\t\tlet midPoint = agentA.pos().add(agentB.pos()).crossNum(1 / 2);\n\t\tlet timeToReachMidPoint = vec2DDistance(this.m_pVehicle.pos(), midPoint) / this.m_pVehicle.maxSpeed();\n\t\tlet aPos = agentA.pos().add(agentA.velocity().crossNum(timeToReachMidPoint));\n\t\tlet bPos = agentB.pos().add(agentB.velocity().crossNum(timeToReachMidPoint));\n\t\tmidPoint = aPos.add(bPos).crossNum(1 / 2);\n\t\treturn this.arrive(midPoint, fast);\n\t}\n\thide(hunter, obstacles){\n\t\tlet distToClosest = MaxDouble;\n\t\tlet bestHidingSpot = new Vector2D();\n\t\tlet closest;\n\t\tfor(let i = 0; i < obstacles.length; i++){\n\t\t\tlet curOb = obstacles[i];\n\t\t\tlet hidingSpot = this.getHidingPosition(curOb.pos(), curOb.bRadius(), hunter.pos());\n\t\t\tlet dist = vec2DDistanceSq(hidingSpot, this.m_pVehicle.pos());\n\t\t\tif(dist < distToClosest){\n\t\t\t\tdistToClosest = dist;\n\t\t\t\tbestHidingSpot = hidingSpot;\n\t\t\t\tclosest = curOb;\n\t\t\t}\n\t\t}\n\t\tif(distToClosest == MaxDouble){\n\t\t\treturn this.evade(hunter);\n\t\t}\n\t\treturn arrive(bestHidingSpot, fast);\n\t}\n\tgetHidingPosition(posOb, radiusOb, posHunter){\n\t\tconst DistanceFromBoundary = 30;\n\t\tlet distAway = radiusOb + DistanceFromBoundary;\n\t\tlet toOb = vec2dNormalize(posOb.add(posHunter.getReverse()));\n\t\treturn toOb.crossNum(distAway).add(posOb);\n\t}\n\tfollowPath(){\n\t\tif(vec2DDistanceSq(this.m_pPath.currentWaypoint(), this.m_pVehicle.pos()) < this.m_dWaypointSeekDistSq){\n\t\t\tthis.m_pPath.setNextWaypoint();\n\t\t}\n\t\tif(!this.m_pPath.finished()){\n\t\t\treturn this.seek(this.m_pPath.currentWaypoint());\n\t\t}else{\n\t\t\treturn this.arrive(this.m_pPath.currentWaypoint(), normal);\n\t\t}\n\t}\n\toffsetPursuit(leader, offset){\n\t\tlet worldOffsetPos = pointToWorldSpace(offset, leader.heading(), leader.side(), leader.pos());\n\t\tlet toOffset = worldOffsetPos.add(this.m_pVehicle.pos().getReverse());\n\t\tlet lookAheadTime = toOffset.length() / (this.m_pVehicle.maxSpeed() + leader.speed());\n\t\treturn this.arrive(worldOffsetPos.add(leader.velocity().crossNum(lookAheadTime)), fast);\n\t}\n\tcreateFeelers(){\n\t\tthis.m_Feelers[0] = this.m_pVehicle.pos().add(this.m_pVehicle.heading().crossNum(this.m_dWallDetectionFeelerLength));\n\t\tlet temp = this.m_pVehicle.heading().clone();\n\t\tvec2dRotateAroundOrigin(temp, Math.PI * 7 / 4);\n\t\tthis.m_Feelers[1] = this.m_pVehicle.pos().add(temp.crossNum(this.m_dWallDetectionFeelerLength / 2));\n\t\ttemp = this.m_pVehicle.heading().clone();\n\t\tvec2dRotateAroundOrigin(temp, Math.PI * 1 / 4);\n\t\tthis.m_Feelers[2] = this.m_pVehicle.pos().add(temp.crossNum(this.m_dWallDetectionFeelerLength / 2));\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/steering_behavior.js","import Vector2D from '../2d/vector2d';\n\nclass Smoother{\n\tconstructor(sampleSize, zeroValue) {\n\t\tthis.m_History = [sampleSize, zeroValue];\n\t\tthis.m_iNextUpdateSlot = 0;\n\t\tthis.m_ZeroValue = zeroValue;\n\t}\n\tupdate(mostRecentValue){\n\t\tthis.m_History[this.m_iNextUpdateSlot++] = mostRecentValue;\n\t\tif(this.m_iNextUpdateSlot == this.m_History.length){\n\t\t\tthis.m_iNextUpdateSlot = 0;\n\t\t}\n\t\tlet sum = this.m_ZeroValue;\n\t\tfor(let i = 0; i < this.m_History.length; i++){\n\t\t\tlet it = this.m_History[i];\n\t\t\tif(sum instanceof Vector2D){\n\t\t\t\tsum = sum.add(it);\n\t\t\t}else{\n\t\t\t\tsum += it;\n\t\t\t}\n\t\t}\n\t\tif(sum instanceof Vector2D){\n\t\t\treturn sum.crossNum(1 / this.m_History.length);\n\t\t}else{\n\t\t\treturn sum / this.m_History.length;\n\t\t}\n\t}\n}\n\nexport default Smoother;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/smoother.js","import gdi from '../misc/cgdi';\nimport Vector2D, {\n\tvec2dNormalize\n} from './vector2d';\n\nclass Wall2D{\n\tconstructor(A, B, N) {\n\t\tthis.m_vA = new Vector2D();\n\t\tthis.m_vB = new Vector2D();\n\t\tthis.m_vN = new Vector2D();\n\t\tif(A && B){\n\t\t\tthis.m_vA = A;\n\t\t\tthis.m_vB = B;\n\t\t\tif(N){\n\t\t\t\tthis.m_vN = N;\n\t\t\t}else{\n\t\t\t\tthis.calculateNormal();\n\t\t\t}\n\t\t}\n\t}\n\tcalculateNormal(){\n\t\tlet temp = vec2dNormalize(this.m_vB.add(this.m_vA.getReverse()));\n\t\tthis.m_vN.x = -temp.y;\n\t\tthis.m_vN.y = temp.x;\n\t}\n\trender(renderNormals = false){\n\t\tgdi.line(this.m_vA, this.m_vB);\n\t\tif(renderNormals){\n\t\t\tlet midX = (this.m_vA.x + this.m_vB.x) / 2;\n\t\t\tlet midY = (this.m_vA.y + this.m_vB.y) / 2;\n\n\t\t\tgdi.line(new Vector2D(midX, midY), new Vector2D((midX + (this.m_vN.x * 5)), (midY + (this.m_vN.y * 5))));\n\t\t}\n\t}\n\tfrom(){\n\t\treturn this.m_vA;\n\t}\n\tsetFrom(v){\n\t\tthis.m_vA = v;\n\t\tthis.calculateNormal();\n\t}\n\tto(){\n\t\treturn this.m_vB;\n\t}\n\tsetTo(v){\n\t\tthis.m_vB = v;\n\t\tthis.calculateNormal();\n\t}\n\tnormal(){\n\t\treturn this.m_vN;\n\t}\n\tsetNormal(n){\n\t\tthis.m_vN = n;\n\t}\n\tcenter(){\n\t\treturn this.m_vA.add(this.m_vB).crossNum(0.5);\n\t}\n}\n\nexport default Wall2D;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/wall2d.js","import gdi from './common/misc/cgdi';\nimport BaseGameEntity from './base_game_entity';\nimport Vector2D from './common/2d/vector2d';\n\nclass Obstacle extends BaseGameEntity{\n\tconstructor(x, y, r) {\n\t\tsuper(0, new Vector2D(x, y), r);\n\t}\n\tupdate(time_elapsed){}\n\trender(){\n\t\tgdi.blackPen();\n\t\tgdi.circle(this.pos(), this.bRadius());\n\t}\n}\n\nexport default Obstacle;\n\n\n// WEBPACK FOOTER //\n// ./src/js/obstacle.js","const RESOURCE = {\n\tIDR_MENU1:                       101,\n\tID_AID_WANDER:                   40001,\n\tID_AID_STEERINGFORCE:            40002,\n\tID_AID_WALLFEELERS:              40003,\n\tID_OB_WALLS:                     40004,\n\tID_OB_OBSTACLES:                 40005,\n\tID_OB_PATH:                      40006,\n\tID_AID_DETECTIONBOX:             40007,\n\tIDR_PARTITIONING:                40008,\n\tIDR_WEIGHTED_SUM:                40009,\n\tIDR_PRIORITIZED:                 40010,\n\tIDR_DITHERED:                    40011,\n\tID_VIEW_KEYS:                    40012,\n\tID_VIEW_FPS:                     40013,\n\tID_MENU_SMOOTHING:               40014,\n\tIDM_PARTITION_VIEW_NEIGHBORS:    40015\n};\n\nexport default RESOURCE;\n\n\n// WEBPACK FOOTER //\n// ./src/js/resource.js"],"sourceRoot":""}