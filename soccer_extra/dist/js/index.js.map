{"version":3,"sources":["webpack:///webpack/bootstrap 4dbdd4555211b729b1a3","webpack:///./src/js/index.js","webpack:///./src/js/common/misc/cgdi.js","webpack:///./src/js/constants.js","webpack:///./src/js/soccer_pitch.js","webpack:///./src/js/common/game/region.js","webpack:///./src/js/common/2d/vector2d.js","webpack:///./src/js/goal.js","webpack:///./src/js/common/2d/geometry.js","webpack:///./src/js/common/2d/transformations.js","webpack:///./src/js/common/2d/c2dmatrix.js","webpack:///./src/js/params.js","webpack:///./src/js/soccer_ball.js","webpack:///./src/js/common/game/moving_entity.js","webpack:///./src/js/common/game/base_game_entity.js","webpack:///./src/js/common/game/entity_type.js","webpack:///./src/js/common/misc/utils.js","webpack:///./src/js/soccer_team.js","webpack:///./src/js/common/fsm/state_machine.js","webpack:///./src/js/team_state.js","webpack:///./src/js/support_spot_calculator.js","webpack:///./src/js/common/time/regulator.js","webpack:///./src/js/common/messaging/message_dispatcher.js","webpack:///./src/js/common/game/entity_manager.js","webpack:///./src/js/common/messaging/telegram.js","webpack:///./src/js/soccer_messages.js","webpack:///./src/js/player_base.js","webpack:///./src/js/steering_behavior.js","webpack:///./src/js/common/misc/autolist.js","webpack:///./src/js/goalkeeper_state.js","webpack:///./src/js/field_player_state.js","webpack:///./src/js/goal_keeper.js","webpack:///./src/js/entity_function_templates.js","webpack:///./src/js/field_player.js","webpack:///./src/js/common/2d/wall2d.js"],"names":["setCanvas","document","getElementById","g_SoccerPitch","lastTime","Date","getTime","render","currentTime","clear","update","requestAnimationFrame","GDI","RED","BLUE","GREEN","BLACK","PINK","GREY","YELLOW","ORANGE","PURPLE","BROWN","WHITE","DARK_GREEN","LIGHT_BLUE","LIGHT_GREY","LIGHT_PINK","TRANSPARENT","wrapper","width","height","canvas","createElement","ctx","getContext","appendChild","lineWidth","strokeStyle","normalPen","fillStyle","redPen","thickPen","color","x","y","text","fillText","pos","r","beginPath","arc","Math","PI","stroke","fill","startPos","endPos","moveTo","lineTo","posList","i","length","x1","y1","x2","y2","startX","min","startY","rect","abs","clearRect","gdi","WindowWidth","WindowHeight","TeamSize","NumRegionsHorizontal","NumRegionsVertical","SoccerPitch","cxClient","cyClient","m_vecWalls","m_pPlayingArea","m_Regions","m_bGoalKeeperHasBall","m_bGameOn","m_bPaused","m_cxClient","m_cyClient","createRegions","playingArea","m_pRedGoal","left","GoalWidth","m_pBlueGoal","right","topLeft","top","topRight","bottomRight","bottom","bottomLeft","push","rightPost","leftPost","m_pBall","BallSize","BallMass","m_pRedTeam","red","m_pBlueTeam","blue","setOpponents","idx","col","row","timeElapsed","tick","scored","placeAtPosition","getFSM","changeState","darkGreenPen","darkGreenBrush","ViewRegions","hollowBrush","bluePen","whitePen","circle","center","line","whiteBrush","w","textColor","textAtPos","numGoalsScored","b","Region","id","m_dTop","m_dLeft","m_dRight","m_dBottom","m_dWidth","m_dHeight","m_vCenter","m_iID","showID","greenPen","green","marginX","marginY","random","max","default","CLOCKWISE","ANTICLOCKWISE","Vector2D","sqrt","lengthSq","pow","vec","val","distanceSq","xDiff","yDiff","normalize","normVec","diff","getReverse","crossNum","dot","vec2dNormalize","wrapAround","maxX","maxY","vec2DDistanceSq","v1","v2","ySeparation","xSeparation","vec2DDistance","Goal","facing","m_vLeftPost","m_vRightPost","m_vFacing","add","m_iNumGoalsScored","ball","scoreInfo","oldPos","result","isEqual","a","distanceToRayPlaneIntersection","rayOrigin","rayHeading","planePoint","planeNormal","d","numer","denom","whereIsPoint","point","pointOnPlane","dir","getRayCircleIntersect","circleOrigin","radius","toCircle","v","doRayCircleIntersect","getTangentPoints","T1","T2","rSq","invLengthSq","Root","distToLineSegment","A","B","P","dotA","dotB","distToLineSegmentSq","lineIntersection2D","C","D","dist","ret","rTop","sTop","Bot","invBot","s","objectIntersection2D","obj1","obj2","t","segmentObjectIntersection2D","obj","twoCirclesOverlapped","r1","r2","distBetweenCenters","twoCirclesEnclosed","twoCirclesIntersectionPoints","p3","p4","p2x","p2y","h1","twoCirclesIntersectionArea","i1","i2","CBD","acos","CAD","areaB","sin","areaA","circleArea","pointInCircle","distSq","lineSegmentCircleIntersection","distToLineSq","getLineSegmentCircleClosestIntersectionPoint","interSectionPoint","toBNorm","localPos","perp","ipFound","tempPoint","ip","pointToWorldSpace","agentHeading","agentSide","agentPosition","transPoint","clone","matTrandform","rotate","translate","transformVector2D","vectorToWorldSpace","transVec","pointToLocalSpace","tx","ty","_11","_12","_21","_22","_31","_32","vec2dRotateAroundOrigin","ang","mat","worldTransform","points","forward","side","transVector2Ds","matTransform","transformVector2Ds","C2DMatrix","identity","_13","_23","_33","mIn","tempM","tempX","tempY","vecs","multiply","xScale","yScale","fwd","cos","BallWithinReceivingRange","KeeperInBallRange","PlayerInTargetRange","PlayerKickingDistance","PlayerComfortZone","GoalKeeperInterceptRange","WithinRangeOfSupportSpot","PRM","NumSupportSpotsX","NumSupportSpotsY","Spot_CanPassScore","Spot_CanScoreFromPositionScore","Spot_DistFromControllingPlayerScore","Spot_ClosenessToSupportingPlayerScore","Spot_AheadOfAttackerScore","SupportSpotUpdateFreq","ChancePlayerAttemptsPotShot","ChanceOfUsingArriveTypeReceiveBehavior","Friction","PlayerKickFrequency","PlayerMass","PlayerMaxForce","PlayerMaxSpeedWithBall","PlayerMaxSpeedWithoutBall","PlayerMaxTurnRate","PlayerScale","PlayerKickingAccuracy","NumAttemptsToFindValidStrike","MaxDribbleForce","MaxShootingForce","MaxPassingForce","WithinRangeOfHome","MinPassDistance","GoalkeeperMinPassDistance","GoalKeeperTendingDistance","ViewStates","ViewIDs","bSupportSpots","bShowControllingTeam","ViewTargets","HighlightIfThreatened","FrameRate","SeparationCoefficient","ViewDistance","bNonPenetrationConstraint","BallWithinReceivingRangeSq","KeeperInBallRangeSq","PlayerInTargetRangeSq","PlayerKickingDistanceSq","PlayerComfortZoneSq","GoalKeeperInterceptRangeSq","WithinRangeOfSupportSpotSq","addNoiseToKick","ballPos","ballTarget","displacement","toTarget","SoccerBall","ballSize","mass","pitchBoundary","m_vOldPos","m_PitchBoundary","walls","idxClosest","velNormal","m_vVelocity","intersectionPoint","collisionPoint","distToIntersection","thisCollisionPoint","normal","bRadius","distToWall","from","onLineSegment","intersectionInfo","to","reflect","m_vPos","testCollisionWithWalls","m_vHeading","blackBrush","m_dBoundingRadius","msg","direction","force","acceleration","m_dMass","speed","distanceToCover","term","time","ut","half_a_t_squared","scalarToVector","zero","newPos","m_vPosition","MovingEntity","velocity","maxSpeed","heading","scale","turnRate","maxForce","m_vSide","m_dMaxSpeed","m_dMaxForce","m_dMaxTurnRate","m_vScale","newVel","newSpeed","mf","speedSq","newHeading","target","angle","rotationMatrix","sign","isNaN","console","log","nextID","nextValidID","BaseGameEntity","entityType","forceID","m_ID","m_EntityType","m_bTag","telegram","newType","ENTITYTYPE","MaxFloat","clamp","arg","minVal","maxVal","randomClamped","timeGetTime","randFloat","randInRange","randInt","floor","TEAM_COLOR","SoccerTeam","homeGoal","opponentsGoal","pitch","m_Players","m_Color","m_pPitch","m_pOpponentsGoal","m_pHomeGoal","m_pOpponents","m_pControllingPlayer","m_pSupportingPlayer","m_pReceivingPlayer","m_pPlayerClosestToBall","m_dDistSqToBallOfClosestPlayer","m_pStateMachine","setCurrentState","setPreviousState","setGlobalState","createPlayers","it","steering","separationOn","m_pSupportSpotCalc","teamColor","attacker","defender","registerEntity","closestSoFar","setDistSqToBall","inControl","calculateClosestPlayerToBall","role","goalKeeper","dispatchMessage","Msg_GoHome","power","shotTarget","numAttempts","minYVal","maxYVal","timeToCoverDistance","isPassSafeFromAllOpponents","passer","minPassingDistance","receiver","bestReceiverPoint","distPasserToGoalNormalize","members","curPlayer","passInfo","getBestPassToReceiver","passTarget","targetSafePoint","getPosSafePoint","dist2Goal","curPoint","opponentMemberList","opponents","safePoint","interceptRange","ScalingFactor","ip1","ip2","NumPassesToTry","passes","bResult","pass","inside","opp","passingForce","toTargetNormalized","localPosOpp","timeForBall","reach","isPassSafeFromOpponent","rad","requester","controllingPlayer","Msg_PassToMe","bestPlayer","getBestSupportingSpot","opps","player","lostControl","region","setHomeRegion","determineBestSupportingPosition","isInstate","setTarget","homeRegion","inHomeRegion","StateMachine","owner","m_pOwner","m_pCurrentState","m_pPreviousState","m_pGlobalState","state","execute","exit","enter","onMessage","name","changePlayerHomeRegions","team","newRegions","setPlayerHomeRegion","Attacking","BlueRegions","RedRegions","updateTargetsOfWaitingPlayers","Defending","setSupportingPlayer","PrepareForKickOff","setControllingPlayer","setReceiver","setPlayerClosestToBall","returnAllFieldPlayersToHome","allPlayersAtHome","setGameOn","SupportSpot","value","m_dScore","SupportSpotCalculator","numX","numY","m_pTeam","m_Spots","m_pBestSupportingSpot","playingField","heightOfSSRegion","widthOfSSRegion","sliceX","sliceY","m_pRegulator","greyPen","spt","isReady","bestScoreSoFar","curSpot","canShoot","supportingPlayer","optimalDistance","temp","Regulator","numUpdatesPerSecondRqd","m_dwNextUpdateTime","m_dUpdatePeriod","updatePeriodVariator","sortPriorityQ","dispatchTime","MessageDispatcher","prioritQ","pReceiver","handleMessage","error","delay","senderID","receiverID","extraInfo","pSender","getEntityFromID","discharge","sort","shift","EntityManager","m_EntityMap","newEntity","pEntity","Telegram","MessageType","Msg_ReceiveBall","Msg_SupportAttacker","Msg_Wait","PLAYERROLE","sortByDistanceToOpponentsGoal","p1","p2","distToOppGoal","sortByReversedDistanceToOpponentsGoal","PlayerBase","homeTeam","maxTurnRate","getRegionFromIndex","addMember","m_dDistSqToBall","m_iHomeRegion","m_iDefaultRegion","m_playerRole","m_vecPlayerVB","m_vecPlayerVBTrans","NumPlayerVerts","vtx","m_pSteering","oppTeamMemberList","curOpp","positionInFrontOfPlayer","rotateHeadingToFacePosition","setHeading","bestSupportPly","determineBestSupportingAttacker","playerClosestToBall","position","toSubject","isClosestTeamMemberToBall","distSqToBall","closestDistToBallSq","closestOpp","distSqToOpp","newRegion","slow","fast","WanderRad","WanderDist","WanderJitterPerSec","WaypointSeekDist","BehaviorType","none","seek","arrive","separation","pursuit","interpose","SteeringBehavior","agent","world","m_pPlayer","m_iFlags","m_dMultSeparation","bTagged","m_dViewDistance","m_dInterposeDist","m_vSteeringForce","m_Antenna","m_vTarget","m_bTagged","bt","on","steeringForce","forceToAdd","returnForce","magnitudeSoFar","magnitudeRemaining","magnitudeToAdd","sumForces","truncate","accumulateForceInfo","accumulateForce","targetPos","desiredVelocity","deceleration","decelerationTweaker","toBall","lookAheadTime","futurePosition","allPlayers","getAllMembers","unTag","tag","findNeighbours","tagged","toAgent","distFromTarget","AutoList","m_Members","member","autoList","GlobalKeeperState","keeper","setDefaultHomeRegion","ReturnHome","InterceptBall","TendGoal","interposeOn","getRearInterposeTarget","ballWithinKeeperRange","trap","setGoalKeeperHasBall","PutBallBackInPlay","ballWithinRangeForIntercept","tooFarFromGoalMouth","interposeOff","pursuitOn","isClosestPlayerOnPitchToBall","pursuitOff","arriveOn","arriveOff","findPass","kick","setVelocity","GlobalPlayerState","ballWithinReceivingRange","isControllingPlayer","setMaxSpeed","ReceiveBall","SupportAttacker","getSupportSpot","Wait","ReturnToHomeRegion","ballWithinKickingRange","warn","findSupport","ChaseBall","seekOn","KickBall","seekOff","ChaseOpp","closestOpponentPlayer","closestOppToHomeGoal","distClosestOppToHomeGoal","isToFarFromHomeRegion","Dribble","kickingForce","gameOn","goalKeeperHasBall","atTarget","trackBall","isReadyFornextKick","kickDirection","shootInfo","isThreatened","passThreatRadius","inHotregion","isOpponentWithinRadius","pursuitIsOn","requestPass","GoalKeeper","startState","currentState","calculate","isZero","m_vLookAt","closedShape","brownBrush","transparentText","getNameOfCurrentState","xPosTarget","yPosTarget","maxDouble","overlapped","ob","conOb","minDistBetweenObstacles","tagNeighbors","entity","containerOfEntities","curEntity","range","enforceNonPenetrationConstraint","toEntity","distFromEachOther","amountOfOverLap","setPos","getEntityLineSegmentIntersections","entities","theOneToIgnore","hits","getClosestEntityLineSegmentIntersection","MaxDouble","closestEntity","closestDist","FieldPlayer","m_pKickLimiter","BrakingRate","turningForce","sideComponent","accel","forwardComponent","yellowBrush","redBrush","distToHomeRegionSq","maxDist","Wall2D","N","m_vA","m_vB","m_vN","calculateNormal","renderNormals","midX","midY","n"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4dbdd4555211b729b1a3","import gdi from './common/misc/cgdi';\nimport {\n\tWindowWidth,\n\tWindowHeight,\n\tTeamSize\n} from './constants';\nimport SoccerPitch from './soccer_pitch';\n\ngdi.setCanvas(document.getElementById('canvasWrapper'), WindowWidth, WindowHeight);\nlet g_SoccerPitch = new SoccerPitch(WindowWidth, WindowHeight);\n\nlet lastTime = (new Date()).getTime();\nfunction render(){\n\tlet currentTime = (new Date()).getTime();\n\tgdi.clear();\n\tg_SoccerPitch.update((currentTime - lastTime) / 500);\n\tg_SoccerPitch.render();\n\trequestAnimationFrame(render);\n\tlastTime = currentTime;\n}\nrender();\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","class GDI{\n\tconstructor() {\n\t\tthis.RED = 'rgb(255,0,0)';\n\t  this.BLUE = 'rgb(0,0,255)';\n\t  this.GREEN = 'rgb(0,255,0)';\n\t  this.BLACK = 'rgb(0,0,0)';\n\t  this.PINK = 'rgb(255,200,200)';\n\t  this.GREY = 'rgb(200,200,200)';\n\t  this.YELLOW = 'rgb(255,255,0)';\n\t  this.ORANGE = 'rgb(255,170,0)';\n\t  this.PURPLE = 'rgb(255,0,170)';\n\t  this.BROWN = 'rgb(133,90,0)';\n\t  this.WHITE = 'rgb(255,255,255)';\n\t  this.DARK_GREEN = 'rgb(0, 100, 0)';\n\t  this.LIGHT_BLUE = 'rgb(0, 255, 255)';\n\t  this.LIGHT_GREY = 'rgb(200, 200, 200)';\n\t  this.LIGHT_PINK = 'rgb(255, 230, 230)';\n\t  this.TRANSPARENT = 'rgba(0, 0, 0, 0)';\n\t}\n\tsetCanvas(wrapper, width, height){\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height= height;\n\t\tthis.ctx = this.canvas.getContext('2d');\n\t\twrapper.appendChild(this.canvas);\n\t}\n\ttransparentText(){}\n\t// pen\n\tnormalPen(){ this.ctx.lineWidth = 2; }\n\tthickPen(){ this.ctx.lineWidth = 1; }\n\tblackPen(){ this.ctx.strokeStyle = this.BLACK; this.normalPen(); }\n\twhitePen(){ this.ctx.strokeStyle = this.WHITE; this.normalPen(); }\n\tredPen(){ this.ctx.strokeStyle = this.RED; this.normalPen(); }\n\tgreenPen(){ this.ctx.strokeStyle = this.GREEN; this.normalPen(); }\n\tbluePen(){ this.ctx.strokeStyle = this.BLUE; this.normalPen(); }\n\tgreyPen(){ this.ctx.strokeStyle = this.GREY; this.normalPen(); }\n\tpinkPen(){ this.ctx.strokeStyle = this.PINK; this.normalPen(); }\n\tyellowPen(){ this.ctx.strokeStyle = this.YELLOW; this.normalPen(); }\n\torangePen(){ this.ctx.strokeStyle = this.ORANGE; this.normalPen(); }\n\tpurplePen(){ this.ctx.strokeStyle = this.PURPLE; this.normalPen(); }\n\tbrownPen(){ this.ctx.strokeStyle = this.BROWN; this.normalPen(); }\n\tdarkGreenPen(){ this.ctx.strokeStyle = this.DARK_GREEN; this.normalPen(); }\n\tlightBluePen(){ this.ctx.strokeStyle = this.LIGHT_BLUE; this.normalPen(); }\n\tlightGreyPen(){ this.ctx.strokeStyle = this.LIGHT_GREY; this.normalPen(); }\n\tlightPinkPen(){ this.ctx.strokeStyle = this.LIGHT_PINK; this.normalPen(); }\n\t// brush\n\tbrownBrush(){ this.ctx.fillStyle = this.BROWN; }\n\tdarkGreenBrush(){ this.ctx.fillStyle = this.DARK_GREEN; }\n\twhiteBrush(){ this.ctx.fillStyle = this.WHITE; }\n\tblackBrush(){ this.ctx.fillStyle = this.BLACK; }\n\thollowBrush(){ this.ctx.fillStyle = this.TRANSPARENT; }\n\tthickRedPen(){\n\t\tthis.redPen();\n\t\tthis.thickPen();\n\t}\n\ttextColor(color){\n\t\tthis.ctx.strokeStyle = color;\n\t\tthis.ctx.fillStyle = color;\n\t}\n\ttextAtPos(x, y, text){\n\t\tthis.ctx.fillText(text, x, y);\n\t}\n\tcircle(pos, r){\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(pos.x, pos.y, r, 0, 2 * Math.PI);\n\t\tthis.ctx.stroke();\n\t\tthis.ctx.fill();\n\t}\n\tline(startPos, endPos){\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(startPos.x, startPos.y);\n\t\tthis.ctx.lineTo(endPos.x, endPos.y);\n\t\tthis.ctx.stroke();\n\t}\n\tclosedShape(posList){\n\t\tthis.ctx.beginPath();\n\t\tfor(let i = 0; i < posList.length - 1; i++){\n\t\t\tthis.ctx.moveTo(posList[i].x, posList[i].y);\n\t\t\tthis.ctx.lineTo(posList[i + 1].x, posList[i + 1].y);\n\t\t}\n\t\tthis.ctx.moveTo(posList[posList.length - 1].x, posList[posList.length - 1].y);\n\t\tthis.ctx.lineTo(posList[0].x, posList[0].y);\n\t\tthis.ctx.stroke();\n\t\tthis.ctx.fill();\n\t}\n\trect(x1, y1, x2, y2){\n\t\tlet startX = Math.min(x1, x2);\n\t\tlet startY = Math.min(y1, y2);\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.rect(startX, startY, Math.abs(x1 - x2), Math.abs(y1 - y2));\n\t\tthis.ctx.stroke();\n\t\tthis.ctx.fill();\n\t}\n\tclear(){\n\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t}\n}\n\nconst gdi = new GDI();\n\nexport default gdi;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/cgdi.js","const WindowWidth = 700;\nconst WindowHeight = 400;\nconst TeamSize = 5;\n\nexport {\n\tWindowWidth,\n\tWindowHeight,\n\tTeamSize\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/constants.js","import Region from './common/game/region';\nimport Goal from './goal';\nimport Vector2D from './common/2d/vector2d';\nimport PRM from './params';\nimport SoccerBall from './soccer_ball';\nimport SoccerTeam, {\n\tTEAM_COLOR\n} from './soccer_team';\nimport Wall2D from './common/2d/wall2d';\nimport {\n\tAttacking,\n\tDefending,\n\tPrepareForKickOff\n} from './team_state';\nimport gdi from './common/misc/cgdi';\n\nconst NumRegionsHorizontal = 6;\nconst NumRegionsVertical = 3;\n\nclass SoccerPitch{\n\tconstructor(cxClient, cyClient) {\n\t\tthis.m_vecWalls = [];\n\t\tthis.m_pPlayingArea = new Region(20, 20, cxClient - 20, cyClient - 20);\n\t\tthis.m_Regions = [];\n\t\tthis.m_bGoalKeeperHasBall = false;\n\t\tthis.m_bGameOn = true;\n\t\tthis.m_bPaused = false;\n\t\tthis.m_cxClient = cxClient;\n\t\tthis.m_cyClient = cyClient;\n\t\tthis.createRegions(this.playingArea().width() / NumRegionsHorizontal, this.playingArea().height() / NumRegionsVertical);\n\t\tthis.m_pRedGoal = new Goal(new Vector2D(this.m_pPlayingArea.left(), (cyClient - PRM.GoalWidth) / 2), new Vector2D(this.m_pPlayingArea.left(), (cyClient + PRM.GoalWidth) / 2), new Vector2D(1, 0));\n\t\tthis.m_pBlueGoal = new Goal(new Vector2D(this.m_pPlayingArea.right(), (cyClient - PRM.GoalWidth) / 2), new Vector2D(this.m_pPlayingArea.right(), (cyClient + PRM.GoalWidth) / 2), new Vector2D(-1, 0));\n\t\tlet topLeft = new Vector2D(this.m_pPlayingArea.left(), this.m_pPlayingArea.top());\n\t\tlet topRight = new Vector2D(this.m_pPlayingArea.right(), this.m_pPlayingArea.top());\n\t\tlet bottomRight = new Vector2D(this.m_pPlayingArea.right(), this.m_pPlayingArea.bottom());\n\t\tlet bottomLeft = new Vector2D(this.m_pPlayingArea.left(), this.m_pPlayingArea.bottom());\n\t\tthis.m_vecWalls.push(new Wall2D(bottomLeft, this.m_pRedGoal.rightPost()));\n\t\tthis.m_vecWalls.push(new Wall2D(this.m_pRedGoal.leftPost(), topLeft));\n\t\tthis.m_vecWalls.push(new Wall2D(topLeft, topRight));\n\t\tthis.m_vecWalls.push(new Wall2D(topRight, this.m_pBlueGoal.leftPost()));\n\t\tthis.m_vecWalls.push(new Wall2D(this.m_pBlueGoal.rightPost(), bottomRight));\n\t\tthis.m_vecWalls.push(new Wall2D(bottomRight, bottomLeft));\n\t\tthis.m_pBall = new SoccerBall(new Vector2D(this.m_cxClient / 2, this.m_cyClient / 2), PRM.BallSize, PRM.BallMass, this.m_vecWalls);\n\t\tthis.m_pRedTeam = new SoccerTeam(this.m_pRedGoal, this.m_pBlueGoal, this, TEAM_COLOR.red);\n\t\tthis.m_pBlueTeam = new SoccerTeam(this.m_pBlueGoal, this.m_pRedGoal, this, TEAM_COLOR.blue);\n\t\tthis.m_pRedTeam.setOpponents(this.m_pBlueTeam);\n\t\tthis.m_pBlueTeam.setOpponents(this.m_pRedTeam);\n\t}\n\tcreateRegions(width, height){\n\t\tlet idx = NumRegionsHorizontal * NumRegionsVertical - 1;\n\t\tfor(let col = 0; col < NumRegionsHorizontal; col++){\n\t\t\tfor(let row = 0; row < NumRegionsVertical; row++){\n\t\t\t\tthis.m_Regions[idx--] = new Region(this.playingArea().left() + col * width,\n\t\t\t\t\tthis.playingArea().top() + row * height,\n\t\t\t\t\tthis.playingArea().left() + (col + 1) * width,\n\t\t\t\t\tthis.playingArea().top() + (row + 1) * height,\n\t\t\t\t\tidx\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\tupdate(timeElapsed){\n\t\tif(this.m_bPaused){\n\t\t\treturn;\n\t\t}\n\t\tlet tick = 0;\n\t\tthis.m_pBall.update(timeElapsed);\n\t\tthis.m_pRedTeam.update(timeElapsed);\n\t\tthis.m_pBlueTeam.update(timeElapsed);\n\t\tif(this.m_pBlueGoal.scored(this.m_pBall) || this.m_pRedGoal.scored(this.m_pBall)){\n\t\t\tthis.m_bGameOn = false;\n\t\t\tthis.m_pBall.placeAtPosition(new Vector2D(this.m_cxClient / 2, this.m_cyClient / 2));\n\t\t\tthis.m_pRedTeam.getFSM().changeState(PrepareForKickOff);\n\t\t\tthis.m_pBlueTeam.getFSM().changeState(PrepareForKickOff);\n\t\t}\n\t}\n\trender(){\n\t\tgdi.darkGreenPen();\n\t\tgdi.darkGreenBrush();\n\t\tgdi.rect(0, 0, this.m_cxClient, this.m_cyClient);\n\t\tif(PRM.ViewRegions){\n\t\t\tfor(let r = 0; r < this.m_Regions.length; r++){\n\t\t\t\tthis.m_Regions[r].render(true);\n\t\t\t}\n\t\t}\n\t\tgdi.hollowBrush();\n\t\t//red goal\n\t\tgdi.redPen();\n\t\tgdi.rect(this.m_pPlayingArea.left(), (this.m_cyClient - PRM.GoalWidth) / 2, this.m_pPlayingArea.left() + 40, this.m_cyClient - (this.m_cyClient - PRM.GoalWidth) / 2);\n\t\t// blue goal\n\t\tgdi.bluePen();\n\t\tgdi.rect(this.m_pPlayingArea.right(), (this.m_cyClient - PRM.GoalWidth) / 2, this.m_pPlayingArea.right() - 40, this.m_cyClient - (this.m_cyClient - PRM.GoalWidth) / 2);\n\t\t// pitch marking\n\t\tgdi.whitePen();\n\t\tgdi.circle(this.m_pPlayingArea.center(), this.m_pPlayingArea.width() * 0.125);\n\t\tgdi.line(new Vector2D(this.m_pPlayingArea.center().x, this.m_pPlayingArea.top()), new Vector2D(this.m_pPlayingArea.center().x, this.m_pPlayingArea.bottom()));\n\t\tgdi.circle(this.m_pPlayingArea.center(), 2);\n\t\t// ball\n\t\tgdi.whitePen();\n\t\tgdi.whiteBrush();\n\t\tthis.m_pBall.render();\n\t\t// team\n\t\tthis.m_pRedTeam.render();\n\t\tthis.m_pBlueTeam.render();\n\t\t// walls\n\t\tgdi.whitePen();\n\t\tfor(let w = 0; w < this.m_vecWalls.length; w++){\n\t\t\tthis.m_vecWalls[w].render();\n\t\t}\n\t\tgdi.textColor(gdi.RED);\n\t\tgdi.textAtPos((this.m_cxClient / 2) - 50, this.m_cyClient - 18, `Red: ${this.m_pBlueGoal.numGoalsScored()}`);\n\t\tgdi.textColor(gdi.BLUE);\n\t\tgdi.textAtPos((this.m_cxClient / 2) + 10, this.m_cyClient - 18, `Blue: ${this.m_pRedGoal.numGoalsScored()}`);\n\t\treturn true;\n\t}\n\ttogglePause(){\n\t\tthis.m_bPaused = !this.m_bPaused;\n\t}\n\tpaused(){\n\t\treturn this.m_bPaused;\n\t}\n\tcxClient(){\n\t\treturn this.m_cxClient;\n\t}\n\tcyClient(){\n\t\treturn this.m_cyClient;\n\t}\n\tgoalKeeperHasBall(){\n\t\treturn this.m_bGoalKeeperHasBall;\n\t}\n\tsetGoalKeeperHasBall(b){\n\t\tthis.m_bGoalKeeperHasBall = b;\n\t}\n\tplayingArea(){\n\t\treturn this.m_pPlayingArea;\n\t}\n\twalls(){\n\t\treturn this.m_vecWalls;\n\t}\n\tball(){\n\t\treturn this.m_pBall;\n\t}\n\tgetRegionFromIndex(idx){\n\t\tif(idx >= 0 && idx < this.m_Regions.length){\n\t\t\treturn this.m_Regions[idx];\n\t\t}\n\t}\n\tgameOn(){\n\t\treturn this.m_bGameOn;\n\t}\n\tsetGameOn(){\n\t\tthis.m_bGameOn = true;\n\t}\n\tsetGameOff(){\n\t\tthis.m_bGameOn = false;\n\t}\n}\n\nexport default SoccerPitch;\n\n\n// WEBPACK FOOTER //\n// ./src/js/soccer_pitch.js","import gdi from '../misc/cgdi';\nimport Vector2D from '../2d/vector2d';\n\nclass Region{\n\tconstructor(left, top, right, bottom, id = -1) {\n\t\tthis.m_dTop = top || 0;\n\t\tthis.m_dLeft = left || 0;\n\t\tthis.m_dRight = right || 0;\n\t\tthis.m_dBottom = bottom || 0;\n\t\tthis.m_dWidth = Math.abs(right - left);\n\t\tthis.m_dHeight = Math.abs(bottom - top);\n\t\tthis.m_vCenter = new Vector2D((left + right) / 2, (top + bottom) / 2);\n\t\tthis.m_iID = id;\n\t}\n\trender(showID = 0){\n\t\tgdi.hollowBrush();\n\t\tgdi.greenPen();\n\t\tgdi.rect(this.m_dLeft, this.m_dTop, this.m_dRight, this.m_dBottom);\n\t\tif(showID){\n\t\t\tgdi.textColor(gdi.green);\n\t\t\tgdi.textAtPos(this.center(), this.id());\n\t\t}\n\t}\n\tinside(pos, r = 'NORMAL'){\n\t\tif(r == 'NORMAL'){\n\t\t\treturn pos.x > this.m_dLeft && pos.x < this.m_dRight && pos.y > this.m_dTop && pos.y < this.m_dBottom;\n\t\t}else{\n\t\t\tlet marginX = this.width() * 0.25;\n\t\t\tlet marginY = this.height() * 0.25;\n\t\t\treturn pos.x > this.m_dLeft + marginX && pos.x < this.m_dRight - marginX && pos.y > this.m_dTop + marginY && pos.y < this.m_dBottom - marginY;\n\t\t}\n\t}\n\tgetRandomPosition(){\n\t\treturn new Vector2D(this.m_dLeft + Math.random() * (this.m_dRight - this.m_dLeft), this.m_dTop + Math.random() * (this.m_dBottom - this.m_dTop));\n\t}\n\ttop(){\n\t\treturn this.m_dTop;\n\t}\n\tbottom(){\n\t\treturn this.m_dBottom;\n\t}\n\tleft(){\n\t\treturn this.m_dLeft;\n\t}\n\tright(){\n\t\treturn this.m_dRight;\n\t}\n\twidth(){\n\t\treturn Math.abs(this.m_dRight - this.m_dLeft);\n\t}\n\theight(){\n\t\treturn Math.abs(this.m_dBottom - this.m_dTop);\n\t}\n\tlength(){\n\t\treturn Math.max(this.width(), this.height());\n\t}\n\tbreadth(){\n\t\treturn Math.min(this.width(), this.height());\n\t}\n\tcenter(){\n\t\treturn this.m_vCenter;\n\t}\n\tid(){\n\t\treturn this.m_iID;\n\t}\n}\n\nexport{\n\tRegion as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/region.js","const CLOCKWISE = 1;\nconst ANTICLOCKWISE = -1;\n\nclass Vector2D{\n\tconstructor(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t}\n\tzero(){\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\tisZero(){\n\t\treturn this.x * this.x + this.y * this.y <= 0;\n\t}\n\tlength(){\n\t\treturn Math.sqrt(this.lengthSq());\n\t}\n\tlengthSq(){\n\t\treturn Math.pow(this.x, 2) + Math.pow(this.y, 2);\n\t}\n\tnormalize(){\n\t\tlet length = this.length();\n\t\tthis.x /= length;\n\t\tthis.y /= length;\n\t\treturn this;\n\t}\n\tadd(vec){\n\t\treturn new Vector2D(this.x + vec.x, this.y + vec.y);\n\t}\n\tcrossNum(val){\n\t\treturn new Vector2D(this.x * val, this.y * val);\n\t}\n\tdot(vec){\n\t\treturn this.x * vec.x + this.y * vec.y;\n\t}\n\tsign(vec){\n\t\t// Y axis pointing down, x axis pointing right\n\t\tif(this.y * vec.x > this.x * vec.y){\n\t\t\treturn ANTICLOCKWISE;\n\t\t}else{\n\t\t\treturn CLOCKWISE;\n\t\t}\n\t}\n\tperp(){\n\t\treturn new Vector2D(-this.y, this.x);\n\t}\n\tdistance(vec){\n\t\treturn Math.sqrt(this.distanceSq(vec));\n\t}\n\tdistanceSq(vec){\n\t\tlet xDiff = vec.x - this.x;\n\t\tlet yDiff = vec.y - this.y;\n\t\treturn xDiff * xDiff + yDiff * yDiff;\n\t}\n\ttruncate(max){\n\t\tif(this.length() > max){\n\t\t\tthis.normalize();\n\t\t\tthis.x *= max;\n\t\t\tthis.y *= max;\n\t\t}\n\t}\n\tgetReverse(){\n\t\treturn new Vector2D(-this.x, -this.y);\n\t}\n\treflect(normVec){\n\t\tlet diff = normVec.getReverse().crossNum(2 * this.dot(normVec));\n\t\tthis.x += diff.x;\n\t\tthis.y += diff.y;\n\t}\n\tclone(){\n\t\treturn new Vector2D(this.x, this.y);\n\t}\n}\n\nfunction vec2dNormalize(vec){\n\tlet length = vec.length();\n\treturn new Vector2D(vec.x / length, vec.y / length);\n}\n\nfunction wrapAround(pos, maxX, maxY){\n\tif(pos.x > maxX){\n\t\tpos.x = 0;\n\t}\n\tif(pos.x < 0){\n\t\tpos.x = maxX;\n\t}\n\tif(pos.y > maxY){\n\t\tpos.y = 0;\n\t}\n\tif(pos.y < 0){\n\t\tpos.y = maxY;\n\t}\n}\n\nfunction vec2DDistanceSq(v1, v2){\n\tlet ySeparation = v2.y - v1.y;\n\tlet xSeparation = v2.x - v1.x;\n\treturn ySeparation * ySeparation + xSeparation * xSeparation;\n}\n\nfunction vec2DDistance(v1, v2){\n\treturn Math.sqrt(vec2DDistanceSq(v1, v2));\n}\n\nexport {\n\tVector2D as default,\n\tvec2dNormalize,\n\twrapAround,\n\tvec2DDistanceSq,\n\tvec2DDistance\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/vector2d.js","import {\n\tlineIntersection2D\n} from './common/2d/geometry';\n\nclass Goal{\n\tconstructor(left, right, facing) {\n\t\tthis.m_vLeftPost = left;\n\t\tthis.m_vRightPost = right;\n\t\tthis.m_vFacing = facing;\n\t\tthis.m_vCenter = left.add(right).crossNum(1 / 2);\n\t\tthis.m_iNumGoalsScored = 0;\n\t}\n\tscored(ball){\n\t\tlet scoreInfo = lineIntersection2D(ball.pos(), ball.oldPos(), this.m_vLeftPost, this.m_vRightPost);\n\t\tif(scoreInfo.result){\n\t\t\t++this.m_iNumGoalsScored;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tcenter(){\n\t\treturn this.m_vCenter;\n\t}\n\tfacing(){\n\t\treturn this.m_vFacing;\n\t}\n\tleftPost(){\n\t\treturn this.m_vLeftPost;\n\t}\n\trightPost(){\n\t\treturn this.m_vRightPost;\n\t}\n\tnumGoalsScored(){\n\t\treturn this.m_iNumGoalsScored;\n\t}\n\tresetGoalScored(){\n\t\tthis.m_iNumGoalsScored = 0;\n\t}\n}\n\nexport default Goal;\n\n\n// WEBPACK FOOTER //\n// ./src/js/goal.js","import Vector2D, {\n\tvec2DDistance,\n\tvec2DDistanceSq,\n\tvec2dNormalize\n} from './vector2d';\nimport {\n\tpointToLocalSpace\n} from './transformations';\n\nfunction isEqual(a, b){\n\treturn Math.abs(a - b) < 1e-12;\n}\n\nfunction distanceToRayPlaneIntersection(rayOrigin, rayHeading, planePoint, planeNormal){\n\tlet d = -planeNormal.dot(planePoint);\n\tlet numer = planeNormal.dot(rayOrigin) + d;\n\tlet denom = planeNormal.dot(rayHeading);\n\tif(denom < 0.000001 && denom > -0.000001){\n\t\treturn -1;\n\t}\n\treturn -(numer / denom);\n}\n\nfunction whereIsPoint(point, pointOnPlane, planeNormal){\n\tlet dir = pointOnPlane.add(point.getReverse());\n\tlet d = dir.dot(planeNormal);\n\tswitch(true){\n\t\tcase d < -0.000001:\n\t\t\treturn 'PLANE_FRONT';\n\t\tcase d > 0.000001:\n\t\t\treturn 'PLANE_BACKSIDE';\n\t\tdefault:\n\t\t\treturn 'ON_PLANE';\n\t}\n}\n\nfunction getRayCircleIntersect(rayOrigin, rayHeading, circleOrigin, radius){\n\tlet toCircle = circleOrigin.add(rayOrigin.getReverse());\n\tlet length = toCircle.length();\n\tlet v = toCircle.dot(rayHeading);\n\tlet d = radius * radius - (length * length - v * v);\n\tif(d < 0) return -1;\n\treturn v - Math.sqrt(d);\n}\n\nfunction doRayCircleIntersect(rayOrigin, rayHeading, circleOrigin, radius){\n\tlet toCircle = circleOrigin.add(rayOrigin.getReverse());\n\tlet length = toCircle.length();\n\tlet d = radius * radius - (length * length - v * v);\n\treturn d < 0;\n}\n\nfunction getTangentPoints(circleOrigin, radius, point, T1, T2){\n\tlet toCircle = circleOrigin.add(point.getReverse());\n\tlet lengthSq = toCircle.lengthSq();\n\tlet rSq = radius * radius;\n\tif(lengthSq <= rSq){\n\t\treturn false;\n\t}\n\tlet invLengthSq = 1 / lengthSq;\n\tlet Root = Math.sqrt(Math.abs(lengthSq - rSq));\n\tT1.x = circleOrigin.x + radius * (radius * toCircle.x - toCircle.y * Root) * invLengthSq;\n\tT1.y = circleOrigin.y + radius * (radius * toCircle.y + toCircle.x * Root) * invLengthSq;\n\tT2.x = circleOrigin.x + radius * (radius * toCircle.x + toCircle.y * Root) * invLengthSq;\n\tT2.y = circleOrigin.y + radius * (radius * toCircle.y - toCircle.x * Root) * invLengthSq;\n\treturn true;\n}\n\nfunction distToLineSegment(A, B, P){\n\tlet dotA = (P.x - A.x) * (B.x - A.x) + (P.y - A.y) * (B.y - A.y);\n\tif(dotA <= 0){\n\t\treturn vec2DDistance(A, P);\n\t}\n\tlet dotB = (P.x - B.x) * (A.x - B.x) + (P.y - B.y) * (A.y - B.y);\n\tif(dotB <= 0){\n\t\treturn vec2DDistance(B, P);\n\t}\n\tlet point = A.add(B.add(A.getReverse()).crossNum(dotA / (dotA + dotB)));\n\treturn vec2DDistance(P, point);\n}\n\nfunction distToLineSegmentSq(A, B, P){\n\tlet dotA = (P.x - A.x) * (B.x - A.x) + (P.y - A.y) * (B.y - A.y);\n\tif(dotA <= 0){\n\t\treturn vec2DDistanceSq(A, P);\n\t}\n\tlet dotB = (P.x - B.x) * (A.x - B.x) + (P.y - B.y) * (A.y - B.y);\n\tif(dotB <= 0){\n\t\treturn vec2DDistanceSq(B, P);\n\t}\n\tlet point = A.add(B.add(A.getReverse()).crossNum(dotA / (dotA + dotB)));\n\treturn vec2DDistanceSq(P, point);\n}\n\nfunction lineIntersection2D(A, B, C, D, dist, point){\n\tlet ret = {\n\t\tresult: false\n\t};\n\tif(typeof dist != 'undefined'){\n\t\tret.dist = dist;\n\t}\n\tif(typeof point != 'undefined'){\n\t\tret.point = point;\n\t}\n\tlet rTop = (A.y - C.y) * (D.x - C.x) - (A.x - C.x) * (D.y - C.y);\n\tlet sTop = (A.y - C.y) * (B.x - A.x) - (A.x - C.x) * (B.y - A.y);\n\tlet Bot = (B.x - A.x) * (D.y - C.y) - (B.y - A.y) * (D.x - C.x);\n\tif(Bot == 0){\n\t\tif(typeof dist != 'undefined' && typeof point == 'undefined'){\n\t\t\tif(isEqual(rTop, 0) && isEqual(sTop, 0)){\n\t\t\t\tret.result = true;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t\tret.result = false;\n\t\treturn ret;\n\t}\n\tlet invBot = 1 / Bot;\n\tlet r = rTop * invBot;\n\tlet s = sTop * invBot;\n\tif(r > 0 && r < 1 && s > 0 && s < 1){\n\t\tif(typeof ret.dist != 'undefined'){\n\t\t\tret.dist = vec2DDistance(A, B) * r;\n\t\t}\n\t\tif(typeof ret.point != 'undefined'){\n\t\t\tret.point = A.add(B.add(A.getReverse()).crossNum(r));\n\t\t}\n\t\tret.result = true;\n\t\treturn ret;\n\t}else{\n\t\tif(typeof ret.dist != 'undefined'){\n\t\t\tret.dist = 0;\n\t\t}\n\t\tret.result = false;\n\t\treturn ret;\n\t}\n}\n\nfunction objectIntersection2D(obj1, obj2){\n\tfor(let r = 0; r < obj1.length - 1; r++){\n\t\tfor(let t = 0; t < obj2.length - 1; t++){\n\t\t\tif(lineIntersection2D(obj2[t], obj2[t + 1], obj1[r], obj1[r + 1])){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction segmentObjectIntersection2D(A, B, obj){\n\tfor(let r = 0; r < obj.length - 1; r++){\n\t\tif(lineIntersection2D(A, B, obj[r], obj[r + 1])){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction twoCirclesOverlapped(x1, y1, r1, x2, y2, r2){\n\tlet distBetweenCenters = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\tif(distBetweenCenters < (r1 + r2) || distBetweenCenters < Math.abs(r1 - r2)){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction twoCirclesEnclosed(x1, y1, r1, x2, y2, r2){\n\tlet distBetweenCenters = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1- y2));\n\tif(distBetweenCenters < Math.abs(r1 - r2)){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction twoCirclesIntersectionPoints(x1, y1, r1, x2, y2, r2, p3, p4){\n\tif(!twoCirclesOverlapped(x1, y1, r1, x2, y2, r2)){\n\t\treturn false;\n\t}\n\tlet d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\tlet a = (r1 * r1 - r2 * r2 + d * d) / (2 * d);\n\tlet b = (r2 * r2 - r1 * r1 + d * d) / (2 * d);\n\n\tlet p2x, p2y;\n\tp2x = x1 + (x2 - x1) * a / d;\n\tp2y = y1 + (y2 - y1) * a / d;\n\tlet h1 = Math.sqrt(r1 * r1 - a * a);\n\tp3.x = p2x + (y2 - y1) * h1 / d;\n\tp3.y = p2y + (x2 - x1) * h1 / d;\n\tp4.x = p2x - (y2 - y1) * h1 / d;\n\tp4.y = p2y - (x2 - x1) * h1 / d;\n\treturn true;\n}\n\nfunction twoCirclesIntersectionArea(x1, y1, r1, x2, y2, r2){\n\tlet i1 = new Vector2D();\n\tlet i2 = new Vector2D();\n\tif(!twoCirclesIntersectionPoints(x1, y1, r1, x2, y2, r2, i1, i2)){\n\t\treturn 0;\n\t}\n\tlet d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\tlet CBD = 2 * Math.acos((r2 * r2 + d * d - r1 * r1) / (2 * r2 * d));\n\tlet CAD = 2 * Math.acos((r1 * r1 + d * d - r2 * r2) / (2 * r1 * d));\n\tlet areaB = CBD * r2 * r2 / 2 + Math.sin(CBD) * r2 * r2 / 2;\n\tlet areaA = CAD * r1 * r1 / 2 + Math.sin(CAD) * r1 * r1 / 2;\n\treturn areaA + areaB;\n}\n\nfunction circleArea(radius){\n\treturn Math.PI * radius * radius;\n}\n\nfunction pointInCircle(circleOrigin, radius, point){\n\tlet distSq = circleOrigin.add(point.getReverse()).lengthSq();\n\tif(distSq < radius){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction lineSegmentCircleIntersection(A, B, P, radius){\n\tlet distToLineSq = distToLineSegmentSq(A, B, P);\n\tif(distToLineSq < radius * radius){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction getLineSegmentCircleClosestIntersectionPoint(A, B, pos, radius, interSectionPoint){\n\tlet toBNorm = vec2dNormalize(B.add(A.getReverse()));\n\tlet localPos = pointToLocalSpace(pos, toBNorm, toBNorm.perp(), A);\n\tlet ipFound = false;\n\tlet tempPoint = new Vector2D();\n\tif(localPos.x + radius >= 0 && (localPos.x - radius) * (localPos.x - radius) <= vec2DDistanceSq(B, A)){\n\t\tif(Math.abs(localPos.y) < radius){\n\t\t\tlet a = localPos.x;\n\t\t\tlet b = localPos.y;\n\t\t\tlet ip = a - Math.sqrt(radius * radius - b * b);\n\t\t\tif(ip <= 0){\n\t\t\t\tip = a + Math.sqrt(radius * radius - b * b);\n\t\t\t}\n\t\t\tipFound = true;\n\t\t\ttempPoint = A.add(toBNorm.crossNum(ip));\n\t\t\tinterSectionPoint.x = tempPoint.x;\n\t\t\tinterSectionPoint.y = tempPoint.y;\n\t\t}\n\t}\n\treturn ipFound;\n}\n\nexport {\n\tdistanceToRayPlaneIntersection,\n\twhereIsPoint,\n\tgetRayCircleIntersect,\n\tdoRayCircleIntersect,\n\tgetTangentPoints,\n\tdistToLineSegment,\n\tdistToLineSegmentSq,\n\tlineIntersection2D,\n\tobjectIntersection2D,\n\tsegmentObjectIntersection2D,\n\ttwoCirclesOverlapped,\n\ttwoCirclesEnclosed,\n\ttwoCirclesIntersectionPoints,\n\ttwoCirclesIntersectionArea,\n\tcircleArea,\n\tpointInCircle,\n\tlineSegmentCircleIntersection,\n\tgetLineSegmentCircleClosestIntersectionPoint\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/geometry.js","import C2DMatrix from './c2dmatrix';\n\nfunction pointToWorldSpace(point, agentHeading, agentSide, agentPosition){\n\tlet transPoint = point.clone();\n\tlet matTrandform = new C2DMatrix();\n\tmatTrandform.rotate(agentHeading, agentSide);\n\tmatTrandform.translate(agentPosition.x, agentPosition.y);\n\tmatTrandform.transformVector2D(transPoint);\n\treturn transPoint;\n}\n\nfunction vectorToWorldSpace(vec, agentHeading, agentSide){\n\tlet transVec = vec.clone();\n\tlet matTrandform = new C2DMatrix();\n\tmatTrandform.rotate(agentHeading, agentSide);\n\tmatTrandform.transformVector2D(transVec);\n\treturn transVec;\n}\n\nfunction pointToLocalSpace(point, agentHeading, agentSide, agentPosition){\n\tlet transPoint = point.clone();\n\tlet matTrandform = new C2DMatrix();\n\tlet tx = agentPosition.getReverse().dot(agentHeading);\n\tlet ty = agentPosition.getReverse().dot(agentSide);\n\tmatTrandform._11 = agentHeading.x; matTrandform._12 = agentSide.x;\n\tmatTrandform._21 = agentHeading.y; matTrandform._22 = agentSide.y;\n\tmatTrandform._31 = tx; matTrandform._32 = ty;\n\tmatTrandform.transformVector2D(transPoint);\n\treturn transPoint;\n}\n\nfunction vec2dRotateAroundOrigin(v, ang){\n\tlet mat = new C2DMatrix();\n\tmat.rotate(ang);\n\tmat.transformVector2D(v);\n}\n\nfunction worldTransform(points, pos, forward, side){\n\tlet transVector2Ds = [];\n\tfor(let i = 0; i < points.length; i++){\n\t\ttransVector2Ds[i] = points[i].clone();\n\t}\n\tlet matTransform = new C2DMatrix();\n\tmatTransform.rotate(forward, side);\n\tmatTransform.translate(pos.x, pos.y);\n\tmatTransform.transformVector2Ds(transVector2Ds);\n\treturn transVector2Ds;\n}\n\nexport {\n\tpointToWorldSpace,\n\tvectorToWorldSpace,\n\tpointToLocalSpace,\n\tvec2dRotateAroundOrigin,\n\tworldTransform\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/transformations.js","class C2DMatrix{\n  constructor() {\n    this.identity();\n  }\n  identity(){\n    this._11 = 1; this._12 = 0; this._13 = 0;\n    this._21 = 0; this._22 = 1; this._23 = 0;\n    this._31 = 0; this._32 = 0; this._33 = 1;\n  }\n  multiply(mIn){\n    let tempM = new C2DMatrix();\n    //first row\n    tempM._11 = (this._11*mIn._11) + (this._12*mIn._21) + (this._13*mIn._31);\n    tempM._12 = (this._11*mIn._12) + (this._12*mIn._22) + (this._13*mIn._32);\n    tempM._13 = (this._11*mIn._13) + (this._12*mIn._23) + (this._13*mIn._33);\n\n    //second\n    tempM._21 = (this._21*mIn._11) + (this._22*mIn._21) + (this._23*mIn._31);\n    tempM._22 = (this._21*mIn._12) + (this._22*mIn._22) + (this._23*mIn._32);\n    tempM._23 = (this._21*mIn._13) + (this._22*mIn._23) + (this._23*mIn._33);\n\n    //third\n    tempM._31 = (this._31*mIn._11) + (this._32*mIn._21) + (this._33*mIn._31);\n    tempM._32 = (this._31*mIn._12) + (this._32*mIn._22) + (this._33*mIn._32);\n    tempM._33 = (this._31*mIn._13) + (this._32*mIn._23) + (this._33*mIn._33);\n\n    this._11 = tempM._11;\n    this._12 = tempM._12;\n    this._13 = tempM._13;\n\n    this._21 = tempM._21;\n    this._22 = tempM._22;\n    this._23 = tempM._23;\n\n    this._31 = tempM._31;\n    this._32 = tempM._32;\n    this._33 = tempM._33;\n  }\n  transformVector2D(vec){\n    let tempX = this._11 * vec.x + this._21 * vec.y + this._31;\n    let tempY = this._12 * vec.x + this._22 * vec.y + this._32;\n    vec.x = tempX;\n    vec.y = tempY;\n  }\n  transformVector2Ds(vecs){\n    for(let i = 0; i < vecs.length; i++){\n      this.transformVector2D(vecs[i]);\n    }\n  }\n  translate(x, y){\n    let mat = new C2DMatrix();\n    mat._11 = 1; mat._12 = 0; mat._13 = 0;\n    mat._21 = 0; mat._22 = 1; mat._23 = 0;\n    mat._31 = x; mat._32 = y; mat._33 = 1;\n    this.multiply(mat);\n  }\n  scale(xScale, yScale){\n    let mat = new C2DMatrix();\n    mat._11 = xScale || 1; mat._12 = 0; mat._13 = 0;\n    mat._21 = 0; mat._22 = yScale || 1; mat._23 = 0;\n    mat._31 = 0; mat._32 = 0; mat._33 = 1;\n    this.multiply(mat);\n  }\n  rotate(fwd, side){\n    let mat = new C2DMatrix();\n    if(typeof side == 'undefined'){\n      let sin = Math.sin(fwd);\n      let cos = Math.cos(fwd);\n      mat._11 = cos; mat._12 = sin; mat._13 = 0;\n      mat._21 = -sin; mat._22 = cos; mat._23 = 0;\n      mat._31 = 0; mat._32 = 0; mat._33 = 1;\n    }else{\n      mat._11 = fwd.x; mat._12 = fwd.y; mat._13 = 0;\n      mat._21 = side.x; mat._22 = side.y; mat._23 = 0;\n      mat._31 = 0; mat._32 = 0; mat._33 = 1;\n    }\n    this.multiply(mat);\n  }\n}\n\nexport default C2DMatrix;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/c2dmatrix.js","const BallWithinReceivingRange = 10;\nconst KeeperInBallRange = 10.0;\nconst PlayerInTargetRange = 10.0;\nconst PlayerKickingDistance = 6.0;\nconst BallSize = 5.0;\nconst PlayerComfortZone = 60.0;\nconst GoalKeeperInterceptRange = 100.0;\nconst WithinRangeOfSupportSpot = 15.0;\n\nconst PRM = {\n\tGoalWidth:                       100,\n\t//use to set up the sweet spot calculator,\n\tNumSupportSpotsX:                  13,\n\tNumSupportSpotsY:                  6,\n\t//these values tweak the various rules used to calculate the support spots,\n\tSpot_CanPassScore:                     2.0,\n\tSpot_CanScoreFromPositionScore:        1.0,\n\tSpot_DistFromControllingPlayerScore:    2.0,\n\tSpot_ClosenessToSupportingPlayerScore: 0.0,\n\tSpot_AheadOfAttackerScore:             0.0,\n\t//how many times per second the support spots will be calculated,\n\tSupportSpotUpdateFreq:           1,\n\t//the chance a player might take a random pot shot at the goal,\n\tChancePlayerAttemptsPotShot:     0.005,\n\t//this is the chance that a player will receive a pass using the arrive,\n\t//steering behavior, rather than Pursuit,\n\tChanceOfUsingArriveTypeReceiveBehavior:  0.5,\n\tBallSize,\n\tBallMass:                        1.0,\n\tFriction:                        -0.015,\n\t//the goalkeeper has to be this close to the ball to be able to interact with it,\n\tKeeperInBallRange,\n\tPlayerInTargetRange,\n\t//player has to be this close to the ball to be able to kick it. The higher,\n\t//the value this gets, the easier it gets to tackle. ,\n\t// PlayerKickingDistance:           6.0,\n\t//the number of times a player can kick the ball per second,\n\tPlayerKickFrequency:               8,\n\tPlayerMass:                      3.0,\n\tPlayerMaxForce:                  1.0,\n\tPlayerMaxSpeedWithBall:          1.2,\n\tPlayerMaxSpeedWithoutBall:       1.6,\n\tPlayerMaxTurnRate:               0.4,\n\tPlayerScale:                     1.0,\n\t//when an opponents comes within this range the player will attempt to pass,\n\t//the ball. Players tend to pass more often, the higher the value,\n\tPlayerComfortZone,\n\t//in the range zero to 1.0. adjusts the amount of noise added to a kick,,\n\t//the lower the value the worse the players get.,\n\tPlayerKickingAccuracy:           0.99,\n\t//the number of times the SoccerTeam::CanShoot method attempts to find,\n\t//a valid shot,\n\tNumAttemptsToFindValidStrike:    5,\n\tMaxDribbleForce:                 1.5,\n\tMaxShootingForce:                6.0,\n\tMaxPassingForce:                 3.0,\n\t//the distance away from the center of its home region a player,\n\t//must be to be considered at home,\n\tWithinRangeOfHome:               15.0,\n\t//how close a player must get to a sweet spot before he can change state,\n\tWithinRangeOfSupportSpot,\n\t//the minimum distance a receiving player must be from the passing player,\n\tMinPassDistance:                 120.0,\n\t//the minimum distance a player must be from the goalkeeper before it will,\n\t//pass the ball,\n\tGoalkeeperMinPassDistance:       50.0,\n\t//this is the distance the keeper puts between the back of the net ,\n\t//and the ball when using the interpose steering behavior,\n\tGoalKeeperTendingDistance:       20.0,\n\t//when the ball becomes within this distance of the goalkeeper he,\n\t//changes state to intercept the ball,\n\tGoalKeeperInterceptRange,\n\t//how close the ball must be to a receiver before he starts chasing it,\n\tBallWithinReceivingRange,\n\t//these (boolean) values control the amount of player and pitch info shown,\n\t//1=ON; 0=OFF,\n\tViewStates:                          1,\n\tViewIDs:                             1,\n\tbSupportSpots:                    0,\n\tViewRegions:                         0,\n\tbShowControllingTeam:                1,\n\tViewTargets:                         0,\n\tHighlightIfThreatened:               0,\n\t//simple soccer's physics are calculated using each tick as the unit of time,\n\t//so changing this will adjust the speed,\n\tFrameRate:                           60,\n\t//--------------------------------------------steering behavior stuff,\n\tSeparationCoefficient:                10.0,\n\t//how close a neighbour must be to be considered for separation,\n\tViewDistance:                        30.0,\n\t//1=ON; 0=OFF,\n\tbNonPenetrationConstraint:           0,\n\tBallWithinReceivingRangeSq: BallWithinReceivingRange * BallWithinReceivingRange,\n  KeeperInBallRangeSq: KeeperInBallRange * KeeperInBallRange,\n  PlayerInTargetRangeSq: PlayerInTargetRange * PlayerInTargetRange,\n  PlayerKickingDistance: PlayerKickingDistance + BallSize,\n  PlayerKickingDistanceSq: (PlayerKickingDistance + BallSize) * (PlayerKickingDistance + BallSize),\n  PlayerComfortZoneSq: PlayerComfortZone * PlayerComfortZone,\n  GoalKeeperInterceptRangeSq: GoalKeeperInterceptRange * GoalKeeperInterceptRange,\n  WithinRangeOfSupportSpotSq: WithinRangeOfSupportSpot * WithinRangeOfSupportSpot\n};\n\nexport default PRM;\n\n\n// WEBPACK FOOTER //\n// ./src/js/params.js","import MovingEntity from './common/game/moving_entity';\nimport Vector2D, {\n\tvec2dNormalize,\n\tvec2DDistance,\n\tvec2DDistanceSq\n} from './common/2d/vector2d';\nimport {\n\trandomClamped,\n\tMaxFloat\n} from './common/misc/utils';\nimport { vec2dRotateAroundOrigin } from './common/2d/transformations';\nimport {\n\twhereIsPoint,\n\tdistanceToRayPlaneIntersection,\n\tlineIntersection2D\n} from './common/2d/geometry';\nimport PRM from './params';\nimport gdi from './common/misc/cgdi';\n\nfunction addNoiseToKick(ballPos, ballTarget){\n\tlet displacement = Math.PI * (1 - PRM.PlayerKickingAccuracy) * randomClamped();\n\tlet toTarget = ballTarget.add(ballPos.getReverse());\n\tvec2dRotateAroundOrigin(toTarget, displacement);\n\treturn ballPos.add(toTarget);\n}\n\nclass SoccerBall extends MovingEntity{\n\tconstructor(pos, ballSize, mass, pitchBoundary) {\n\t\tsuper(pos, ballSize, new Vector2D(), -1, new Vector2D(0, 1), mass, new Vector2D(1, 1), 0, 0);\n\t\tthis.m_vOldPos = pos;\n\t\tthis.m_PitchBoundary = pitchBoundary;\n\t}\n\ttestCollisionWithWalls(walls){\n\t\tlet idxClosest = -1;\n\t\tlet velNormal = vec2dNormalize(this.m_vVelocity);\n\t\tlet intersectionPoint = new Vector2D();\n\t\tlet collisionPoint = new Vector2D();\n\t\tlet distToIntersection = MaxFloat;\n\t\tfor(let w = 0; w < walls.length; w++){\n\t\t\tlet thisCollisionPoint = this.pos().add(walls[w].normal().crossNum(this.bRadius()).getReverse());\n\t\t\tlet distToWall = 0;\n\t\t\tif(whereIsPoint(thisCollisionPoint, walls[w].from(), walls[w].normal()) == 'PLANE_BACKSIDE'){\n\t\t\t\tdistToWall = distanceToRayPlaneIntersection(thisCollisionPoint, walls[w].normal(), walls[w].from(), walls[w].normal());\n\t\t\t\tintersectionPoint = thisCollisionPoint.add(walls[w].normal().crossNum(distToWall));\n\t\t\t}else{\n\t\t\t\tdistToWall = distanceToRayPlaneIntersection(thisCollisionPoint, velNormal, walls[w].from(), walls[w].normal());\n\t\t\t\tintersectionPoint = thisCollisionPoint.add(velNormal.crossNum(distToWall));\n\t\t\t}\n\t\t\tlet onLineSegment = false;\n\t\t\tlet intersectionInfo = lineIntersection2D(\n\t\t\t\twalls[w].from(),\n\t\t\t\twalls[w].to(),\n\t\t\t\tthisCollisionPoint.add(walls[w].normal().crossNum(20).getReverse()),\n\t\t\t\tthisCollisionPoint.add(walls[w].normal().crossNum(20))\n\t\t\t);\n\t\t\tif(intersectionInfo.result){\n\t\t\t\tonLineSegment = true;\n\t\t\t}\n\t\t\tlet distSq = vec2DDistanceSq(thisCollisionPoint, intersectionPoint);\n\t\t\tif(distSq <= this.m_vVelocity.lengthSq() && distSq < distToIntersection && onLineSegment){\n\t\t\t\tdistToIntersection = distSq;\n\t\t\t\tidxClosest = w;\n\t\t\t\tcollisionPoint = intersectionPoint;\n\t\t\t}\n\t\t}\n\t\tif(idxClosest >= 0 && velNormal.dot(walls[idxClosest].normal()) < 0){\n\t\t\tthis.m_vVelocity.reflect(walls[idxClosest].normal());\n\t\t}\n\t}\n\tupdate(timeElapsed){\n\t\tthis.m_vOldPos = this.m_vPos;\n\t\tthis.testCollisionWithWalls(this.m_PitchBoundary);\n\t\tif(this.m_vVelocity.lengthSq() > PRM.Friction * PRM.Friction){\n\t\t\tthis.m_vVelocity = this.m_vVelocity.add(vec2dNormalize(this.m_vVelocity).crossNum(PRM.Friction));\n\t\t\tthis.m_vPos = this.m_vPos.add(this.m_vVelocity);\n\t\t\tthis.m_vHeading = vec2dNormalize(this.m_vVelocity);\n\t\t}\n\t}\n\trender(){\n\t\tgdi.blackBrush();\n\t\tgdi.circle(this.m_vPos, this.m_dBoundingRadius);\n\t}\n\thandleMessage(msg){\n\t\treturn false;\n\t}\n\tkick(direction, force){\n\t\tdirection.normalize();\n\t\tlet acceleration = direction.crossNum(force / this.m_dMass);\n\t\tthis.m_vVelocity = acceleration;\n\t}\n\ttimeToCoverDistance(A, B, force){\n\t\tlet speed = force / this.m_dMass;\n\t\tlet distanceToCover = vec2DDistance(A, B);\n\t\tlet term = speed * speed + 2 * distanceToCover * PRM.Friction;\n\t\tif(term <= 0){\n\t\t\treturn -1;\n\t\t}\n\t\tlet v = Math.sqrt(term);\n\t\treturn (v - speed) / PRM.Friction;\n\t}\n\tfuturePosition(time){\n\t\tlet ut = this.m_vVelocity.crossNum(time);\n\t\tlet half_a_t_squared = 0.5 * PRM.Friction * time * time;\n\t\tlet scalarToVector = vec2dNormalize(this.m_vVelocity).crossNum(half_a_t_squared);\n\t\treturn this.pos().add(ut).add(scalarToVector);\n\t}\n\ttrap(){\n\t\tthis.m_vVelocity.zero();\n\t}\n\toldPos(){\n\t\treturn this.m_vOldPos;\n\t}\n\tplaceAtPosition(newPos){\n\t\tthis.m_vPos = newPos;\n\t\tthis.m_vOldPos = this.m_vPosition;\n\t\tthis.m_vVelocity.zero();\n\t}\n}\n\nexport {\n\tSoccerBall as default,\n\taddNoiseToKick\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/soccer_ball.js","import BaseGameEntity from '../game/base_game_entity';\nimport C2DMatrix from '../2d/c2dmatrix';\nimport Vector2D from '../2d/vector2d';\nimport {\n  clamp\n} from '../misc/utils';\n\nclass MovingEntity extends BaseGameEntity {\n  constructor(\n    pos,\n    r,\n    velocity,\n    maxSpeed,\n    heading,\n    mass,\n    scale,\n    turnRate,\n    maxForce\n  ) {\n    super(0, pos, r);\n    this.m_vVelocity = velocity;\n    this.m_vHeading = heading;\n    this.m_vSide = heading.perp();\n    this.m_dMass = mass;\n    this.m_dMaxSpeed = maxSpeed;\n    this.m_dMaxForce = maxForce;\n    this.m_dMaxTurnRate = turnRate;\n    this.m_vScale = scale;\n  }\n  velocity(){\n    return this.m_vVelocity;\n  }\n  setVelocity(newVel){\n    this.m_vVelocity = newVel;\n  }\n  mass(){\n    return this.m_dMass;\n  }\n  side(){\n    return this.m_vSide;\n  }\n  maxSpeed(){\n    return this.m_dMaxSpeed;\n  }\n  setMaxSpeed(newSpeed){\n    this.m_dMaxSpeed = newSpeed;\n  }\n  maxForce(){\n    return this.m_dMaxForce;\n  }\n  setMaxForce(mf){\n    this.m_dMaxForce = mf;\n  }\n  speedSq(){\n    return this.m_vVelocity.lengthSq();\n  }\n  speed(){\n    return this.m_vVelocity.length();\n  }\n  isSpeedMaxOut(){\n    return this.m_dMaxSpeed * this.m_dMaxSpeed >= this.speedSq();\n  }\n  heading(){\n    return this.m_vHeading;\n  }\n  setHeading(newHeading){\n    this.m_vHeading = newHeading;\n    this.m_vSide = this.m_vHeading.perp();\n  }\n  rotateHeadingToFacePosition(target){\n    let heading = this.m_vHeading.clone();\n    let toTarget = (new Vector2D(target.x - this.m_vPos.x, target.y - this.m_vPos.y)).normalize();\n    let angle = Math.acos(clamp(this.m_vHeading.dot(toTarget), -1, 1));\n    let rotationMatrix = new C2DMatrix();\n    if(angle < 0.00001){\n      return true;\n    }\n    if(angle > this.m_dMaxTurnRate){\n      angle = this.m_dMaxTurnRate;\n    }\n    rotationMatrix.rotate(angle * this.m_vHeading.sign(toTarget));\n    rotationMatrix.transformVector2D(this.m_vHeading);\n    rotationMatrix.transformVector2D(this.m_vVelocity);\n    this.m_vSide = this.m_vHeading.perp();\n    if((this.m_vHeading.x == 0 && this.m_vHeading.y == 0) || isNaN(this.m_vHeading.x)){\n      console.log(toTarget, heading, angle);\n    }\n    return false;\n  }\n  maxTurnRate(){\n    return this.m_dMaxTurnRate;\n  }\n  setMaxTurnRate(val){\n    this.m_dMaxTurnRate = val;\n  }\n}\n\nexport default MovingEntity;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/moving_entity.js","import ENTITYTYPE from './entity_type';\nimport Vector2D from '../2d/vector2d';\n\nlet nextID = 0;\nfunction nextValidID(){\n  return nextID++;\n}\n\nexport default class BaseGameEntity{\n  constructor(entityType, pos, r, forceID){\n    this.m_ID = forceID || nextValidID();\n    this.m_dBoundingRadius = r || 0.0;\n    this.m_vPos = pos || new Vector2D(0, 0);\n    this.m_vScale = new Vector2D(1.0, 1.0);\n    this.m_EntityType = entityType || ENTITYTYPE.default;\n    this.m_bTag = false;\n  }\n  update(){}\n  render(){}\n  handleMessage(telegram){\n    return false;\n  }\n  write(){}\n  read(){}\n  pos(){\n    return this.m_vPos;\n  }\n  setPos(newPos){\n    this.m_vPos = newPos;\n  }\n  bRadius(){\n    return this.m_dBoundingRadius;\n  }\n  setBRadius(r){\n    this.m_dBoundingRadius = r;\n  }\n  id(){\n    return this.m_ID;\n  }\n  isTagged(){\n    return this.m_bTag;\n  }\n  tag(){\n    this.m_bTag = true;\n  }\n  unTag(){\n    this.m_bTag = false;\n  }\n  scale(){\n    return this.m_vScale;\n  }\n  setScale(vec){\n    if(typeof vec == 'number'){\n      this.m_dBoundingRadius *= vec / Math.max(this.m_vScale.x, this.m_vScale.y);\n      this.m_vScale = new Vector2D(vec, vec);\n    }else{\n      this.m_dBoundingRadius *= Math.max(vec.x, vec.y) / Math.max(this.m_vScale.x, this.m_vScale.y);\n      this.m_vScale = vec;\n    }\n  }\n  entityType(){\n    return this.m_EntityType;\n  }\n  setEntityType(newType){\n    this.m_EntityType = newType;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/base_game_entity.js","const ENTITYTYPE = {\n  default: -1\n};\n\nexport default ENTITYTYPE;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/entity_type.js","const MaxFloat = 999999;\n\nfunction clamp(arg, minVal, maxVal){\n\tlet ret = arg;\n\tif(ret < minVal){\n\t\tret = minVal;\n\t}\n\tif(ret > maxVal){\n\t\tret = maxVal;\n\t}\n\treturn ret;\n}\n\nfunction randomClamped(){\n\treturn Math.random() - Math.random();\n}\n\nfunction timeGetTime(){\n\treturn (new Date()).getTime();\n}\n\nfunction randFloat(){\n\treturn Math.random();\n}\n\nfunction isEqual(a, b){\n\tif(Math.abs(a - b) < 1e-12){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction randInRange(x, y){\n\treturn x + randFloat() * (y - x);\n}\n\nfunction randInt(x, y){\n\tif(y >= x){\n\t\treturn Math.floor(Math.random() * (y - x + 1) + x);\n\t}\n}\n\nexport {\n\tclamp,\n\trandomClamped,\n\tMaxFloat,\n\ttimeGetTime,\n\trandFloat,\n\tisEqual,\n\trandInRange,\n\trandInt\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/utils.js","import Vector2D, {\n\tvec2DDistanceSq,\n\tvec2DDistance,\n\tvec2dNormalize\n} from './common/2d/vector2d';\nimport StateMachine from './common/fsm/state_machine';\nimport {\n\tAttacking,\n\tDefending,\n\tPrepareForKickOff\n} from './team_state';\nimport {\n\tMaxFloat,\n\trandInRange,\n\trandInt,\n\trandFloat\n} from './common/misc/utils';\nimport SupportSpotCalculator from './support_spot_calculator';\nimport PRM from './params';\nimport {\n\tgetTangentPoints\n} from './common/2d/geometry';\nimport {\n\tpointToLocalSpace\n} from './common/2d/transformations';\nimport dispatcher from './common/messaging/message_dispatcher';\nimport MessageType from './soccer_messages';\nimport {\n\tPLAYERROLE\n} from './player_base';\nimport {\n\tGlobalKeeperState,\n\tTendGoal,\n\tInterceptBall,\n\tReturnHome,\n\tPutBallBackInPlay\n} from './goalkeeper_state';\nimport {\n\tGlobalPlayerState,\n\tChaseBall,\n\tDribble,\n\tReturnToHomeRegion,\n\tWait,\n\tKickBall,\n\tReceiveBall,\n\tSupportAttacker\n} from './field_player_state';\nimport GoalKeeper from './goal_keeper';\nimport FieldPlayer from './field_player';\nimport entityMgr from './common/game/entity_manager';\nimport gdi from './common/misc/cgdi';\n\nconst TEAM_COLOR = {\n\tblue: 'BLUE',\n\tred: 'RED'\n};\n\nclass SoccerTeam{\n\tconstructor(homeGoal, opponentsGoal, pitch, color) {\n\t\tthis.m_Players = [];\n\t\tthis.m_Color = color;\n\t\tthis.m_pPitch = pitch;\n\t\tthis.m_pOpponentsGoal = opponentsGoal;\n\t\tthis.m_pHomeGoal = homeGoal;\n\t\tthis.m_pOpponents = null;\n\t\tthis.m_pControllingPlayer = null;\n\t\tthis.m_pSupportingPlayer = null;\n\t\tthis.m_pReceivingPlayer = null;\n\t\tthis.m_pPlayerClosestToBall = null;\n\t\tthis.m_dDistSqToBallOfClosestPlayer = 0;\n\t\tthis.m_pStateMachine = new StateMachine(this);\n\t\tthis.m_pStateMachine.setCurrentState(Defending);\n\t\tthis.m_pStateMachine.setPreviousState(Defending);\n\t\tthis.m_pStateMachine.setGlobalState(null);\n\t\tthis.createPlayers();\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tit.steering().separationOn();\n\t\t}\n\t\tthis.m_pSupportSpotCalc = new SupportSpotCalculator(PRM.NumSupportSpotsX, PRM.NumSupportSpotsY, this);\n\t}\n\tcreatePlayers(){\n\t\tif(this.teamColor() == TEAM_COLOR.blue){\n\t\t\tthis.m_Players.push(new GoalKeeper(this,\n\t\t\t\t1,\n\t\t\t\tTendGoal,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t6,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.attacker\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t8,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.attacker\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t3,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.defender\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t5,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.defender\n\t\t\t));\n\t\t}else{\n\t\t\tthis.m_Players.push(new GoalKeeper(this,\n\t\t\t\t16,\n\t\t\t\tTendGoal,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t9,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.attacker\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t11,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.attacker\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t12,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.defender\n\t\t\t));\n\t\t\tthis.m_Players.push(new FieldPlayer(this,\n\t\t\t\t14,\n\t\t\t\tWait,\n\t\t\t\tnew Vector2D(0, 1),\n\t\t\t\tnew Vector2D(0, 0),\n\t\t\t\tPRM.PlayerMass,\n\t\t\t\tPRM.PlayerMaxForce,\n\t\t\t\tPRM.PlayerMaxSpeedWithoutBall,\n\t\t\t\tPRM.PlayerMaxTurnRate,\n\t\t\t\tPRM.PlayerScale,\n\t\t\t\tPLAYERROLE.defender\n\t\t\t));\n\t\t}\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tentityMgr.registerEntity(it);\n\t\t}\n\t}\n\tcalculateClosestPlayerToBall(){\n\t\tlet closestSoFar = MaxFloat;\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tlet dist = vec2DDistanceSq(it.pos(), this.pitch().ball().pos());\n\t\t\tit.setDistSqToBall(dist);\n\t\t\tif(dist < closestSoFar){\n\t\t\t\tclosestSoFar = dist;\n\t\t\t\tthis.m_pPlayerClosestToBall = it;\n\t\t\t}\n\t\t}\n\t\tthis.m_dDistSqToBallOfClosestPlayer = closestSoFar;\n\t}\n\trender(){\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tthis.m_Players[i].render();\n\t\t}\n\t\tif(PRM.bShowControllingTeam){\n\t\t\tgdi.textColor(gdi.WHITE);\n\t\t\tif(this.teamColor() == TEAM_COLOR.blue && this.inControl()){\n\t\t\t\tgdi.textAtPos(20, 3, 'Blue in Control');\n\t\t\t}else if(this.teamColor() == TEAM_COLOR.red && this.inControl()){\n\t\t\t\tgdi.textAtPos(20, 3, 'Red in Control');\n\t\t\t}\n\t\t\tif(this.m_pControllingPlayer != null){\n\t\t\t\tgdi.textAtPos(this.pitch().cxClient() - 150, 3, `Controlling Player: this.m_pControllingPlayer.id()`);\n\t\t\t}\n\t\t}\n\t\tif(PRM.bSupportSpots && this.inControl()){\n\t\t\tthis.m_pSupportSpotCalc.render();\n\t\t}\n\t}\n\tupdate(timeElapsed){\n\t\tthis.calculateClosestPlayerToBall();\n\t\tthis.m_pStateMachine.update();\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tthis.m_Players[i].update(timeElapsed);\n\t\t}\n\t}\n\treturnAllFieldPlayersToHome(){\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tif(it.role() != PLAYERROLE.goalKeeper){\n\t\t\t\tdispatcher.dispatchMessage(0, 1, it.id(), MessageType.Msg_GoHome, null);\n\t\t\t}\n\t\t}\n\t}\n\tcanShoot(ballPos, power){\n\t\tlet shotTarget = new Vector2D();\n\t\tlet numAttempts = PRM.NumAttemptsToFindValidStrike;\n\t\twhile(numAttempts--){\n\t\t\tshotTarget = this.opponentsGoal().center();\n\t\t\tlet minYVal = this.opponentsGoal().leftPost().y + this.pitch().ball().bRadius();\n\t\t\tlet maxYVal = this.opponentsGoal().rightPost().y - this.pitch().ball().bRadius();\n\t\t\tshotTarget.y = randInt(minYVal, maxYVal);\n\t\t\tlet time = this.pitch().ball().timeToCoverDistance(ballPos, shotTarget, power);\n\t\t\tif(time >= 0){\n\t\t\t\tif(this.isPassSafeFromAllOpponents(ballPos, shotTarget, null, power)){\n\t\t\t\t\treturn {\n\t\t\t\t\t\tresult: true,\n\t\t\t\t\t\ttarget: shotTarget\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tresult: false,\n\t\t\ttarget: shotTarget\n\t\t};\n\t}\n\tfindPass(passer, power, minPassingDistance){\n\t\tlet receiver = null;\n\t\tlet result = false;\n\t\tlet bestReceiverPoint = 0;\n\t\tlet distPasserToGoalNormalize = Math.abs(passer.pos().x - this.opponentsGoal().center().x) / this.pitch().playingArea().width();\n\t\tlet target = null;\n\t\tfor(let i = 0; i < this.members().length; i++){\n\t\t\tlet curPlayer = this.members()[i];\n\t\t\tif(curPlayer != passer && vec2DDistanceSq(passer.pos(), curPlayer.pos()) > minPassingDistance * minPassingDistance){\n\t\t\t\tlet passInfo = this.getBestPassToReceiver(passer, curPlayer, power);\n\t\t\t\tif(passInfo.result){\n\t\t\t\t\ttarget = passInfo.passTarget;\n\t\t\t\t\tlet targetSafePoint = this.getPosSafePoint(target);\n\t\t\t\t\tlet dist2Goal = Math.abs(target.x - this.opponentsGoal().center().x);\n\t\t\t\t\t// let curPoint = targetSafePoint * distPasserToGoalNormalize + dist2Goal * (1 - distPasserToGoalNormalize);\n\t\t\t\t\tlet curPoint = targetSafePoint;\n\t\t\t\t\tif(curPoint > bestReceiverPoint){\n\t\t\t\t\t\tbestReceiverPoint = curPoint;\n\t\t\t\t\t\treceiver = curPlayer;\n\t\t\t\t\t\ttarget = passInfo.passTarget;\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tresult,\n\t\t\ttarget,\n\t\t\treceiver\n\t\t};\n\t}\n\tgetPosSafePoint(pos){\n\t\tlet opponentMemberList = this.opponents().members();\n\t\tlet safePoint = 0;\n\t\tfor(let i = 0; i < opponentMemberList.length; i++){\n\t\t\tsafePoint += 1 / vec2DDistanceSq(pos, opponentMemberList[i].pos());\n\t\t}\n\t\treturn safePoint;\n\t}\n\tgetBestPassToReceiver(passer, receiver, power){\n\t\tlet time = this.pitch().ball().timeToCoverDistance(this.pitch().ball().pos(), receiver.pos(), power);\n\t\tif(time < 0){\n\t\t\treturn false;\n\t\t}\n\t\tlet interceptRange = time * receiver.maxSpeed();\n\t\tconst ScalingFactor = 0.3;\n\t\tinterceptRange *= ScalingFactor;\n\t\tlet ip1 = new Vector2D();\n\t\tlet ip2 = new Vector2D();\n\t\tgetTangentPoints(receiver.pos(), interceptRange, this.pitch().ball().pos(), ip1, ip2);\n\t\tconst NumPassesToTry = 3;\n\t\tlet passes = [ip1, receiver.pos(), ip2];\n\t\tlet closestSoFar = MaxFloat;\n\t\tlet bResult = false;\n\t\tlet passTarget = null;\n\t\tfor(let pass = 0; pass < NumPassesToTry; pass++){\n\t\t\tlet dist = Math.abs(passes[pass].x - this.opponentsGoal().center().x);\n\t\t\tif(dist < closestSoFar &&\n\t\t\t\tthis.pitch().playingArea().inside(passes[pass]) &&\n\t\t\t\tthis.isPassSafeFromAllOpponents(this.pitch().ball().pos(), passes[pass], receiver, power)\n\t\t\t){\n\t\t\t\tclosestSoFar = dist;\n\t\t\t\tpassTarget = passes[pass];\n\t\t\t\tbResult = true;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tpassTarget,\n\t\t\tresult: bResult\n\t\t};\n\t}\n\tisPassSafeFromOpponent(from, target, receiver, opp, passingForce){\n\t\tlet toTarget = target.add(from.getReverse());\n\t\tlet toTargetNormalized = vec2dNormalize(toTarget);\n\t\tlet localPosOpp = pointToLocalSpace(opp.pos(), toTargetNormalized, toTargetNormalized.perp(), from);\n\t\tif(localPosOpp.x < 0){\n\t\t\treturn true;\n\t\t}\n\t\tif(vec2DDistanceSq(from , target) < vec2DDistanceSq(opp.pos(), from)){\n\t\t\tif(receiver){\n\t\t\t\tif(vec2DDistanceSq(target, opp.pos()) > vec2DDistanceSq(target, receiver.pos())){\n\t\t\t\t\treturn true;\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tlet timeForBall = this.pitch().ball().timeToCoverDistance(new Vector2D(), new Vector2D(localPosOpp.x, 0), passingForce);\n\t\tlet reach = opp.maxSpeed() * timeForBall + this.pitch().ball().bRadius() + opp.bRadius();\n\t\tif(Math.abs(localPosOpp.y) < reach){\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\tisPassSafeFromAllOpponents(from, target, receiver, passingForce){\n\t\tfor(let i = 0; i < this.opponents().members().length; i++){\n\t\t\tif(!this.isPassSafeFromOpponent(from, target, receiver, this.opponents().members()[i], passingForce)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\tisOpponentWithinRadius(pos, rad){\n\t\tfor(let i = 0; i < this.members().length; i++){\n\t\t\tlet it = this.members()[i];\n\t\t\tif(vec2DDistanceSq(pos, it.pos()) < rad * rad){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\trequestPass(requester){\n\t\tif(randFloat() > 0.1){\n\t\t\treturn;\n\t\t}\n\t\tif(this.isPassSafeFromAllOpponents(this.controllingPlayer().pos(), requester.pos(), requester, PRM.MaxPassingForce)){\n\t\t\tdispatcher.dispatchMessage(0, requester.id(), this.controllingPlayer().id(), MessageType.Msg_PassToMe, requester);\n\t\t}\n\t}\n\tdetermineBestSupportingAttacker(){\n\t\tlet closestSoFar = MaxFloat;\n\t\tlet bestPlayer = null;\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tif(it.role() == PLAYERROLE.attacker && it != this.m_pControllingPlayer){\n\t\t\t\tlet dist = vec2DDistanceSq(it.pos(), this.m_pSupportSpotCalc.getBestSupportingSpot());\n\t\t\t\tif(dist < closestSoFar){\n\t\t\t\t\tclosestSoFar = dist;\n\t\t\t\t\tbestPlayer = it;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn bestPlayer;\n\t}\n\tmembers(){\n\t\treturn this.m_Players;\n\t}\n\tgetFSM(){\n\t\treturn this.m_pStateMachine;\n\t}\n\thomeGoal(){\n\t\treturn this.m_pHomeGoal;\n\t}\n\topponentsGoal(){\n\t\treturn this.m_pOpponentsGoal;\n\t}\n\tpitch(){\n\t\treturn this.m_pPitch;\n\t}\n\topponents(){\n\t\treturn this.m_pOpponents;\n\t}\n\tsetOpponents(opps){\n\t\tthis.m_pOpponents = opps;\n\t}\n\tteamColor(){\n\t\treturn this.m_Color;\n\t}\n\tsetPlayerClosestToBall(player){\n\t\tthis.m_pPlayerClosestToBall = player;\n\t}\n\tplayerClosestToBall(){\n\t\treturn this.m_pPlayerClosestToBall;\n\t}\n\tclosestDistToBallSq(){\n\t\treturn this.m_dDistSqToBallOfClosestPlayer;\n\t}\n\tgetSupportSpot(){\n\t\treturn this.m_pSupportSpotCalc.getBestSupportingSpot();\n\t}\n\tsupportingPlayer(){\n\t\treturn this.m_pSupportingPlayer;\n\t}\n\tsetSupportingPlayer(player){\n\t\tthis.m_pSupportingPlayer = player;\n\t}\n\treceiver(){\n\t\treturn this.m_pReceivingPlayer;\n\t}\n\tsetReceiver(player){\n\t\tthis.m_pReceivingPlayer = player;\n\t}\n\tcontrollingPlayer(){\n\t\treturn this.m_pControllingPlayer;\n\t}\n\tsetControllingPlayer(player){\n\t\tthis.m_pControllingPlayer = player;\n\t\tthis.opponents().lostControl();\n\t}\n\tinControl(){\n\t\tif(this.m_pControllingPlayer){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\tlostControl(){\n\t\tthis.m_pControllingPlayer = null;\n\t}\n\tgetPlayerFromID(id){\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tif(it.id() == id){\n\t\t\t\treturn it;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tsetPlayerHomeRegion(player, region){\n\t\tif(player >= 0 && player < this.m_Players.length){\n\t\t\tthis.m_Players[player].setHomeRegion(region);\n\t\t}\n\t}\n\tdetermineBestSupportingPosition(){\n\t\tthis.m_pSupportSpotCalc.determineBestSupportingPosition();\n\t}\n\tupdateTargetsOfWaitingPlayers(){\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tif(it.role() != PLAYERROLE.goalKeeper){\n\t\t\t\tif(it.getFSM().isInstate(Wait) || it.getFSM().isInstate(ReturnToHomeRegion)){\n\t\t\t\t\tit.steering().setTarget(it.homeRegion().center());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tallPlayersAtHome(){\n\t\tfor(let i = 0; i < this.m_Players.length; i++){\n\t\t\tlet it = this.m_Players[i];\n\t\t\tif(!it.inHomeRegion()){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\tname(){\n\t\tif(this.m_Color == TEAM_COLOR.blue){\n\t\t\treturn 'Blue';\n\t\t}else{\n\t\t\treturn 'Red';\n\t\t}\n\t}\n}\n\nexport {\n\tSoccerTeam as default,\n\tTEAM_COLOR\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/soccer_team.js","class StateMachine{\n  constructor(owner){\n    this.m_pOwner = owner;\n    this.m_pCurrentState = null;\n    this.m_pPreviousState = null;\n    this.m_pGlobalState = null;\n  }\n  setCurrentState(state){\n    this.m_pCurrentState = state;\n  }\n  setGlobalState(state){\n    this.m_pGlobalState = state;\n  }\n  setPreviousState(state){\n    this.m_pPreviousState = state;\n  }\n  currentState(){\n    return this.m_pCurrentState;\n  }\n  update(){\n    if(this.m_pGlobalState){\n      this.m_pGlobalState.execute(this.m_pOwner);\n    }\n    if(this.m_pCurrentState){\n      this.m_pCurrentState.execute(this.m_pOwner);\n    }\n  }\n  changeState(state){\n    this.m_pPreviousState = this.m_pCurrentState;\n    this.m_pCurrentState.exit(this.m_pOwner);\n    this.m_pCurrentState = state;\n    this.m_pCurrentState.enter(this.m_pOwner);\n  }\n  revertToPreviousState(){\n    this.changeState(this.m_pPreviousState);\n  }\n  handleMessage(telegram){\n    if(this.m_pCurrentState && this.m_pCurrentState.onMessage(this.m_pOwner, telegram)){\n      return true;\n    }\n    if (this.m_pGlobalState && this.m_pGlobalState.onMessage(this.m_pOwner, telegram)) {\n      return true;\n    }\n    return false;\n  }\n  isInstate(state){\n    if(this.m_pCurrentState == state){\n      return true;\n    }\n    return false;\n  }\n  getNameOfCurrentState(){\n    return this.m_pCurrentState.name;\n  }\n}\n\nexport default StateMachine;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/fsm/state_machine.js","import { TEAM_COLOR } from './soccer_team';\n\nfunction changePlayerHomeRegions(team, newRegions){\n\tfor(let player = 0; player < newRegions.length; player++){\n\t\tteam.setPlayerHomeRegion(player, newRegions[player]);\n\t}\n}\n\nconst Attacking = {\n\tenter: function(team){\n\t\tconst BlueRegions = [1, 12, 14, 6, 4];\n\t\tconst RedRegions = [16, 3, 5, 9, 13];\n\t\tif(team.teamColor() == TEAM_COLOR.blue){\n\t\t\tchangePlayerHomeRegions(team, BlueRegions);\n\t\t}else{\n\t\t\tchangePlayerHomeRegions(team, RedRegions);\n\t\t}\n\t\tteam.updateTargetsOfWaitingPlayers();\n\t},\n\texecute: function(team){\n\t\tif(!team.inControl()){\n\t\t\tteam.getFSM().changeState(Defending);\n\t\t\treturn;\n\t\t}\n\t\tteam.determineBestSupportingPosition();\n\t},\n\texit: function(team){\n\t\tteam.setSupportingPlayer(null);\n\t},\n\tonMessage: function(team, telegram){\n\t\treturn false;\n\t}\n};\n\nconst Defending = {\n\tenter: function(team){\n\t\tconst BlueRegions = [1, 6, 8, 3, 5];\n\t\tconst RedRegions = [16, 9, 11, 12, 14];\n\t\tif(team.teamColor() == TEAM_COLOR.blue){\n\t\t\tchangePlayerHomeRegions(team, BlueRegions);\n\t\t}else{\n\t\t\tchangePlayerHomeRegions(team, RedRegions);\n\t\t}\n\t\tteam.updateTargetsOfWaitingPlayers();\n\t},\n\texecute: function(team){\n\t\tif(team.inControl()){\n\t\t\tteam.getFSM().changeState(Attacking);\n\t\t}\n\t},\n\texit: function(team){},\n\tonMessage: function(team, telegram){\n\t\treturn false;\n\t}\n};\n\nconst PrepareForKickOff = {\n\tenter: function(team){\n\t\tteam.setControllingPlayer(null);\n\t\tteam.setSupportingPlayer(null);\n\t\tteam.setReceiver(null);\n\t\tteam.setPlayerClosestToBall(null);\n\t\tteam.returnAllFieldPlayersToHome();\n\t},\n\texecute: function(team){\n\t\tif(team.allPlayersAtHome() && team.opponents().allPlayersAtHome()){\n\t\t\tteam.getFSM().changeState(Defending);\n\t\t}\n\t},\n\texit: function(team){\n\t\tteam.pitch().setGameOn();\n\t},\n\tonMessage: function(team, telegram){\n\t\treturn false;\n\t}\n};\n\nexport {\n\tAttacking,\n\tDefending,\n\tPrepareForKickOff\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/team_state.js","import { TEAM_COLOR } from './soccer_team';\nimport Vector2D, {\n\tvec2DDistance\n} from './common/2d/vector2d';\nimport gdi from './common/misc/cgdi';\nimport Regulator from './common/time/regulator';\nimport PRM from './params';\n\nclass SupportSpot{\n\tconstructor(pos, value) {\n\t\tthis.m_vPos = pos;\n\t\tthis.m_dScore = value;\n\t}\n}\n\nclass SupportSpotCalculator{\n\tconstructor(numX, numY, team) {\n\t\tthis.m_pTeam = team;\n\t\tthis.m_Spots = [];\n\t\tthis.m_pBestSupportingSpot = null;\n\t\tconst playingField = team.pitch().playingArea();\n\t\tlet heightOfSSRegion = playingField.height() * 0.8;\n\t\tlet widthOfSSRegion = playingField.width() * 0.9;\n\t\tlet sliceX = widthOfSSRegion / numX;\n\t\tlet sliceY = heightOfSSRegion / numY;\n\t\tlet left = playingField.left() + (playingField.width() - widthOfSSRegion) / 2 + sliceX / 2;\n\t\tlet right = playingField.right() - (playingField.width() - widthOfSSRegion) / 2 - sliceX / 2;\n\t\tlet top = playingField.top() + (playingField.height() - heightOfSSRegion) / 2 + sliceY / 2;\n\t\tfor(let x = 0; x < numX / 2 - 1; x++){\n\t\t\tfor(let y = 0; y < numY; y++){\n\t\t\t\tif(this.m_pTeam.teamColor == TEAM_COLOR.blue){\n\t\t\t\t\tthis.m_Spots.push(new SupportSpot(new Vector2D(left + x * sliceX, top + y * sliceY), 0));\n\t\t\t\t}else{\n\t\t\t\t\tthis.m_Spots.push(new SupportSpot(new Vector2D(right - x * sliceX, top + y * sliceY), 0));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.m_pRegulator = new Regulator(PRM.SupportSpotUpdateFreq);\n\t}\n\trender(){\n\t\tgdi.greyPen();\n\t\tfor(let spt = 0; spt < this.m_Spots.length; spt++){\n\t\t\tgdi.circle(this.m_Spots[spt].m_vPos, this.m_Spots[spt].m_dScore);\n\t\t}\n\t\tif(this.m_pBestSupportingSpot){\n\t\t\tgdi.greenPen();\n\t\t\tgdi.circle(this.m_pBestSupportingSpot.m_vPos, this.m_pBestSupportingSpot.m_dScore);\n\t\t}\n\t}\n\tdetermineBestSupportingPosition(){\n\t\tif(!this.m_pRegulator.isReady() && this.m_pBestSupportingSpot){\n\t\t\treturn this.m_pBestSupportingSpot.m_vPos;\n\t\t}\n\t\tthis.m_pBestSupportingSpot = null;\n\t\tlet bestScoreSoFar = 0;\n\t\tfor(let i = 0; i < this.m_Spots.length; i++){\n\t\t\tlet curSpot = this.m_Spots[i];\n\t\t\tcurSpot.m_dScore = 1;\n\t\t\tif(this.m_pTeam.isPassSafeFromAllOpponents(this.m_pTeam.controllingPlayer().pos(), curSpot.m_vPos, null, PRM.MaxPassingForce)){\n\t\t\t\tcurSpot.m_dScore += PRM.Spot_CanPassScore;\n\t\t\t}\n\t\t\tif(this.m_pTeam.canShoot(curSpot.m_vPos, PRM.MaxShootingForce)){\n\t\t\t\tcurSpot.m_dScore += PRM.Spot_CanScoreFromPositionScore;\n\t\t\t}\n\t\t\tif(this.m_pTeam.supportingPlayer()){\n\t\t\t\tconst optimalDistance = 200;\n\t\t\t\tlet dist = vec2DDistance(this.m_pTeam.controllingPlayer().pos(), curSpot.m_vPos);\n\t\t\t\tlet temp = Math.abs(optimalDistance - dist);\n\t\t\t\tif(temp < optimalDistance){\n\t\t\t\t\tcurSpot.m_dScore += PRM.Spot_DistFromControllingPlayerScore * (optimalDistance - temp) / optimalDistance;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(curSpot.m_dScore > bestScoreSoFar){\n\t\t\t\tbestScoreSoFar = curSpot.m_dScore;\n\t\t\t\tthis.m_pBestSupportingSpot = curSpot;\n\t\t\t}\n\t\t}\n\t\treturn this.m_pBestSupportingSpot.m_vPos;\n\t};\n\tgetBestSupportingSpot(){\n\t\tif(this.m_pBestSupportingSpot){\n\t\t\treturn this.m_pBestSupportingSpot.m_vPos;\n\t\t}else{\n\t\t\treturn this.determineBestSupportingPosition();\n\t\t}\n\t};\n}\n\nexport default SupportSpotCalculator;\n\n\n// WEBPACK FOOTER //\n// ./src/js/support_spot_calculator.js","import {\n\ttimeGetTime,\n\trandFloat,\n\tisEqual,\n\trandInRange\n} from '../misc/utils';\n\nclass Regulator{\n\tconstructor(numUpdatesPerSecondRqd) {\n\t\tthis.m_dwNextUpdateTime = timeGetTime() + randFloat() * 1000;\n\t\tif(numUpdatesPerSecondRqd > 0){\n\t\t\tthis.m_dUpdatePeriod = 1000 / numUpdatesPerSecondRqd;\n\t\t}else if(isEqual(0, numUpdatesPerSecondRqd)){\n\t\t\tthis.m_dUpdatePeriod = 0;\n\t\t}else if(numUpdatesPerSecondRqd < 0){\n\t\t\tthis.m_dUpdatePeriod = -1;\n\t\t}\n\t}\n\tisReady(){\n\t\tif(isEqual(0, this.m_dUpdatePeriod)){\n\t\t\treturn true;\n\t\t}\n\t\tif(this.m_dUpdatePeriod < 0){\n\t\t\treturn false;\n\t\t}\n\t\tlet currentTime = timeGetTime();\n\t\tconst updatePeriodVariator = 10;\n\t\tif(currentTime >= this.m_dwNextUpdateTime){\n\t\t\tthis.m_dwNextUpdateTime = currentTime + this.m_dUpdatePeriod + randInRange(-updatePeriodVariator, updatePeriodVariator);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport {\n\tRegulator as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/time/regulator.js","import EntityManager from '../game/entity_manager';\nimport Telegram from './telegram';\n\nfunction sortPriorityQ(r1, r2){\n  return r1.dispatchTime - r2.dispatchTime;\n}\n\nclass MessageDispatcher{\n  constructor(){\n    this.prioritQ = [];\n  }\n  discharge(pReceiver, telegram){\n    if(!pReceiver.handleMessage(telegram)){\n      console.error('Message not handled');\n    }\n  }\n  dispatchMessage(delay, senderID, receiverID, msg, extraInfo){\n    var pSender = EntityManager.getEntityFromID(senderID);\n    var pReceiver = EntityManager.getEntityFromID(receiverID);\n    if(!pReceiver){\n      console.error(`Warning! No Receiver with ID of ${receiverID} found`);\n      return;\n    }\n    var telegram = new Telegram(0, senderID, receiverID, msg, extraInfo);\n    if(delay <= 0){\n      // console.log(`即时telegram触发于: ${(new Date()).getTime()}, 由${getNameOfEntity(senderID)}发给${getNameOfEntity(receiverID)}, 信息为: ${msgToStr(msg)}`);\n      this.discharge(pReceiver, telegram);\n    }else{\n      var currentTime = new Date().getTime();\n      telegram.dispatchTime = currentTime + delay;\n      this.prioritQ.push(telegram);\n      this.prioritQ.sort(sortPriorityQ);\n      // console.log(`延时telegram记录于: ${new Date().getTime()}, 由${getNameOfEntity(senderID)}发给${getNameOfEntity(receiverID)}, 信息为: ${msgToStr(msg)}`);\n    }\n  }\n  dispatchDelayedMessages(){\n    var currentTime = new Date().getTime();\n    while(this.prioritQ.length && this.prioritQ[0].dispatchTime < currentTime && this.prioritQ[0].dispatchTime > 0){\n      var telegram = this.prioritQ[0];\n      var pReceiver = EntityManager.getEntityFromID(telegram.receiverID);\n      // console.log(`队列telegram准备触发: 发给${getNameOfEntity(pReceiver.id())}. 消息为: ${msgToStr(telegram.msg)}`);\n      this.discharge(pReceiver, telegram);\n      this.prioritQ.shift();\n    }\n  }\n}\n\nexport default new MessageDispatcher();\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/messaging/message_dispatcher.js","class EntityManager{\n  constructor(){\n    this.m_EntityMap = {};\n  }\n  registerEntity(newEntity){\n    this.m_EntityMap[newEntity.id()] = newEntity;\n  }\n  getEntityFromID(id){\n    return this.m_EntityMap[id];\n  }\n  removeEntity(pEntity){\n    this.m_EntityMap[pEntity.id()] = null;\n  }\n}\n\nexport default new EntityManager();\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/game/entity_manager.js","export default class Telegram {\n  constructor(dispatchTime, senderID, receiverID, msg, extraInfo) {\n    this.dispatchTime = dispatchTime;\n    this.senderID = senderID;\n    this.receiverID = receiverID;\n    this.msg = msg;\n    this.extraInfo = extraInfo;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/messaging/telegram.js","const MessageType = {\n\tMsg_ReceiveBall: 'Msg_ReceiveBall',\n  Msg_PassToMe: 'Msg_PassToMe',\n  Msg_SupportAttacker: 'Msg_SupportAttacker',\n  Msg_GoHome: 'Msg_GoHome',\n  Msg_Wait: 'Msg_Wait'\n};\n\nexport {\n\tMessageType as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/soccer_messages.js","import MovingEntity from './common/game/moving_entity';\nimport Vector2D, {\n  vec2dNormalize,\n  vec2DDistanceSq\n} from './common/2d/vector2d';\nimport {\n  MaxFloat\n} from './common/misc/utils';\nimport SteeringBehavior from './steering_behavior';\nimport dispatcher from './common/messaging/message_dispatcher';\nimport MessageType from './soccer_messages';\nimport AutoList from './common/misc/autolist';\nimport PRM from './params';\n\nconst PLAYERROLE = {\n  attacker: 'attacker',\n  defender: 'defender',\n  goalKeeper: 'goalKeeper'\n};\n\nfunction sortByDistanceToOpponentsGoal(p1, p2){\n  return p1.distToOppGoal() < p2.distToOppGoal();\n}\n\nfunction sortByReversedDistanceToOpponentsGoal(p1, p2){\n  return p1.distToOppGoal() > p2.distToOppGoal();\n}\n\nclass PlayerBase extends MovingEntity{\n  constructor(homeTeam, homeRegion, heading, velocity, mass, maxForce, maxSpeed, maxTurnRate, scale, role) {\n    super(homeTeam.pitch().getRegionFromIndex(homeRegion).center(),\n      scale * 10,\n      velocity,\n      maxSpeed,\n      heading,\n      mass,\n      new Vector2D(scale, scale),\n      maxTurnRate,\n      maxForce\n    );\n    AutoList.addMember(this);\n    this.m_pTeam = homeTeam;\n    this.m_dDistSqToBall = MaxFloat;\n    this.m_iHomeRegion = homeRegion;\n    this.m_iDefaultRegion = homeRegion;\n    this.m_playerRole = role;\n    this.m_vecPlayerVB = [];\n    this.m_vecPlayerVBTrans = [];\n    const NumPlayerVerts = 4;\n    let player = [new Vector2D(-3, 8), new Vector2D(3, 10), new Vector2D(3, -10), new Vector2D(-3, -8)];\n    for(let vtx = 0; vtx < NumPlayerVerts; vtx++){\n      this.m_vecPlayerVB.push(player[vtx]);\n      if(Math.abs(player[vtx].x) > this.m_dBoundingRadius){\n        this.m_dBoundingRadius = Math.abs(player[vtx].x);\n      }\n      if(Math.abs(player[vtx].y) > this.m_dBoundingRadius){\n        this.m_dBoundingRadius = Math.abs(player[vtx].y);\n      }\n    }\n    this.m_pSteering = new SteeringBehavior(this, this.m_pTeam.pitch(), this.ball());\n    this.m_pSteering.setTarget(homeTeam.pitch().getRegionFromIndex(homeRegion).center());\n  }\n  isThreatened(){\n    let oppTeamMemberList = this.team().opponents().members();\n    for(let i = 0; i < oppTeamMemberList.length; i++){\n      let curOpp = oppTeamMemberList[i];\n      if(this.positionInFrontOfPlayer(curOpp.pos()) && vec2DDistanceSq(this.pos(), curOpp.pos()) < PRM.PlayerComfortZoneSq){\n        return true;\n      }\n    }\n    return false;\n  }\n  trackBall(){\n    this.rotateHeadingToFacePosition(this.ball().pos());\n  }\n  trackTarget(){\n    this.setHeading(vec2dNormalize(this.steering().target().add(this.pos().getReverse())));\n  }\n  findSupport(){\n    let bestSupportPly;\n    if(this.team().supportingPlayer() == null){\n      bestSupportPly = this.team().determineBestSupportingAttacker();\n      this.team().setSupportingPlayer(bestSupportPly);\n      dispatcher.dispatchMessage(0, this.id(), this.team().supportingPlayer().id(), MessageType.Msg_SupportAttacker, null);\n    }\n    bestSupportPly = this.team().determineBestSupportingAttacker();\n    if(bestSupportPly && bestSupportPly != this.team().supportingPlayer()){\n      if(this.team().supportingPlayer()){\n        dispatcher.dispatchMessage(0, this.id(), this.team().supportingPlayer().id(), MessageType.Msg_GoHome, null);\n      }\n      this.team().setSupportingPlayer(bestSupportPly);\n      dispatcher.dispatchMessage(0, this.id(), this.team().supportingPlayer().id(), MessageType.Msg_SupportAttacker, null);\n    }\n  }\n  ballWithinKeeperRange(){\n    return vec2DDistanceSq(this.pos(), this.ball().pos()) < PRM.KeeperInBallRangeSq;\n  }\n  ballWithinKickingRange(){\n    return vec2DDistanceSq(this.pos(), this.ball().pos()) < PRM.PlayerKickingDistanceSq;\n  }\n  ballWithinReceivingRange(){\n    return vec2DDistanceSq(this.pos(), this.ball().pos()) < PRM.BallWithinReceivingRangeSq;\n  }\n  inHomeRegion(){\n    if(this.m_playerRole == PLAYERROLE.goalKeeper){\n      return this.pitch().getRegionFromIndex(this.m_iHomeRegion).inside(this.pos(), 'NORMAL');\n    }else{\n      return this.pitch().getRegionFromIndex(this.m_iHomeRegion).inside(this.pos(), 'HALF_SIZE');\n    }\n  }\n  isAheadOfAttacker(){\n    return Math.abs(this.pos().x - this.team().opponentsGoal().center().x) < Math.abs(this.team().controllingPlayer().pos().x - this.team().opponentsGoal().center().x);\n  }\n  atSupportSpot(){}\n  atTarget(){\n    return vec2DDistanceSq(this.pos(), this.steering().target()) < PRM.PlayerInTargetRangeSq;\n  }\n  isClosestTeamMemberToBall(){\n    return this.team().playerClosestToBall() == this;\n  }\n  positionInFrontOfPlayer(position){\n    let toSubject = position.add(this.pos().getReverse());\n    if(toSubject.dot(this.heading()) > 0){\n      return true;\n    }else{\n      return false;\n    }\n  }\n  isClosestPlayerOnPitchToBall(){\n    return this.isClosestTeamMemberToBall() && this.distSqToBall() < this.team().opponents().closestDistToBallSq();\n  }\n  closestOpponentPlayer(){\n    let oppTeamMemberList = this.team().opponents().members();\n    let closestSoFar = MaxFloat;\n    let closestOpp = null;\n    for(let i = 0; i < oppTeamMemberList.length; i++){\n      let it = oppTeamMemberList[i];\n      let distSqToOpp = vec2DDistanceSq(this.pos(), it.pos());\n      if(distSqToOpp < closestSoFar){\n        closestSoFar = distSqToOpp;\n        closestOpp = it;\n      }\n    }\n    return closestOpp;\n  }\n  isControllingPlayer(){\n    return this.team().controllingPlayer() == this;\n  }\n  inHotregion(){\n    return Math.abs(this.pos().y - this.team().opponentsGoal().center().y) < this.pitch().playingArea().length / 3;\n  }\n  role(){\n    return this.m_playerRole;\n  }\n  distSqToBall(){\n    return this.m_dDistSqToBall;\n  }\n  setDistSqToBall(val){\n    this.m_dDistSqToBall = val;\n  }\n  distToOppGoal(){\n    return Math.abs(this.pos().x - this.team().opponentsGoal().center().x);\n  }\n  distToHomeGoal(){\n    return Math.abs(this.pos().x - this.team().homeGoal().center().x);\n  }\n  setDefaultHomeRegion(){\n    this.m_iHomeRegion = this.m_iDefaultRegion;\n  }\n  ball(){\n    return this.team().pitch().ball();\n  }\n  pitch(){\n    return this.team().pitch();\n  }\n  steering(){\n    return this.m_pSteering;\n  }\n  homeRegion(){\n    return this.pitch().getRegionFromIndex(this.m_iHomeRegion);\n  }\n  setHomeRegion(newRegion){\n    this.m_iHomeRegion = newRegion;\n  }\n  team(){\n    return this.m_pTeam;\n  }\n}\n\nexport {\n  PlayerBase as default,\n  PLAYERROLE\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/player_base.js","import gdi from './common/misc/cgdi';\nimport PRM from './params';\nimport Vector2D, {\n\tvec2dNormalize,\n\tvec2DDistance,\n\tvec2DDistanceSq\n} from './common/2d/vector2d';\nimport {\n\tpointToWorldSpace,\n\tpointToLocalSpace,\n\tvec2dRotateAroundOrigin,\n\tworldTransform,\n\tvectorToWorldSpace\n} from './common/2d/transformations';\nimport { lineIntersection2D } from './common/2d/geometry';\nimport {\n\tclamp,\n\tMaxDouble,\n\trandomClamped\n} from './common/misc/utils';\nimport AutoList from './common/misc/autolist';\n\nconst slow = 3;\nconst normal = 2;\nconst fast = 1;\nconst WanderRad = 1.2;\nconst WanderDist = 2;\nconst WanderJitterPerSec = 80;\nconst WaypointSeekDist = 20;\nconst BehaviorType = {\n\tnone              : 0x0000,\n  seek              : 0x0001,\n  arrive            : 0x0002,\n  separation        : 0x0004,\n  pursuit           : 0x0008,\n  interpose         : 0x0010\n};\n\nclass SteeringBehavior{\n\tconstructor(agent, world, ball) {\n\t\tthis.m_pPlayer = agent;\n\t\tthis.m_iFlags = 0;\n\t\tthis.m_dMultSeparation = PRM.SeparationCoefficient;\n\t\tthis.bTagged = false;\n\t\tthis.m_dViewDistance = PRM.ViewDistance;\n\t\tthis.m_pBall = ball;\n\t\tthis.m_dInterposeDist = 0;\n\t\tthis.m_vSteeringForce = new Vector2D();\n\t\tthis.m_Antenna = [new Vector2D(), new Vector2D(), new Vector2D(), new Vector2D(), new Vector2D()];\n\t}\n\tforce(){\n\t\treturn this.m_vSteeringForce;\n\t}\n\ttarget(){\n\t\treturn this.m_vTarget;\n\t}\n\tsetTarget(t){\n\t\tthis.m_vTarget = t;\n\t}\n\tinterposeDistance(){\n\t\treturn this.m_dInterposeDist;\n\t}\n\tsetInterposeDistance(d){\n\t\tthis.m_dInterposeDist = d;\n\t}\n\ttagged(){\n\t\treturn this.m_bTagged;\n\t}\n\ttag(){\n\t\tthis.m_bTagged = true;\n\t}\n\tunTag(){\n\t\tthis.m_bTagged = false;\n\t}\n\ton(bt){\n\t\treturn (this.m_iFlags & bt) == bt;\n\t}\n\tseekOn(){\n\t\tthis.m_iFlags |= BehaviorType.seek;\n\t}\n\tseekOff(){\n\t\tif(this.on(BehaviorType.seek)){\n\t\t\tthis.m_iFlags ^= BehaviorType.seek;\n\t\t}\n\t}\n\tseekIsOn(){\n\t\treturn this.on(BehaviorType.seek);\n\t}\n\tarriveOn(){\n\t\tthis.m_iFlags |= BehaviorType.arrive;\n\t}\n\tarriveOff(){\n\t\tif(this.on(BehaviorType.arrive)){\n\t\t\tthis.m_iFlags ^= BehaviorType.arrive;\n\t\t}\n\t}\n\tarriveIsOn(){\n\t\treturn this.on(BehaviorType.arrive);\n\t}\n\tpursuitOn(){\n\t\tthis.m_iFlags |= BehaviorType.pursuit;\n\t}\n\tpursuitOff(){\n\t\tif(this.on(BehaviorType.pursuit)){\n\t\t\tthis.m_iFlags ^= BehaviorType.pursuit;\n\t\t}\n\t}\n\tpursuitIsOn(){\n\t\treturn this.on(BehaviorType.pursuit);\n\t}\n\tseparationOn(){\n\t\tthis.m_iFlags |= BehaviorType.separation;\n\t}\n\tseparationOff(){\n\t\tif(this.on(BehaviorType.separation)){\n\t\t\tthis.m_iFlags ^= BehaviorType.separation;\n\t\t}\n\t}\n\tseparationIsOn(){\n\t\treturn this.on(BehaviorType.separation);\n\t}\n\tinterposeOn(d){\n\t\tthis.m_iFlags |= BehaviorType.interpose;\n\t\tthis.m_dInterposeDist = d;\n\t}\n\tinterposeOff(){\n\t\tif(this.on(BehaviorType.interpose)){\n\t\t\tthis.m_iFlags ^= BehaviorType.interpose;\n\t\t}\n\t}\n\tinterposeIsOn(){\n\t\treturn this.on(BehaviorType.interpose);\n\t}\n\taccumulateForce(steeringForce, forceToAdd){\n\t\tlet returnForce = new Vector2D();\n\t\tlet result = false;\n\t\tlet magnitudeSoFar = steeringForce.length();\n\t\tlet magnitudeRemaining = this.m_pPlayer.maxForce() - magnitudeSoFar;\n\t\tif(magnitudeRemaining <= 0){\n\t\t\treturn {\n\t\t\t\tresult,\n\t\t\t\treturnForce\n\t\t\t};\n\t\t}\n\t\tlet magnitudeToAdd = forceToAdd.length();\n\t\tif(magnitudeToAdd > magnitudeRemaining){\n\t\t\tmagnitudeToAdd = magnitudeRemaining;\n\t\t}\n\t\treturnForce = steeringForce.add(vec2dNormalize(forceToAdd).crossNum(magnitudeToAdd));\n\t\tresult = true;\n\t\treturn {\n\t\t\tresult,\n\t\t\treturnForce\n\t\t};\n\t}\n\tcalculate(){\n\t\tthis.m_vSteeringForce.zero();\n\t\tthis.m_vSteeringForce = this.sumForces();\n\t\tthis.m_vSteeringForce.truncate(this.m_pPlayer.maxForce());\n\t\treturn this.m_vSteeringForce;\n\t}\n\tsumForces(){\n\t\tlet force = new Vector2D();\n\t\tlet accumulateForceInfo = null;\n\t\tif(this.on(BehaviorType.separation)){\n\t\t\tforce = force.add(this.separation().crossNum(this.m_dMultSeparation));\n\t\t\taccumulateForceInfo = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\tif(accumulateForceInfo.result){\n\t\t\t\tthis.m_vSteeringForce = accumulateForceInfo.returnForce;\n\t\t\t}else{\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.seek)){\n\t\t\tforce = force.add(this.seek(this.m_vTarget));\n\t\t\taccumulateForceInfo = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\tif(accumulateForceInfo.result){\n\t\t\t\tthis.m_vSteeringForce = accumulateForceInfo.returnForce;\n\t\t\t}else{\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.arrive)){\n\t\t\tforce = force.add(this.arrive(this.m_vTarget, fast));\n\t\t\taccumulateForceInfo = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\tif(accumulateForceInfo.result){\n\t\t\t\tthis.m_vSteeringForce = accumulateForceInfo.returnForce;\n\t\t\t}else{\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.pursuit)){\n\t\t\tforce = force.add(this.pursuit(this.m_pBall));\n\t\t\taccumulateForceInfo = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\tif(accumulateForceInfo.result){\n\t\t\t\tthis.m_vSteeringForce = accumulateForceInfo.returnForce;\n\t\t\t}else{\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\tif(this.on(BehaviorType.interpose)){\n\t\t\tforce = force.add(this.interpose(this.m_pBall, this.m_vTarget, this.m_dInterposeDist));\n\t\t\taccumulateForceInfo = this.accumulateForce(this.m_vSteeringForce, force);\n\t\t\tif(accumulateForceInfo.result){\n\t\t\t\tthis.m_vSteeringForce = accumulateForceInfo.returnForce;\n\t\t\t}else{\n\t\t\t\treturn this.m_vSteeringForce;\n\t\t\t}\n\t\t}\n\t\treturn this.m_vSteeringForce;\n\t}\n\tforwardComponent(){\n\t\treturn this.m_pPlayer.heading().dot(this.m_vSteeringForce);\n\t}\n\tsideComponent(){\n\t\treturn this.m_pPlayer.side().dot(this.m_vSteeringForce) * this.m_pPlayer.maxTurnRate();\n\t}\n\tseek(targetPos){\n\t\tlet desiredVelocity = vec2dNormalize(targetPos.add(this.m_pPlayer.pos().getReverse())).crossNum(this.m_pPlayer.maxSpeed());\n\t\treturn desiredVelocity.add(this.m_pPlayer.velocity().getReverse());\n\t}\n\tarrive(targetPos, deceleration){\n\t\tlet toTarget = targetPos.add(this.m_pPlayer.pos().getReverse());\n\t\tlet dist = toTarget.length();\n\t\tif(dist > 0){\n\t\t\tconst decelerationTweaker = 0.3;\n\t\t\tlet speed = dist / (deceleration * decelerationTweaker);\n\t\t\tspeed = Math.min(speed, this.m_pPlayer.maxSpeed());\n\t\t\tlet desiredVelocity = toTarget.crossNum(speed / dist);\n\t\t\treturn desiredVelocity.add(this.m_pPlayer.velocity().getReverse());\n\t\t}\n\t\treturn new Vector2D(0, 0);\n\t}\n\tpursuit(ball){\n\t\tlet toBall = ball.pos().add(this.m_pPlayer.pos().getReverse());\n\t\tlet lookAheadTime = 0;\n\t\tif(ball.speed() != 0){\n\t\t\tlookAheadTime = toBall.length() / ball.speed();\n\t\t}\n\t\tthis.m_vTarget = ball.futurePosition(lookAheadTime);\n\t\treturn this.arrive(this.m_vTarget, fast);\n\t}\n\tfindNeighbours(){\n\t\tlet allPlayers = AutoList.getAllMembers();\n\t\tfor(let i = 0; i < allPlayers.length; i++){\n\t\t\tlet curPlayer = allPlayers[i];\n\t\t\tcurPlayer.steering().unTag();\n\t\t\tlet to = curPlayer.pos().add(this.m_pPlayer.pos().getReverse());\n\t\t\tif(to.lengthSq() < this.m_dViewDistance * this.m_dViewDistance){\n\t\t\t\tcurPlayer.steering().tag();\n\t\t\t}\n\t\t}\n\t}\n\tseparation(){\n\t\tlet steeringForce = new Vector2D();\n\t\tlet allPlayers = AutoList.getAllMembers();\n\t\tthis.findNeighbours();\n\t\tfor(let i = 0; i < allPlayers.length; i++){\n\t\t\tlet curPlayer = allPlayers[i];\n\t\t\tif(curPlayer != this.m_pPlayer && curPlayer.steering().tagged()){\n\t\t\t\tlet toAgent = this.m_pPlayer.pos().add(curPlayer.pos().getReverse());\n\t\t\t\tsteeringForce = steeringForce.add(vec2dNormalize(toAgent).crossNum(1 / toAgent.length()));\n\t\t\t}\n\t\t}\n\t\treturn steeringForce;\n\t}\n\tinterpose(ball, target, distFromTarget){\n\t\treturn this.arrive(target.add(vec2dNormalize(ball.pos().add(target.getReverse())).crossNum(distFromTarget)), normal);\n\t}\n\trenderAids(){\n\t\tgdi.redPen();\n\t\tgdi.line(this.m_pPlayer.pos(), this.m_pPlayer.pos().add(this.m_vSteeringForce.crossNum(20)));\n\t}\n}\n\nexport {\n\tSteeringBehavior as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/steering_behavior.js","class AutoList{\n\tconstructor() {\n\t\tthis.m_Members = [];\n\t}\n\taddMember(member){\n\t\tthis.m_Members.push(member);\n\t}\n\tgetAllMembers(){\n\t\treturn this.m_Members;\n\t}\n}\n\nconst autoList = new AutoList();\n\nexport {\n\tautoList as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/misc/autolist.js","import PRM from './params';\nimport MessageType from './soccer_messages';\nimport Vector2D, {\n\tvec2dNormalize\n} from './common/2d/vector2d';\nimport dispatcher from './common/messaging/message_dispatcher';\n\nconst GlobalKeeperState = {\n\tname: 'GlobalKeeperState',\n\tenter: function(keeper){\n\t\t// \n\t},\n\texecute: function(keeper){\n\t\t// \n\t},\n\texit: function(keeper){\n\t\t// \n\t},\n\tonMessage: function(keeper, telegram){\n\t\tswitch(telegram.msg){\n\t\t\tcase MessageType.Msg_GoHome:\n\t\t\t\tkeeper.setDefaultHomeRegion();\n\t\t\t\tkeeper.getFSM().changeState(ReturnHome);\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\tcase MessageType.Msg_ReceiveBall:\n\t\t\t\tkeeper.getFSM().changeState(InterceptBall);\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t}\n};\n\nconst TendGoal = {\n\tname: 'TendGoal',\n\tenter: function(keeper){\n\t\tkeeper.steering().interposeOn(PRM.GoalKeeperTendingDistance);\n\t\tkeeper.steering().setTarget(keeper.getRearInterposeTarget());\n\t},\n\texecute: function(keeper){\n\t\tkeeper.steering().setTarget(keeper.getRearInterposeTarget());\n\t\tif(keeper.ballWithinKeeperRange()){\n\t\t\tkeeper.ball().trap();\n\t\t\tkeeper.pitch().setGoalKeeperHasBall(true);\n\t\t\tkeeper.getFSM().changeState(PutBallBackInPlay);\n\t\t\treturn;\n\t\t}\n\t\tif(keeper.ballWithinRangeForIntercept() && !keeper.team().inControl()){\n\t\t\tkeeper.getFSM().changeState(InterceptBall);\n\t\t}\n\t\tif(keeper.tooFarFromGoalMouth() && keeper.team().inControl()){\n\t\t\tkeeper.getFSM().changeState(ReturnHome);\n\t\t\treturn;\n\t\t}\n\t},\n\texit: function(keeper){\n\t\tkeeper.steering().interposeOff();\n\t},\n\tonMessage: function(keeper, telegram){\n\t\treturn false;\n\t}\n};\n\nconst InterceptBall = {\n\tname: 'InterceptBall',\n\tenter: function(keeper){\n\t\tkeeper.steering().pursuitOn();\n\t},\n\texecute: function(keeper){\n\t\tif(keeper.tooFarFromGoalMouth() && !keeper.isClosestPlayerOnPitchToBall()){\n\t\t\tkeeper.getFSM().changeState(ReturnHome);\n\t\t\treturn;\n\t\t}\n\t\tif(keeper.ballWithinKeeperRange()){\n\t\t\tkeeper.ball().trap();\n\t\t\tkeeper.pitch().setGoalKeeperHasBall(true);\n\t\t\tkeeper.getFSM().changeState(PutBallBackInPlay);\n\t\t}\n\t},\n\texit: function(keeper){\n\t\tkeeper.steering().pursuitOff();\n\t},\n\tonMessage: function(keeper, telegram){\n\t\treturn false;\n\t}\n};\n\nconst ReturnHome = {\n\tname: 'ReturnHome',\n\tenter: function(keeper){\n\t\tkeeper.steering().arriveOn();\n\t},\n\texecute: function(keeper){\n\t\tkeeper.steering().setTarget(keeper.homeRegion().center());\n\t\tif(keeper.inHomeRegion() || !keeper.team().inControl()){\n\t\t\tkeeper.getFSM().changeState(TendGoal);\n\t\t}\n\t},\n\texit: function(keeper){\n\t\tkeeper.steering().arriveOff();\n\t},\n\tonMessage: function(keeper, telegram){\n\t\treturn false;\n\t}\n};\n\nconst PutBallBackInPlay = {\n\tname: 'PutBallBackInPlay',\n\tenter: function(keeper){\n\t\tkeeper.team().setControllingPlayer(keeper);\n\t\tkeeper.team().opponents().returnAllFieldPlayersToHome();\n\t\tkeeper.team().returnAllFieldPlayersToHome();\n\t},\n\texecute: function(keeper){\n\t\tlet passInfo = keeper.team().findPass(keeper, PRM.MaxPassingForce, PRM.GoalkeeperMinPassDistance);\n\t\tif(passInfo.result){\n\t\t\tkeeper.ball().kick(vec2dNormalize(passInfo.target.add(keeper.ball().pos().getReverse())), PRM.MaxPassingForce);\n\t\t\tkeeper.pitch().setGoalKeeperHasBall(false);\n\t\t\tdispatcher.dispatchMessage(0, keeper.id(), passInfo.receiver.id(), MessageType.Msg_ReceiveBall, passInfo.target);\n\t\t\tkeeper.getFSM().changeState(TendGoal);\n\t\t\treturn;\n\t\t}\n\t\tkeeper.setVelocity(new Vector2D());\n\t},\n\texit: function(keeper){\n\t\t// \n\t},\n\tonMessage: function(keeper, telegram){\n\t\treturn false;\n\t}\n};\n\nexport {\n\tGlobalKeeperState,\n\tTendGoal,\n\tInterceptBall,\n\tReturnHome,\n\tPutBallBackInPlay\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/goalkeeper_state.js","import PRM from './params';\nimport MessageType from './soccer_messages';\nimport dispatcher from './common/messaging/message_dispatcher';\nimport Vector2D, {\n  vec2dNormalize\n} from './common/2d/vector2d';\nimport {\n  randFloat\n} from './common/misc/utils';\nimport {\n  addNoiseToKick\n} from './soccer_ball';\nimport {\n  vec2dRotateAroundOrigin\n} from './common/2d/transformations';\n\nconst GlobalPlayerState = {\n  name: 'GlobalPlayerState',\n  enter: function(player){},\n  execute: function(player){\n    if(player.ballWithinReceivingRange() && player.isControllingPlayer()){\n      player.setMaxSpeed(PRM.PlayerMaxSpeedWithBall);\n    }else{\n      player.setMaxSpeed(PRM.PlayerMaxSpeedWithoutBall);\n    }\n  },\n  exit: function(player){},\n  onMessage: function(player, telegram){\n    switch(telegram.msg){\n      case MessageType.Msg_ReceiveBall:\n        player.steering().setTarget(telegram.extraInfo);\n        player.getFSM().changeState(ReceiveBall);\n        return true;\n        break;\n      case MessageType.Msg_SupportAttacker:\n        if(player.getFSM().isInstate(SupportAttacker)){\n          return true;\n        }\n        player.steering().setTarget(player.team().getSupportSpot());\n        player.getFSM().changeState(SupportAttacker);\n        return true;\n        break;\n      case MessageType.Msg_Wait:\n        player.getFSM().changeState(Wait);\n        return true;\n        break;\n      case MessageType.Msg_GoHome:\n        player.setDefaultHomeRegion();\n        player.getFSM().changeState(ReturnToHomeRegion);\n        return true;\n        break;\n      case MessageType.Msg_PassToMe:\n        let receiver = telegram.extraInfo;\n        if(player.team().receiver() != null || !player.ballWithinKickingRange()){\n          console.warn('player cannot make requested pass');\n          return true;\n        }\n        player.ball().kick(receiver.pos().add(player.ball().pos().getReverse()), PRM.MaxPassingForce);\n        dispatcher.dispatchMessage(0, player.id(), receiver.id(), MessageType.Msg_ReceiveBall, receiver.pos());\n        player.getFSM().changeState(Wait);\n        player.findSupport();\n        return true;\n        break;\n    }\n    return false;\n  }\n};\n\nconst ChaseBall = {\n  name: 'ChaseBall',\n  enter: function(player){\n    player.steering().seekOn();\n  },\n  execute: function(player){\n    if(player.ballWithinKickingRange()){\n      player.getFSM().changeState(KickBall);\n      return;\n    }\n    if(player.isClosestTeamMemberToBall()){\n      player.steering().setTarget(player.ball().pos());\n      return;\n    }\n    player.getFSM().changeState(ReturnToHomeRegion);\n  },\n  exit: function(player){\n    player.steering().seekOff();\n  },\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst ChaseOpp = {\n  name: 'ChaseOpp',\n  enter: function(player){\n    player.steering().seekOn();\n  },\n  execute: function(player){\n    let closestOpp = player.closestOpponentPlayer();\n    if(closestOpp){\n      let closestOppToHomeGoal = player.team().homeGoal().center().add(closestOpp.pos().getReverse());\n      let distClosestOppToHomeGoal = closestOppToHomeGoal.length();\n      let targetPos = closestOpp.pos().add(vec2dNormalize(closestOppToHomeGoal).crossNum(player.bRadius() * 1 + 5 * distClosestOppToHomeGoal / (player.team().pitch().playingArea().width() / 2)));\n      player.steering().setTarget(targetPos);\n    }\n    if(player.isClosestTeamMemberToBall()){\n      player.getFSM().changeState(ChaseBall);\n    }\n    if(player.isToFarFromHomeRegion()){\n      player.getFSM().changeState(ReturnToHomeRegion);\n    }\n  },\n  exit: function(player){\n    player.steering().seekOff();\n  },\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst Dribble = {\n  name: 'Dribble',\n  enter: function(player){\n    player.team().setControllingPlayer(player);\n  },\n  execute: function(player){\n    let dot = player.team().homeGoal().facing().dot(player.heading());\n    if(dot < 0){\n      let direction = player.heading();\n      let angle = Math.PI / 4 * -1 * player.team().homeGoal().facing().sign(player.heading());\n      vec2dRotateAroundOrigin(direction, angle);\n      const kickingForce = 0.8;\n      player.ball().kick(direction, kickingForce);\n    }else{\n      player.ball().kick(player.team().homeGoal().facing(), PRM.MaxDribbleForce);\n    }\n    player.getFSM().changeState(ChaseBall);\n    return;\n  },\n  exit: function(player){},\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst ReturnToHomeRegion = {\n  name: 'ReturnToHomeRegion',\n  enter: function(player){\n    player.steering().arriveOn();\n    if(!player.homeRegion().inside(player.steering().target(), 'HALF_SIZE')){\n      player.steering().setTarget(player.homeRegion().center());\n    }\n  },\n  execute: function(player){\n    if(player.pitch().gameOn()){\n      if(player.isClosestTeamMemberToBall() && player.team().receiver() == null && !player.pitch().goalKeeperHasBall()){\n        player.getFSM().changeState(ChaseBall);\n        return;\n      }\n    }\n    if(player.pitch().gameOn() && player.homeRegion().inside(player.pos(), 'HALF_SIZE')){\n      player.steering().setTarget(player.pos());\n      player.getFSM().changeState(Wait);\n    }else if(!player.pitch().gameOn() && player.atTarget()){\n      player.getFSM().changeState(Wait);\n    }\n  },\n  exit: function(player){\n    player.steering().arriveOff();\n  },\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst Wait = {\n  name: 'Wait',\n  enter: function(player){\n    if(!player.pitch().gameOn()){\n      player.steering().setTarget(player.homeRegion().center());\n    }\n  },\n  execute: function(player){\n    if(!player.atTarget()){\n      player.steering().arriveOn();\n      return;\n    }else{\n      player.steering().arriveOff();\n      player.setVelocity(new Vector2D(0, 0));\n      player.trackBall();\n    }\n    if(player.pitch().gameOn()){\n      if(player.team().receiver() == null && !player.pitch().goalKeeperHasBall()){\n        if(player.isClosestTeamMemberToBall()){\n          player.getFSM().changeState(ChaseBall);\n          return;\n        }else{\n          player.getFSM().changeState(ChaseOpp);\n          return;\n        }\n      }\n    }\n  },\n  exit: function(player){},\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst KickBall = {\n  name: 'KickBall',\n  enter: function(player){\n    player.team().setControllingPlayer(player);\n    if(!player.isReadyFornextKick()){\n      player.getFSM().changeState(ChaseBall);\n    }\n  },\n  execute: function(player){\n    if(!player.team().controllingPlayer()){\n      player.getFSM().changeState(ChaseBall);\n      return;\n    }\n    let toBall = player.ball().pos().add(player.pos().getReverse());\n    let dot = player.heading().dot(vec2dNormalize(toBall));\n    let ballTarget;\n    let kickDirection;\n    if(player.team().receiver() != null || player.pitch().goalKeeperHasBall() || dot < 0){\n      console.warn('goaly has ball / ball behind player');\n      player.getFSM().changeState(ChaseBall);\n      return;\n    }\n    let power = PRM.MaxShootingForce * dot;\n    let shootInfo = player.team().canShoot(player.ball().pos(), power);\n    if(shootInfo.result || randFloat() < PRM.ChancePlayerAttemptsPotShot){\n      ballTarget = addNoiseToKick(player.ball().pos(), shootInfo.target);\n      kickDirection = ballTarget.add(player.ball().pos().getReverse());\n      player.ball().kick(kickDirection, power);\n      player.getFSM().changeState(Wait);\n      player.findSupport();\n      return;\n    }\n    power = PRM.MaxPassingForce * dot;\n    let passInfo = player.team().findPass(player, power, PRM.MinPassDistance);\n    if(player.isThreatened() && passInfo.result){\n      ballTarget = addNoiseToKick(player.ball().pos(), passInfo.target);\n      kickDirection = ballTarget.add(player.ball().pos().getReverse());\n      player.ball().kick(kickDirection, power);\n      dispatcher.dispatchMessage(0, player.id(), passInfo.receiver.id(), MessageType.Msg_ReceiveBall, ballTarget);\n      player.getFSM().changeState(Wait);\n      player.findSupport();\n      return;\n    }else{\n      player.findSupport();\n      player.getFSM().changeState(Dribble);\n    }\n  },\n  exit: function(player){},\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst ReceiveBall = {\n  name: 'ReceiveBall',\n  enter: function(player){\n    player.team().setReceiver(player);\n    player.team().setControllingPlayer(player);\n    const passThreatRadius = 70;\n    if(player.inHotregion() || randFloat() < PRM.ChanceOfUsingArriveTypeReceiveBehavior &&\n      !player.team().isOpponentWithinRadius(player.pos(), passThreatRadius)\n    ){\n      player.steering().arriveOn();\n    }else{\n      player.steering().pursuitOn();\n    }\n  },\n  execute: function(player){\n    if(player.ballWithinReceivingRange() || !player.team().inControl()){\n      player.getFSM().changeState(ChaseBall);\n      return;\n    }\n    if(player.steering().pursuitIsOn()){\n      player.steering().setTarget(player.ball().pos());\n    }\n    if(player.atTarget()){\n      player.steering().arriveOff();\n      player.steering().pursuitOff();\n      player.trackBall();\n      player.setVelocity(new Vector2D(0, 0));\n    }\n  },\n  exit: function(player){\n    player.steering().arriveOff();\n    player.steering().pursuitOff();\n    player.team().setReceiver(null);\n  },\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nconst SupportAttacker = {\n  name: 'SupportAttacker',\n  enter: function(player){\n    player.steering().arriveOn();\n    player.steering().setTarget(player.team().getSupportSpot());\n  },\n  execute: function(player){\n    if(!player.team().inControl()){\n      player.getFSM().changeState(ReturnToHomeRegion);\n      return;\n    }\n    if(player.team().getSupportSpot() != player.steering().target()){\n      player.steering().setTarget(player.team().getSupportSpot());\n      player.steering().arriveOn();\n    }\n    if(player.team().canShoot(player.pos(), PRM.MaxShootingForce)){\n      player.team().requestPass(player);\n    }\n    if(player.atTarget()){\n      player.steering().arriveOff();\n      player.trackBall();\n      player.setVelocity(new Vector2D(0, 0));\n      if(!player.isThreatened()){\n        player.team().requestPass(player);\n      }\n    }\n  },\n  exit: function(player){\n    player.team().setSupportingPlayer(null);\n    player.steering().arriveOff();\n  },\n  onMessage: function(player, telegram){\n    return false;\n  }\n};\n\nexport {\n  GlobalPlayerState,\n  ChaseBall,\n  Dribble,\n  ReturnToHomeRegion,\n  Wait,\n  KickBall,\n  ReceiveBall,\n  SupportAttacker\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/field_player_state.js","import PlayerBase, {\n\tPLAYERROLE\n} from './player_base';\nimport StateMachine from './common/fsm/state_machine';\nimport PRM from './params';\nimport {\n\tenforceNonPenetrationConstraint\n} from './entity_function_templates';\nimport AutoList from './common/misc/autolist';\nimport Vector2D, {\n\tvec2dNormalize,\n\tvec2DDistanceSq\n} from './common/2d/vector2d';\nimport {\n\tTEAM_COLOR\n} from './soccer_team';\nimport gdi from './common/misc/cgdi';\nimport {\n\tvec2dRotateAroundOrigin,\n\tworldTransform\n} from './common/2d/transformations';\nimport {\n\tGlobalKeeperState,\n\tTendGoal,\n\tInterceptBall,\n\tReturnHome,\n\tPutBallBackInPlay\n} from './goalkeeper_state';\n\nclass GoalKeeper extends PlayerBase{\n\tconstructor(homeTeam, homeRegion, startState, heading, velocity, mass, maxForce, maxSpeed, maxTurnRate, scale) {\n\t\tsuper(homeTeam, homeRegion, heading, velocity, mass, maxForce, maxSpeed, maxTurnRate, scale, PLAYERROLE.goalKeeper);\n\t\tthis.m_pStateMachine = new StateMachine(this);\n\t\tthis.m_pStateMachine.setCurrentState(startState);\n\t\tthis.m_pStateMachine.setPreviousState(startState);\n\t\tthis.m_pStateMachine.setGlobalState(GlobalKeeperState);\n\t\tthis.m_pStateMachine.currentState().enter(this);\n\t}\n\tgetFSM(){\n\t\treturn this.m_pStateMachine;\n\t}\n\thandleMessage(msg){\n\t\treturn this.m_pStateMachine.handleMessage(msg);\n\t}\n\tupdate(timeElapsed){\n\t\tthis.m_pStateMachine.update();\n\t\tlet steeringForce = this.m_pSteering.calculate();\n\t\tlet acceleration = steeringForce.crossNum(1 / this.m_dMass);\n\t\tthis.m_vVelocity = this.m_vVelocity.add(acceleration);\n\t\tthis.m_vVelocity.truncate(this.m_dMaxSpeed);\n\t\tthis.m_vPos = this.m_vPos.add(this.m_vVelocity);\n\t\tif(PRM.bNonPenetrationConstraint){\n\t\t\tenforceNonPenetrationConstraint(this, AutoList.getAllMembers());\n\t\t}\n\t\tif(!this.m_vVelocity.isZero()){\n\t\t\tthis.m_vHeading = vec2dNormalize(this.m_vVelocity);\n\t\t\tthis.m_vSide = this.m_vHeading.perp();\n\t\t}\n\t\tif(!this.pitch().goalKeeperHasBall()){\n\t\t\tthis.m_vLookAt = vec2dNormalize(this.ball().pos().add(this.pos().getReverse()));\n\t\t}\n\t}\n\trender(){\n\t\tif(this.team().teamColor() == TEAM_COLOR.blue){\n\t\t\tgdi.bluePen();\n\t\t}else{\n\t\t\tgdi.redPen();\n\t\t}\n\t\tthis.m_vecPlayerVBTrans = worldTransform(this.m_vecPlayerVB, this.pos(), this.m_vLookAt, this.m_vLookAt.perp(), this.scale());\n\t\tgdi.closedShape(this.m_vecPlayerVBTrans);\n\t\tgdi.brownBrush();\n\t\tgdi.circle(this.pos(), 6);\n\t\tif(PRM.ViewIDs){\n\t\t\tgdi.textColor('rgb(0, 170, 0)');\n\t\t\tgdi.textAtPos(this.pos().x - 20, this.pos().y - 20, this.id());\n\t\t}\n\t\tif(PRM.ViewStates){\n\t\t\tgdi.textColor('rgb(0, 170, 0)');\n\t\t\tgdi.transparentText();\n\t\t\tgdi.textAtPos(this.pos().x, this.pos().y - 20, this.m_pStateMachine.getNameOfCurrentState());\n\t\t}\n\t}\n\tballWithinRangeForIntercept(){\n\t\treturn vec2DDistanceSq(this.team().homeGoal().center(), this.ball().pos()) <= PRM.GoalKeeperInterceptRangeSq;\n\t}\n\ttooFarFromGoalMouth(){\n\t\treturn vec2DDistanceSq(this.pos(), this.getRearInterposeTarget()) > PRM.GoalKeeperInterceptRangeSq;\n\t}\n\tgetRearInterposeTarget(){\n\t\tlet xPosTarget = this.team().homeGoal().center().x;\n\t\tlet yPosTarget = this.pitch().playingArea().center().y - PRM.GoalWidth * 0.5 + this.ball().pos().y / this.pitch().playingArea().height() * PRM.GoalWidth;\n\t\treturn new Vector2D(xPosTarget, yPosTarget);\n\t}\n}\n\nexport {\n\tGoalKeeper as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/goal_keeper.js","import {\n\ttwoCirclesOverlapped,\n\tdistToLineSegment\n} from './common/2d/geometry';\nimport { vec2DDistanceSq } from './common/2d/vector2d';\n\nconst maxDouble = 999999;\n\nfunction overlapped(ob, conOb, minDistBetweenObstacles = 40){\n\tfor(let i = 0; i < conOb.length; i++){\n\t\tlet it = conOb[i];\n\t\tif(twoCirclesOverlapped(ob.pos().x, ob.pos().y, ob.bRadius() + minDistBetweenObstacles, it.pos().x, it.pos().y, it.bRadius())){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction tagNeighbors(entity, containerOfEntities, radius){\n\tfor(let i = 0; i < containerOfEntities.length; i++){\n\t\tlet curEntity = containerOfEntities[i];\n\t\tcurEntity.unTag();\n\t\tlet to = curEntity.pos().add(entity.pos().getReverse());\n\t\tlet range = radius + curEntity.bRadius();\n\t\tif(curEntity != entity && to.lengthSq() < range * range){\n\t\t\tcurEntity.tag();\n\t\t}\n\t}\n}\n\nfunction enforceNonPenetrationConstraint(entity, containerOfEntities){\n\tfor(let i = 0; i < containerOfEntities.length; i++){\n\t\tlet curEntity = containerOfEntities[i];\n\t\tif(curEntity != entity){\n\t\t\tlet toEntity = entity.pos().add(curEntity.pos().getReverse());\n\t\t\tlet distFromEachOther = toEntity.length();\n\t\t\tlet amountOfOverLap = curEntity.bRadius() + entity.bRadius() - distFromEachOther;\n\t\t\tif(amountOfOverLap >= 0){\n\t\t\t\tentity.setPos(entity.pos().add(toEntity.crossNum(1 / distFromEachOther * amountOfOverLap)));\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getEntityLineSegmentIntersections(entities, theOneToIgnore, A, B, range = maxDouble){\n\tlet hits = [];\n\tfor(let i = 0; i < entities.length; i++){\n\t\tlet it = entities[i];\n\t\tif(it.id() === theOneToIgnore || vec2DDistanceSq(it.pos(), A) > range * range){\n\t\t\t// do nothing\n\t\t}else{\n\t\t\tif(distToLineSegment(A, B, it.pos()) < it.bRadius()){\n\t\t\t\thits.push(it);\n\t\t\t}\n\t\t}\n\t}\n\treturn hits;\n}\n\nfunction getClosestEntityLineSegmentIntersection(entities, theOneToIgnore, A, B, range = MaxDouble){\n\tlet closestEntity = null;\n\tlet closestDist = maxDouble;\n\tfor(let i = 0; i < entities.length; i++){\n\t\tlet it = entities[i];\n\t\tlet distSq = vec2DDistanceSq(it.pos(), A);\n\t\tif(it.id() === theOneToIgnore || distSq > range * range){\n\t\t\t// do nothing\n\t\t}else{\n\t\t\tif(distToLineSegment(A, B, it.pos()) < it.bRadius()){\n\t\t\t\tif(distSq < closestDist){\n\t\t\t\t\tclosestDist = distSq;\n\t\t\t\t\tclosestEntity = it;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn closestEntity;\n}\n\nexport {\n\toverlapped,\n\ttagNeighbors,\n\tenforceNonPenetrationConstraint,\n\tgetEntityLineSegmentIntersections,\n\tgetClosestEntityLineSegmentIntersection\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/entity_function_templates.js","import PlayerBase from './player_base';\nimport StateMachine from './common/fsm/state_machine';\nimport {\n\tGlobalPlayerState,\n\tChaseBall,\n\tDribble,\n\tReturnToHomeRegion,\n\tWait,\n\tKickBall,\n\tReceiveBall,\n\tSupportAttacker\n} from './field_player_state';\nimport Regulator from './common/time/regulator';\nimport PRM from './params';\nimport {\n\tclamp\n} from './common/misc/utils';\nimport {\n\tvec2dRotateAroundOrigin,\n\tworldTransform\n} from './common/2d/transformations';\nimport {\n\tenforceNonPenetrationConstraint\n} from './entity_function_templates';\nimport AutoList from './common/misc/autolist';\nimport gdi from './common/misc/cgdi';\nimport {\n\tTEAM_COLOR\n} from './soccer_team';\nimport {\n\tvec2DDistanceSq\n} from './common/2d/vector2d';\n\nclass FieldPlayer extends PlayerBase{\n\tconstructor(homeTeam, homeRegion, startState, heading, velocity, mass, maxForce, maxSpeed, maxTurnRate, scale, role) {\n\t\tsuper(homeTeam, homeRegion, heading, velocity, mass, maxForce, maxSpeed, maxTurnRate, scale, role);\n\t\tthis.m_pStateMachine = new StateMachine(this);\n\t\tif(startState){\n\t\t\tthis.m_pStateMachine.setCurrentState(startState);\n\t\t\tthis.m_pStateMachine.setPreviousState(startState);\n\t\t\tthis.m_pStateMachine.setGlobalState(GlobalPlayerState);\n\t\t\tthis.m_pStateMachine.currentState().enter(this);\n\t\t}\n\t\tthis.m_pSteering.separationOn();\n\t\tthis.m_pKickLimiter = new Regulator(PRM.PlayerKickFrequency);\n\t}\n\tupdate(timeElapsed){\n\t\tthis.m_pStateMachine.update();\n\t\tthis.m_pSteering.calculate();\n\t\tif(this.m_pSteering.force().isZero()){\n\t\t\tconst BrakingRate = 0.8;\n\t\t\tthis.m_vVelocity = this.m_vVelocity.crossNum(BrakingRate);\n\t\t}\n\t\tlet turningForce = this.m_pSteering.sideComponent();\n\t\tturningForce = clamp(turningForce, -PRM.PlayerMaxTurnRate, PRM.PlayerMaxTurnRate);\n\t\tvec2dRotateAroundOrigin(this.m_vHeading, turningForce);\n\t\tthis.m_vVelocity = this.m_vHeading.crossNum(this.m_vVelocity.length());\n\t\tthis.m_vSide = this.m_vHeading.perp();\n\t\tlet accel = this.m_vHeading.crossNum(this.m_pSteering.forwardComponent() / this.m_dMass);\n\t\tthis.m_vVelocity = this.m_vVelocity.add(accel);\n\t\tthis.m_vVelocity.truncate(this.m_dMaxSpeed);\n\t\tthis.m_vPos = this.m_vPos.add(this.m_vVelocity);\n\t\tif(PRM.bNonPenetrationConstraint){\n\t\t\tenforceNonPenetrationConstraint(this, AutoList.getAllMembers());\n\t\t}\n\t}\n\trender(){\n\t\tgdi.transparentText();\n\t\tgdi.textColor(gdi.GREY);\n\t\tif(this.team().teamColor() == TEAM_COLOR.blue){\n\t\t\tgdi.bluePen();\n\t\t}else{\n\t\t\tgdi.redPen();\n\t\t}\n\t\tthis.m_vecPlayerVBTrans = worldTransform(this.m_vecPlayerVB, this.pos(), this.heading(), this.side(), this.scale());\n\t\tgdi.closedShape(this.m_vecPlayerVBTrans);\n\t\t// threaten\n\t\tgdi.brownBrush();\n\t\tif(PRM.HighlightIfThreatened && this.team().controllingPlayer() == this && this.isThreatened()){\n\t\t\tgdi.yellowBrush();\n\t\t}\n\t\tgdi.circle(this.pos(), 6);\n\t\t// state\n\t\tif(PRM.ViewStates){\n\t\t\tgdi.textColor('rgb(0, 170, 0)');\n\t\t\tgdi.textAtPos(this.m_vPos.x, this.m_vPos.y - 20, this.m_pStateMachine.getNameOfCurrentState());\n\t\t}\n\t\t// id\n\t\tif(PRM.ViewIDs){\n\t\t\tgdi.textColor('rgb(0, 170, 0)');\n\t\t\tgdi.textAtPos(this.pos().x - 20, this.pos().y - 20, this.id());\n\t\t}\n\t\tif(PRM.ViewTargets){\n\t\t\tgdi.redBrush();\n\t\t\tgdi.circle(this.steering().target(), 3);\n\t\t\tgdi.textAtPos(this.steering().target().x, this.steering().target().y, this.id());\n\t\t}\n\t}\n\thandleMessage(msg){\n\t\treturn this.m_pStateMachine.handleMessage(msg);\n\t}\n\tgetFSM(){\n\t\treturn this.m_pStateMachine;\n\t}\n\tisReadyFornextKick(){\n\t\treturn this.m_pKickLimiter.isReady();\n\t}\n\tisToFarFromHomeRegion(){\n\t\tlet distToHomeRegionSq = vec2DDistanceSq(this.pos(), this.homeRegion().center());\n\t\tconst maxDist = this.team().pitch().playingArea().width() / 2;\n\t\treturn distToHomeRegionSq > maxDist * maxDist;\n\t}\n}\n\nexport {\n\tFieldPlayer as default\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/field_player.js","import gdi from '../misc/cgdi';\nimport Vector2D, {\n\tvec2dNormalize\n} from './vector2d';\n\nclass Wall2D{\n\tconstructor(A, B, N) {\n\t\tthis.m_vA = new Vector2D();\n\t\tthis.m_vB = new Vector2D();\n\t\tthis.m_vN = new Vector2D();\n\t\tif(A && B){\n\t\t\tthis.m_vA = A;\n\t\t\tthis.m_vB = B;\n\t\t\tif(N){\n\t\t\t\tthis.m_vN = N;\n\t\t\t}else{\n\t\t\t\tthis.calculateNormal();\n\t\t\t}\n\t\t}\n\t}\n\tcalculateNormal(){\n\t\tlet temp = vec2dNormalize(this.m_vB.add(this.m_vA.getReverse()));\n\t\tthis.m_vN.x = -temp.y;\n\t\tthis.m_vN.y = temp.x;\n\t}\n\trender(renderNormals = false){\n\t\tgdi.line(this.m_vA, this.m_vB);\n\t\tif(renderNormals){\n\t\t\tlet midX = (this.m_vA.x + this.m_vB.x) / 2;\n\t\t\tlet midY = (this.m_vA.y + this.m_vB.y) / 2;\n\n\t\t\tgdi.line(new Vector2D(midX, midY), new Vector2D((midX + (this.m_vN.x * 5)), (midY + (this.m_vN.y * 5))));\n\t\t}\n\t}\n\tfrom(){\n\t\treturn this.m_vA;\n\t}\n\tsetFrom(v){\n\t\tthis.m_vA = v;\n\t\tthis.calculateNormal();\n\t}\n\tto(){\n\t\treturn this.m_vB;\n\t}\n\tsetTo(v){\n\t\tthis.m_vB = v;\n\t\tthis.calculateNormal();\n\t}\n\tnormal(){\n\t\treturn this.m_vN;\n\t}\n\tsetNormal(n){\n\t\tthis.m_vN = n;\n\t}\n\tcenter(){\n\t\treturn this.m_vA.add(this.m_vB).crossNum(0.5);\n\t}\n}\n\nexport default Wall2D;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/2d/wall2d.js"],"sourceRoot":""}